<?xml version="1.0" encoding="utf-8"?>
<search>
  
  
  
  <entry>
    <title>å‘¨æŠ¥</title>
    <link href="/2021/10/15/%E5%91%A8%E6%8A%A5/"/>
    <url>/2021/10/15/%E5%91%A8%E6%8A%A5/</url>
    
    <content type="html"><![CDATA[<p class="note note-primary">  <b>10.9ï½10.15</b></p><p>ä¸€å¼€å§‹å°è¯•ä½¿ç”¨pytorchå¤ç°ptr-netï¼Œä½†æ˜¯å‘ç°æ¡†æ¶åŸºç¡€ä¸è¶³ï¼Œè¯¥è®¡åˆ’ä¸å¤ªç°å®ã€‚éšåï¼Œé˜…è¯»äº†pytorchå®˜æ–¹TutorialsåŠDocsï¼Œå¹¶åšäº†ä¸€äº›å°çš„ç»ƒä¹ ã€‚æ¥ä¸‹æ¥çš„è®¡åˆ’æ˜¯ï¼š</p><ol><li>å®Œæˆä¸Šå‘¨RNNçš„ç¬”è®°</li><li>å†æ¬¡å°è¯•å¤ç°ptr-net</li></ol><p class="note note-primary">  <b>10.16ï½10.25</b></p><p>èŠ±è´¹äº†å‡ å¤©çš„æ—¶é—´çœ‹<a href="https://github.com/shirgur/PointerNet">github ptr-net pytorch</a>ï¼Œéš¾ä»¥æ¨è¿›ä¸‹å»ï¼Œä¸»è¦åŸå› æ˜¯attentionçš„ç»†èŠ‚äº†è§£ä¸è¶³ã€‚åœ¨22å·æ—¶æ‰¾åˆ°<a href="https://arxiv.org/pdf/1508.04025.pdf">Effective Approaches to Attention-based Neural Machine Translation</a>ä¹‹åç»ˆäºè±ç„¶å¼€æœ—ï¼Œåˆ°25å·ä¸‹åˆä¸ºæ­¢åˆšå®Œæˆæ¨¡å‹ä»£ç çš„debugï¼Œæš‚æœªè¿›è¡Œå®éªŒã€‚</p><p>åœ¨å¤ç°è¿‡ç¨‹ä¸­ï¼Œé‡åˆ°çš„å€¼å¾—æ³¨æ„çš„ä¸€ç‚¹å°±æ˜¯ï¼špytorchåœ¨åå‘ä¼ æ’­çš„è¿‡ç¨‹ä¸­ï¼Œä¸å…è®¸éœ€è¦æ¢¯åº¦è®¡ç®—çš„å‚æ•°è¿›è¡Œå°±åœ°æ“ä½œinplace operationï¼Œå¦åˆ™ä¼šæŠ¥é”™ï¼š</p><div class="code-wrapper"><pre><code class="hljs text">one of the variables needed for gradient computation has been modified by an inplace operation: [torch.FloatTensor [4, 6]], which is output 0 of SoftmaxBackward, is at version 1; expected version 0 instead. Hint: the backtrace further above shows the operation that failed to compute its gradient. The variable in question was changed in there or anywhere later. Good luck!</code></pre></div><p>å¸¸è§çš„ä¼šçŠ¯é”™è¯¯çš„å°±åœ°æ“ä½œæœ‰</p><ul><li><code>x += 1</code></li><li><code>alpha[visted] = 0</code></li></ul><p>ç”±äºæ˜¯25å·ä¸‹åˆåˆšå‘ç°çš„bugï¼Œå¯¹äº<code>å°±åœ°æ“ä½œ</code>è¿˜æœ‰å¾…è¿›ä¸€æ­¥æ€»ç»“ã€‚</p><p>æ¥ä¸‹æ¥çš„è®¡åˆ’æ˜¯ï¼Œé¦–å…ˆç»§ç»­è¿›è¡Œptrnetçš„å®éªŒï¼ŒæŸ¥çœ‹æ¨¡å‹å¤ç°æ•ˆæœï¼Œç„¶åæ ¹æ®æ¨¡å‹å¤ç°åŠå®éªŒä¸­é‡åˆ°çš„ç»†èŠ‚é—®é¢˜å®Œå–„ç¬”è®°ã€‚</p><p class="note note-primary">  <b>10.26ï½10.31</b></p><p>è¿™å‘¨è¿›åº¦æœ‰ç‚¹æ…¢äº†ï¼Œæ€»ç»“å¦‚ä¸‹ï¼š</p><p>10.26~10.27ï¼Œç”±äºç†å‘å¸ˆçš„ä¸€äº›è¿‡å¤±ï¼Œæ•ˆç‡å¾ˆä½ï¼Œä»¥ååº”è¯¥åŠæ—¶è°ƒæ•´å¿ƒæ€ï¼›</p><p>10.28ï½10.29ï¼Œå°è¯•è·‘äº†ä»£ç ï¼Œå¹³å‡lossè¾ƒé«˜ï¼Œåœ¨1å·¦å³ï¼Œä¹‹åè¯¢é—®äº†å¸ˆå…„å¸ˆå§å¦‚ä½•è°ƒæ•´å‚æ•°ï¼Œçœ‹äº†â€ATTENTION, LEARN TO SOLVE ROUTING PROBLEMS!â€çš„ä¸€ç‚¹å¼€å¤´ï¼Œå†™äº†ä¸€éƒ¨åˆ†blogï¼Œæ²¡æœ‰å†™å®Œï¼›</p><p>10.30~10.31ï¼Œå‚ä¸äº†CCPCï¼›</p><p>ä»Šæ™šä¹‹å‰æŠŠblogèµ¶å®Œå§ã€‚</p>]]></content>
    
    
    <categories>
      
      <category>æ‚ä¸ƒæ‚å…«</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>From RNN to Pointer Network</title>
    <link href="/2021/10/04/FromRNNtoPointerNetwork/"/>
    <url>/2021/10/04/FromRNNtoPointerNetwork/</url>
    
    <content type="html"><![CDATA[<p>ä»åŸºç¡€çš„RNNç½‘ç»œç»“æ„å¼€å§‹ï¼Œä»‹ç»LSTMã€Encoder-Decoderã€Attention Mechanismã€Pointer Networkã€‚</p><h1 id="RNNs"><a href="#RNNs" class="headerlink" title="RNNs"></a>RNNs</h1><p>ä¸ä¼ ç»Ÿçš„å‰å‘ç¥ç»ç½‘ç»œå’Œå·ç§¯ç¥ç»ç½‘ç»œä¸åŒï¼Œå¾ªç¯ç¥ç»ç½‘ç»œ (Recurrent Neural Networksï¼ŒRNNs) æ˜¯ä¸€ç§æ“…äºå¤„ç†<strong>åºåˆ—æ•°æ®</strong>çš„æ¨¡å‹ï¼Œä¾‹å¦‚æ–‡æœ¬ã€æ—¶é—´åºåˆ—ã€è‚¡ç¥¨å¸‚åœºç­‰ã€‚</p><p>å¯¹äºåºåˆ—æ•°æ®ï¼Œè¾“å…¥ä¹‹é—´å­˜åœ¨ç€å…ˆåé¡ºåºï¼Œå¦‚â€œæˆ‘æ‰“è½¦å»å•†åœºâ€ å’Œ â€œæˆ‘å»å•†åœºæ‰“è½¦â€ï¼Œæˆ‘ä»¬é€šå¸¸éœ€è¦æŒ‰ç…§ä¸€å®šçš„é¡ºåºé˜…è¯»å¥å­æ‰èƒ½ç†è§£å¥å­çš„æ„æ€ã€‚</p><blockquote><p>å‚è€ƒè‡ªAfshine Amidi å’Œ Shervine Amidi çš„ Recurrent Neural Networks cheatsheet<sup id="fnref:1" class="footnote-ref"><a href="#fn:1" rel="footnote"><span class="hint--top hint--rounded" aria-label=" Afshine Amidi,Shervine Amidi. Recurrent Neural Networks cheatsheet">[1]</span></a></sup></p></blockquote><p>é¢å¯¹è¿™ç§æƒ…å†µæˆ‘ä»¬å°±éœ€è¦ç”¨åˆ°å¾ªç¯ç¥ç»ç½‘ç»œäº†ï¼Œå…¶ç»“æ„å¦‚ä¸‹ï¼š</p><p><img src="https://i.loli.net/2021/10/16/4pJsfiPgcvZDyNB.png" alt="RNNç»“æ„"></p><p>$x^{T}$ä¸ºæˆ‘ä»¬çš„è¾“å…¥åºåˆ—ï¼Œ$a^{T}$ä¸ºéšè—å±‚è¾“å‡ºï¼Œå®ƒä¿å­˜äº†è¾“å…¥åºåˆ—çš„å†å²ä¿¡æ¯ï¼Œ$y^{T}$ä¸ºè¾“å‡ºåºåˆ—ï¼Œè®¡ç®—æ–¹æ³•å¦‚ä¸‹</p><script type="math/tex; mode=display">\begin{align}a^{<t>} = g_{1}(W_{aa}a^{<t-1>} + W_{ax}x^{<t>} + b_{a}) \\y^{<t>} = g_{2} (W_{ya}a^{<t>} + b_{y})\end{align}</script><p>å…¶ä¸­ï¼Œ$W_{ax}$ï¼Œ$W_{aa}$ï¼Œ$W_{ya}$ï¼Œ$b_a$ï¼Œ$b_y$ï¼Œ$W_{ax}$ï¼Œ$W_{aa}$ï¼Œ$W_{ya}$ï¼Œ$b_a$ï¼Œ$b_y$ ä¸ºæ¨¡å‹å‚æ•°ï¼Œç”±æ‰€æœ‰æ—¶åˆ»$t$å…±äº«ï¼Œ $g_1$ï¼Œ$g_2$ ä¸ºæ¿€æ´»å‡½æ•°ã€‚</p><p><img src="https://i.loli.net/2021/10/16/mYIvgnV59NKoPXB.png" alt="å•ä¸ªRNNå•å…ƒå†…éƒ¨ç»“æ„"></p><p>æŸå¤±å‡½æ•°$\mathcal{L}$  å®šä¹‰ä¸ºå„æ—¶åˆ»$\mathcal{L}$ ä¹‹å’Œï¼Œæ¯ä¸€æ—¶åˆ»$t$éƒ½å°†è¿›è¡Œï¼šè®¡ç®—lossï¼Œè®¡ç®—åå¯¼æ•°ï¼Œæ›´æ–°ç½‘ç»œå‚æ•°</p><script type="math/tex; mode=display">\mathcal{L}(\hat{y}, y) = \sum^{T_y}_{t = 1}\mathcal{L}(\hat{y}^{<t>}, y^{<t>})</script><p>å…¶ä¸­ï¼Œ$\hat{y}^{<t>}$ä»£è¡¨$t$æ—¶åˆ»é¢„æµ‹å€¼ï¼Œ$y^{<t>}$ä»£è¡¨$t$æ—¶åˆ»çš„çœŸå®å€¼ã€‚</p><p>è¿™æ ·ä¸€ä¸ªåŸºç¡€çš„RNNç»“æ„ï¼Œéšè—å±‚çš„å­˜åœ¨è®©ä»–æ‹¥æœ‰â€œè®°å¿†â€çš„èƒ½åŠ›ï¼Œå½“ç„¶å®ƒä¹Ÿå­˜åœ¨ä¸€äº›ä¸è¶³ã€‚</p><div class="table-container"><table><thead><tr><th>ğŸ˜†</th><th>ğŸ˜­</th></tr></thead><tbody><tr><td>è¾“å…¥åºåˆ—é•¿åº¦å¯å˜ï¼Œæ¨¡å‹sizeä¸ä¼šéšç€è¾“å…¥åºåˆ—é•¿åº¦å¢åŠ è€Œå¢åŠ </td><td>è®¡ç®—ç¼“æ…¢</td></tr><tr><td>â€œè®°å¿†â€å†å²ä¿¡æ¯</td><td>é•¿æœŸè®°å¿†èƒ½åŠ›ä¸è¶³</td></tr><tr><td>æƒé‡åœ¨ä»»æ„æ—¶åˆ»å…±äº«</td><td>çœ‹ä¸åˆ°æœªæ¥çš„ä¿¡æ¯</td></tr></tbody></table></div><p>é¢å¯¹ä¸åŒçš„åº”ç”¨åœºæ™¯ï¼ŒRNNæ‹¥æœ‰å¤šç§ç»“æ„ï¼š</p><ul><li><strong>è¾“å…¥ä¸æ˜¯åºåˆ—è€Œè¾“å‡ºä¸ºåºåˆ—ï¼Œå¦‚æ ¹æ®ç±»åˆ«äº§ç”ŸéŸ³ä¹</strong></li></ul><p><img src="https://i.loli.net/2021/10/16/w3YJghbM74sezoZ.png" alt="$T_x$ = 1, $T_y$ > 1" style="zoom:50%;" /></p><ul><li><strong>è¾“å…¥æ˜¯åºåˆ—è€Œè¾“å‡ºä¸æ˜¯åºåˆ—ï¼Œå¦‚æƒ…æ„Ÿåˆ†æ</strong></li></ul><p><img src="https://i.loli.net/2021/10/16/nZFBRSwj9J37LeD.png" alt="$T_x > 1$, $T_y = 1$" style="zoom:50%;" /></p><ul><li><strong>è¾“å…¥æ˜¯åºåˆ—è€Œè¾“å‡ºä¹Ÿæ˜¯åºåˆ—ï¼Œä¸”ç­‰é•¿ï¼Œä¼ ç»ŸRNNç»“æ„</strong></li></ul><p><img src="https://i.loli.net/2021/10/16/wF75QY4ckRxPLnW.png" alt="$T_x$ = $T_y$" style="zoom:50%;" /></p><ul><li><strong>è¾“å…¥æ˜¯åºåˆ—è€Œè¾“å‡ºä¹Ÿæ˜¯åºåˆ—ï¼Œä¸”ä¸ç­‰é•¿ï¼Œå¦‚ä¸‹æ–‡æˆ‘ä»¬æåˆ°çš„encoder-decoderæ¨¡å‹seq2seq</strong></li></ul><p><img src="https://i.loli.net/2021/10/16/EAG3NZawTtbgQm2.png" alt="$T_x$ != $T_y$" style="zoom:50%;" /></p><ul><li><strong>å¯¹åŸåºåˆ—è¿›è¡ŒåŒå‘è¾“å…¥ï¼Œå¯ä»¥è·å–â€œæœªæ¥ä¿¡æ¯â€ã€â€œè¿‡å»ä¿¡æ¯â€çš„Bidirectional (BRNN)</strong></li></ul><p><img src="https://i.loli.net/2021/10/23/gWxoERbcfITZUPa.png" alt="BRNN" style="zoom:60%;" /></p><ul><li><strong>å°†RNNå †å ï¼Œå¯ä»¥å¤„ç†æ›´å¤æ‚é—®é¢˜çš„Deep (DRNN)</strong></li></ul><p><img src="https://i.loli.net/2021/10/23/2Gfw6m4gsLhkSE9.png" alt="DRNN" style="zoom:60%;" /></p><h1 id="LSTM"><a href="#LSTM" class="headerlink" title="LSTM"></a>LSTM</h1><p>RNNç»“æ„ååˆ†ç®€å•ï¼Œä½†å‚æ•°çŸ©é˜µçš„æ¢¯åº¦å­˜åœ¨é•¿æœŸä¾èµ–ï¼Œå½“é¢å¯¹ä¸€ä¸ªé•¿åºåˆ—çš„æ—¶å€™ï¼Œç”±äºæ¢¯åº¦æ¶ˆå¤±/çˆ†ç‚¸ï¼ŒRNNéš¾ä»¥å‘æŒ¥ä½œç”¨ã€‚1997å¹´ï¼ŒHochreiter &amp; Schmidhuberåœ¨â€œLONG SHORT-TERM MEMORYâ€œ<sup id="fnref:2" class="footnote-ref"><a href="#fn:2" rel="footnote"><span class="hint--top hint--rounded" aria-label="Hochreiter S, J. Schmidhuber. Long short-term memory. Neural Computation 9.8(1997):1735-1780.">[2]</span></a></sup>ä¸­æå‡ºä¸€ç§RNNçš„å˜ç§LSTMs(Long Short Term Memory networks)ï¼Œå°è¯•è§£å†³é•¿æœŸä¾èµ–çš„é—®é¢˜ã€‚</p><blockquote><p>è¯¥éƒ¨åˆ†çš„å›¾å‡ºè‡ªChristopher Olahçš„<em>Understanding LSTM Networks</em><sup id="fnref:3" class="footnote-ref"><a href="#fn:3" rel="footnote"><span class="hint--top hint--rounded" aria-label="Christopher Olah.Understanding LSTM Networks">[3]</span></a></sup></p></blockquote><p>åœ¨ä¼ ç»ŸRNNä¸­ï¼Œå¾ªç¯å•å…ƒç»“æ„ç®€å•ï¼Œåªæœ‰ä¸€å±‚ç½‘ç»œå±‚ï¼Œå¦‚å•å±‚tanhå±‚ã€‚</p><p><img src="https://i.loli.net/2021/10/16/liqRmNCbaxvYhdW.png" alt="æ‹¥æœ‰ä¸€å±‚tanhå±‚çš„RNNç¥ç»å…ƒ" style="zoom:100%;" /></p><p>ä¸ºäº†åº”å¯¹é•¿æœŸä¾èµ–ï¼ŒLSTMçš„å¾ªç¯å•å…ƒç»“æ„æ›´ä¸ºå¤æ‚ï¼Œä»–ä¸å†åªæœ‰ä¸€å±‚ï¼Œå–è€Œä»£ä¹‹çš„æ˜¯å¤šå±‚ç¥ç»ç½‘ç»œå±‚ï¼Œä»–ä»¬å„æœ‰ä¸åŒçš„åŠŸèƒ½ï¼Œä¸”ä»¥ç‰¹æ®Šçš„æ–¹å¼äº’ç›¸è¿æ¥åœ¨ä¸€èµ·ã€‚</p><p><img src="https://i.loli.net/2021/10/19/bfDqTH1gYs4Kxdh.png" alt="LSTMsçš„å¾ªç¯å•å…ƒæœ‰æ›´å¤æ‚çš„ç»“æ„" style="zoom:100%;" /></p><p>ä¸Šå›¾ä¸­çš„ä¸€äº›ç¬¦å·å«ä¹‰å¦‚ä¸‹</p><p><img src="https://i.loli.net/2021/10/16/Xp9FeUaErZQDWgA.png" alt="ä¸€äº›ç¬¦å·" style="zoom:100%;" /></p><p>å¸¦ç®­å¤´çš„çº¿ä»£è¡¨å‘é‡çš„æµåŠ¨æ–¹å‘ï¼Œåˆ†å‰ä»£è¡¨å‘é‡æµå‘å¤šä¸ªèŠ‚ç‚¹ï¼Œåˆå¹¶ä»£è¡¨å‘é‡ä»¥æŸç§æ–¹å¼å…±åŒä½œç”¨ï¼›é»„è‰²çŸ©å½¢ä»£è¡¨ç¥ç»ç½‘ç»œå±‚ï¼Œæ‹¥æœ‰ç›¸åº”çš„æƒé‡ã€åç½®ã€æ¿€æ´»å‡½æ•°ï¼›ç²‰è‰²åœ†å½¢ä»£è¡¨ä¸€äº›å‘é‡è¿ç®—ï¼Œå¦‚æŒ‰ä½ä¹˜ç­‰ã€‚</p><p>LSTMsçš„ä¸€ä¸ªå…³é”®è®¾è®¡åœ¨äº$C_t$çš„å¼•å…¥ï¼Œä»–ç»è¿‡â€œé—å¿˜é—¨â€ã€â€œè¾“å…¥é—¨â€çš„ä½œç”¨ï¼Œæœ€ç»ˆåœ¨â€œè¾“å…¥é—¨â€å½±å“æœ€ç»ˆçš„éšçŠ¶æ€$h$ã€‚</p><p><img src="https://i.loli.net/2021/10/16/JTyZBOQGgceUxjI.png" alt="cell state" style="zoom:50%;" /></p><p>å¦ä¸€å…³é”®è®¾è®¡æ˜¯â€é—¨â€çš„å¼•å…¥ï¼Œä»–ç”±sigmoidå±‚ä¸æŒ‰ä½ä¹˜è¿ç®—ç»„æˆã€‚LSTMsæœ‰ä¸‰ä¸ªé—¨ï¼š<strong>é—å¿˜é—¨</strong>ã€<strong>è¾“å…¥é—¨</strong>ã€<strong>è¾“å‡ºé—¨</strong>ï¼Œæˆ‘ä»¬æ¥é€æ­¥äº†è§£ä»–ä»¬æ˜¯å¦‚ä½•èµ·ä½œç”¨çš„ã€‚</p><p><img src="https://i.loli.net/2021/10/16/wu9fQZWOxKSHGa4.png" alt="LSTMsä¸­çš„â€œé—¨â€" style="zoom:80%;" /></p><p>é¦–å…ˆæ˜¯é—å¿˜é—¨ï¼Œç”¨æ¥åˆ¤æ–­å“ªäº›ä¿¡æ¯åº”è¯¥åˆ é™¤ï¼›å…¶ä¸­$\sigma$è¡¨ç¤ºæ¿€æ´»å‡½æ•°$\text{sigmoid}$ï¼Œ$h_{t-1}$ä»£è¡¨ä¸Šä¸€æ—¶åˆ»éšçŠ¶æ€ï¼Œ$x_t$ä»£è¡¨å½“å‰æ—¶åˆ»è¾“å…¥ã€‚</p><p>$h_{t-1}$ã€$x_t$ ç»è¿‡æ¿€æ´»å‡½æ•°åå¾—åˆ°$f_t$ï¼Œ$f_t$ä¸­æ¯ä¸€ä¸ªå€¼çš„èŒƒå›´éƒ½æ˜¯ [0, 1]ã€‚$f_t$ä¸­çš„å€¼è¶Šæ¥è¿‘ 1ï¼Œè¡¨ç¤ºå¯¹åº”ä½ç½®çš„å€¼æ›´åº”è¯¥è®°ä½ï¼›è¶Šæ¥è¿‘ 0ï¼Œè¡¨ç¤ºå¯¹åº”ä½ç½®çš„å€¼æ›´åº”è¯¥å¿˜è®°ã€‚å°† $f_t$ä¸$C_{t-1}$æŒ‰ä½ç›¸ä¹˜ (ElementWise ç›¸ä¹˜) ï¼Œå³å¯ä»¥å¾—åˆ°é—å¿˜æ— ç”¨ä¿¡æ¯ä¹‹åçš„$C_{t-1}^{â€˜}$ã€‚</p><p><img src="https://i.loli.net/2021/10/16/3ixgGztSNAcey4o.png" alt="é—å¿˜é—¨" style="zoom:100%;" /></p><p>å…¶æ¬¡æ˜¯è¾“å…¥é—¨ï¼Œç”¨æ¥åˆ¤æ–­å“ªäº›æ–°çš„ä¿¡æ¯åº”è¯¥è®°ä½ã€‚$h_{t-1}$$ã€x_t$ç»è¿‡ tanh æ¿€æ´»å‡½æ•°å¯ä»¥å¾—åˆ°æ–°çš„è¾“å…¥ä¿¡æ¯$\tilde{C_{t}}$ï¼Œä½†æ˜¯è¿™äº›æ–°ä¿¡æ¯å¹¶ä¸å…¨æ˜¯æœ‰ç”¨çš„ï¼Œå› æ­¤éœ€è¦ä½¿ç”¨$h_{t-1}$å’Œ$x_t$ç»$\text{sigmoid}$å¾—åˆ° $i_t$ï¼Œ$i_t$è¡¨ç¤ºå“ªäº›æ–°ä¿¡æ¯æ˜¯æœ‰ç”¨çš„ã€‚ä¸¤å‘é‡ç›¸ä¹˜åçš„ç»“æœåŠ åˆ°$C_{t-1}^{â€˜}$ä¸­ï¼Œå³å¾—åˆ°$C_t$ã€‚</p><p><img src="https://i.loli.net/2021/10/16/BHkoO9ZEedpXWnF.png" alt="è¾“å…¥é—¨" style="zoom:100%;" /></p><p>ç°åœ¨ï¼Œæˆ‘ä»¬å·²ç»çŸ¥é“å¦‚ä½•æ›´æ–°$C$äº†</p><p><img src="https://i.loli.net/2021/10/16/9wyXEuCjDq6bHPr.png" alt="æ›´æ–°cell state" style="zoom:100%;" /></p><p>æœ€åæ˜¯è¾“å‡ºé—¨ï¼Œç”¨æ¥åˆ¤æ–­åº”è¯¥è¾“å‡ºå“ªäº›ä¿¡æ¯åˆ°$h_t$ä¸­ã€‚$C_t$ç»è¿‡ tanh å‡½æ•°(èŒƒå›´å˜ä¸º[-1, 1])å¾—åˆ°åº”è¯¥è¾“å‡ºçš„ä¿¡æ¯ï¼Œç„¶å$h_{t-1}$å’Œ$x_t$ç»è¿‡ sigmoid å‡½æ•°å¾—åˆ°ä¸€ä¸ªå‘é‡$o_t$ (èŒƒå›´[0, 1]) ï¼Œè¡¨ç¤ºå“ªäº›ä½ç½®çš„è¾“å‡ºåº”è¯¥å»æ‰ï¼Œå“ªäº›åº”è¯¥ä¿ç•™ã€‚ä¸¤å‘é‡ç›¸ä¹˜åçš„ç»“æœå°±æ˜¯æœ€ç»ˆçš„$h_t$ã€‚</p><p><img src="https://i.loli.net/2021/10/16/NVC6uIvJf1Fh7yi.png" alt="è¾“å‡ºé—¨" style="zoom:100%;" /></p><h1 id="Attention-Mechanism"><a href="#Attention-Mechanism" class="headerlink" title="Attention Mechanism"></a>Attention Mechanism</h1><p class="note note-primary">  <b>Encoder-Decoderæ¦‚å¿µ</b></p><p><img src="https://i.loli.net/2021/10/29/1JXnmhqOWL6fbd4.jpg" alt="Seq2Seqæ¨¡å‹ç¤ºä¾‹"></p><p>Encoder-Decoderç»“æ„æ˜¯ä¸ºäº†è§£å†³åºåˆ—é—®é¢˜æå‡ºçš„ï¼Œå®ƒå°†æ•´ä¸ªç½‘ç»œæ¨¡å‹åˆ†ä¸ºEncoderå’ŒDecoderä¸¤éƒ¨åˆ†ï¼šç¼–ç å™¨å°†è¾“å…¥åºåˆ—è½¬åŒ–æˆå®šé•¿çš„ä¸­é—´è¯­ä¹‰å‘é‡ï¼Œè§£ç å™¨å°†ä¹‹å‰ä¸­é—´è¯­ä¹‰å‘é‡è½¬åŒ–ä¸ºè¾“å‡ºåºåˆ—ã€‚</p><p>åŸºäºæ­¤ç»“æ„ï¼Œäº§ç”Ÿäº†è®¸å¤šç»å…¸çš„æ¨¡å‹ã€‚å¦‚2014å¹´Sutskeverç­‰äººåœ¨<em>Sequence to Sequence Learning with Neural Networks</em><sup id="fnref:4" class="footnote-ref"><a href="#fn:4" rel="footnote"><span class="hint--top hint--rounded" aria-label="Sutskever I, Vinyals O, Le Q V. Sequence to Sequence Learning with Neural Networks[C]//Advances in neural information processing systems. 2014: 3104-3112.">[4]</span></a></sup>ä¸€æ–‡ä¸­æå‡ºçš„Seq2Seqæ¨¡å‹ (åŒå¹´ä»½Yoshua Bengioå›¢é˜Ÿçš„<em>Learning Phrase Representation using RNN Encoder-Decoder for Statistical Machine Translatio</em>n<sup id="fnref:5" class="footnote-ref"><a href="#fn:5" rel="footnote"><span class="hint--top hint--rounded" aria-label="Cho K, Van MerriÃ«nboer B, Gulcehre C, et al. Learning phrase representations using RNN encoder-decoder for statistical machine translation[J]. arXiv preprint arXiv:1406.1078, 2014.">[5]</span></a></sup>ä¹Ÿç‹¬ç«‹çš„é˜è¿°äº†Seq2Seqçš„ä¸»è¦æ€æƒ³) ï¼ŒGoogle åœ¨2017å¹´æå‡ºçš„Transformeræ¨¡å‹ç­‰ã€‚</p><blockquote><p>è¯¥éƒ¨åˆ†å‚è€ƒè‡ª<em>Natural Language Processing with Deep Learning</em><sup id="fnref:6" class="footnote-ref"><a href="#fn:6" rel="footnote"><span class="hint--top hint--rounded" aria-label="Guillaume Genthial, Lucas Liu, Barak Oshri, Kushal Ranjan. CS224n: Natural Language Processing with Deep Learning , 2017.">[6]</span></a></sup>åŠMurat Karakayaçš„SEQ2SEQ LEARNING<sup id="fnref:7" class="footnote-ref"><a href="#fn:7" rel="footnote"><span class="hint--top hint--rounded" aria-label="Murat Karakaya.SEQ2SEQ LEARNING. 2020.">[7]</span></a></sup></p></blockquote><p>æ¥ä¸‹æ¥ä»¥Seq2Seqæ¨¡å‹ä¸ºä¾‹ï¼Œç®€å•ä»‹ç»ä¸€ä¸‹Encoderä¸Decoderæ˜¯å¦‚ä½•å·¥ä½œçš„ã€‚</p><p><img src="https://i.loli.net/2021/10/16/xGOZuyrFn37jMUq.png" alt="ç¼–ç å™¨" style="zoom:60%;" /></p><p>Encoderéœ€è¦æ¥æ”¶è¾“å…¥åºåˆ—ï¼Œäº§ç”Ÿä¸­é—´è¯­ä¹‰å‘é‡$\text{Context vector}$ (ç®€è®°ä¸º$C$)ï¼Œä½†æ˜¯å°†ä¸€ä¸ªä»»æ„é•¿åº¦çš„è¾“å…¥åºåˆ—è½¬æ¢ä¸ºå›ºå®šé•¿åº¦çš„$C$å¯¹äºå•å±‚æ¶æ„æ¥è¯´å¤ªå›°éš¾äº†ï¼Œé€šå¸¸æˆ‘ä»¬ä¼šä½¿ç”¨å¤šå±‚ (DRNN)ï¼Œå›¾ä¸­å±•ç¤ºçš„æ˜¯ä¸‰å±‚LSTMsæ¶æ„ï¼Œæœ€åæˆ‘ä»¬ä½¿ç”¨Encoderçš„å…¨éƒ¨éšçŠ¶æ€ä½œä¸º$C$ã€‚</p><p>æ­¤å¤–ï¼ŒSeq2Seqé€šå¸¸ä¼šé€†åºè¾“å…¥åŸåºåˆ— (æ³¨æ„å›¾ä¸­Timestepsçš„ç®­å¤´æŒ‡å‘) ï¼Œè¿™æ ·ä¸€æ¥ï¼ŒEncoderæœ€åçš„è¾“å‡ºå°†ä¼šæ˜¯åŸåºåˆ—çš„é¦–ä¸ªå…ƒç´ ï¼ŒD ecoderåœ¨è§£ç è¿‡ç¨‹ä¸­é‡åˆ°çš„é¦–ä¸ªè¾“å…¥æ­£å¥½å¯¹åº”åŸåºåˆ—çš„é¦–å…ƒç´ ã€‚è¿™å¯¹æœ€ç»ˆç»“æœæ˜¯æœ‰åˆ©çš„ï¼Œå¦‚æ–‡æœ¬ä»»åŠ¡ï¼Œå½“Decoderæ­£ç¡®ç¿»è¯‘äº†å‰é¢ä¸€éƒ¨åˆ†å•è¯ï¼Œå°†å¾ˆå®¹æ˜“çŒœå‡ºå®Œæ•´çš„å¥å­ã€‚</p><p><img src="https://i.loli.net/2021/10/16/YQFLm86izodvkht.png" alt="è§£ç å™¨" style="zoom:60%;" /></p><p>DecoderåŒæ ·æ˜¯ä¸€ä¸ªLSTMå¤šå±‚ç½‘ç»œï¼Œä½†ç»“æ„æ›´å¤æ‚ä¸€äº›ï¼Œ<strong>æ¯ä¸€å±‚çš„è¾“å‡ºå°†ä½œä¸ºä¸‹ä¸€å±‚çš„è¾“å…¥</strong>ã€‚ä½¿ç”¨Encoderä¸­å¾—åˆ°çš„ç›¸å…³ä¿¡æ¯åˆå§‹åŒ–Decoderï¼Œå¹¶è¾“å…¥ä¸€ä¸ªå¼€å§‹ä¿¡å·(åœ¨æ–‡æœ¬ä»»åŠ¡ä¸­ï¼Œé€šå¸¸ä¸º<code>&lt;EOS&gt;</code>)ï¼Œæœ€ç»ˆå¾—åˆ°è¾“å‡ºåºåˆ—ï¼Œè¾“å…¥åºåˆ—å’Œè¾“å‡ºåºåˆ—é•¿åº¦ä¸è¦æ±‚ç›¸åŒã€‚</p><p>å¾—åˆ°è¾“å‡ºåºåˆ—åï¼Œæˆ‘ä»¬å¯ä»¥å®šä¹‰$\text{loss}$ï¼Œä½¿ç”¨æ¢¯åº¦ä¸‹é™å’Œåå‘ä¼ æ’­æœ€å°åŒ–$\text{loss}$ï¼Œè®­ç»ƒæˆ‘ä»¬çš„ã€‚Seq2Seqæ¨¡å‹ã€‚</p><p class="note note-primary">  <b>Attention-based Models</b></p><p>ä¸€ä¸ªå¥å­ä¸­ä¸åŒçš„å•è¯ï¼Œç»™äºˆçš„å…³æ³¨åº¦æ˜¯ä¸åŒçš„ï¼Œå¦‚â€œthe ball is on the fieldâ€ï¼Œä½ ä¼šæ›´å…³æ³¨â€ball,â€ â€œon,â€ å’Œâ€field,â€ã€‚å› æ­¤ï¼Œ Bahdanauç­‰äººæå‡ºäº†ä¸€ç§è§£å†³æ–¹æ¡ˆ<sup id="fnref:8" class="footnote-ref"><a href="#fn:8" rel="footnote"><span class="hint--top hint--rounded" aria-label="Bahdanau D, Cho K, Bengio Y. Bahdanau et al., 2014. Neural Machine Translation by Jointly Learning to Align and Translate[J]. arXiv preprint arXiv:1409.0473, 2014.">[8]</span></a></sup>ï¼Œå…¶ä¸­è®¾è®¡çš„å…³é”®ä¸€ç‚¹ä¾¿æ˜¯Attentionæœºåˆ¶ã€‚</p><blockquote><p>Minh-Thang Luongç­‰äººçš„Effective Approaches to Attention-based Neural Machine Translationå¯¹Attention Mechanismåšäº†å¾ˆå¥½çš„æ€»ç»“ï¼Œä»¥ä¸‹å†…å®¹å‚è€ƒäºæ­¤<sup id="fnref:9" class="footnote-ref"><a href="#fn:9" rel="footnote"><span class="hint--top hint--rounded" aria-label="Luong M T,  Pham H,  Manning C D. Effective Approaches to Attention-based Neural Machine Translation[J]. Computer ence, 2015.">[9]</span></a></sup></p></blockquote><p>Attention Mechanismå¯åˆ†ä¸ºï¼šå…³æ³¨æ‰€æœ‰æºè¯çš„å…¨å±€æ–¹æ³• (global) å’Œåªå…³æ³¨æºè¯å­é›†çš„å±€éƒ¨æ–¹æ³• (local)ï¼Œä¸¤ç§æ–¹æ³•çš„åŸºæœ¬æ€æƒ³éƒ½æ˜¯æ¨¡æ‹ŸAttentionæœºåˆ¶ï¼Œè·å¾—å½“å‰ $t$ æ—¶åˆ»å¯¹é½ (ä¿®æ­£) åçš„$\text{Context vector}$ï¼Œå³ $c_t$ ï¼Œä½¿ç”¨è¯¥$c_t$è®¡ç®—è¾“å‡ºï¼ŒéšçŠ¶æ€ç­‰ã€‚</p><p>è¿™é‡Œåªå¯¹æ¥ä¸‹æ¥Ptr Netå¤ç°å°†è¦ä½¿ç”¨çš„globalæ–¹æ³•åšä¸€ä¸ªç®€è¦ä»‹ç»ã€‚</p><p><img src="https://i.loli.net/2021/10/31/uzMrwhfYixAtZdb.png" alt="Global attentional model" style="zoom:40%;" /></p><p>ä¸€ä¸ªSeq2Seqæ¨¡å‹ï¼Œåˆ†ä¸ºä¸¤éƒ¨åˆ†ï¼šencoder (è“) å’Œ decoder (çº¢) ã€‚Attention-based Modelå¸Œæœ›åœ¨æ¯ä¸€ä¸ªè¾“å‡ºæ—¶åˆ»$j$ï¼Œè·å¾—ä¸€ä¸ªå¯¹åº”çš„scoreï¼Œè¯„ä¼°Encoder $i$ ä½ç½®çš„è¾“å…¥ä¸æ­¤åˆ»çš„ç›¸å…³ç¨‹åº¦ï¼ŒåŸºäºæ­¤å¯¹åŸæœ¬çš„ä¸­é—´è¯­ä¹‰å‘é‡è¿›è¡Œä¸€ä¸ªä¿®æ­£ã€‚é€šä¿—ç‚¹è¯´ï¼ŒAttention Layerå°†encoderçš„éšçŠ¶æ€æŒ‰ç…§ä¸€å®šæƒé‡åŠ å’Œä¹‹åæ‹¼æ¥åˆ°decoderçš„éšçŠ¶æ€ä¸Šï¼Œä»¥æ­¤ä½œä¸ºé¢å¤–ä¿¡æ¯ï¼Œèµ·åˆ°â€œè½¯å¯¹é½â€çš„ä½œç”¨ï¼Œå¹¶ä¸”æé«˜äº†æ•´ä¸ªæ¨¡å‹çš„é¢„æµ‹å‡†ç¡®åº¦ã€‚</p><p>ç®€å•ä¸¾ä¸ªä¾‹å­ï¼Œåœ¨æœºå™¨ç¿»è¯‘ä¸­ä¸€ç›´å­˜åœ¨å¯¹é½çš„é—®é¢˜ï¼Œä¹Ÿå°±æ˜¯è¯´æºè¯­è¨€çš„æŸä¸ªå•è¯åº”è¯¥å’Œç›®æ ‡è¯­è¨€çš„å“ªä¸ªå•è¯å¯¹åº”ï¼Œå¦‚â€œWho are youâ€å¯¹åº”â€œä½ æ˜¯è°â€ï¼Œå¦‚æœæˆ‘ä»¬ç®€å•åœ°æŒ‰ç…§é¡ºåºè¿›è¡ŒåŒ¹é…çš„è¯ä¼šå‘ç°å•è¯çš„è¯­ä¹‰å¹¶ä¸å¯¹åº”ï¼Œæ˜¾ç„¶â€œwhoâ€ä¸èƒ½è¢«ç¿»è¯‘ä¸ºâ€œä½ â€ã€‚</p><p>è€ŒAttentionæœºåˆ¶éå¸¸å¥½åœ°è§£å†³äº†è¿™ä¸ªé—®é¢˜ï¼Œå¦‚å‰æ‰€è¿°ï¼ŒAttentionä¼šç»™è¾“å…¥åºåˆ—çš„æ¯ä¸€ä¸ªå…ƒç´ åˆ†é…ä¸€ä¸ªæƒé‡ï¼Œå¦‚åœ¨é¢„æµ‹â€œä½ â€è¿™ä¸ªå­—çš„æ—¶å€™è¾“å…¥åºåˆ—ä¸­çš„â€œyouâ€è¿™ä¸ªè¯çš„æƒé‡æœ€å¤§ï¼Œè¿™æ ·æ¨¡å‹å°±çŸ¥é“â€œä½ â€æ˜¯å’Œâ€œyouâ€å¯¹åº”çš„ï¼Œä»è€Œå®ç°äº†è½¯å¯¹é½ã€‚</p><p>å…·ä½“è®¡ç®—è¿‡ç¨‹å¦‚ä¸‹ï¼š</p><p>è®¾ç¼–ç å™¨éšè—å±‚æ‰€æœ‰éšçŠ¶æ€ä¸º $\bar{h}_s$ ï¼Œå½“å‰ç¬¬ $j$ ä¸ªè¾“å‡ºæ—¶åˆ»ï¼Œdecoderå•å…ƒéšçŠ¶æ€ä¸º $h_t$ï¼Œscoreçš„è®¡ç®—æœ‰ä¸‰ç§æ–¹å¼å¯é€‰æ‹©ï¼š</p><script type="math/tex; mode=display">score(h_t, \bar{h}_s) = \begin{cases}  h_t^\top \bar{h}_s & \text{ dot } \\  h_t^\top W_a \bar{h}_s &   \text{ general }\\  v_a^\top \text{ tanh }(W_a[h_t;\bar{h}_s])& \text{ concat }\end{cases}</script><p>æ¥ä¸‹æ¥æ ¹æ®scoreè®¡ç®—æˆ‘ä»¬å½“å‰æ—¶åˆ»çš„çš„å¯¹é½å‘é‡ $a_t(s)$ï¼Œä»–çš„é•¿åº¦éšè¾“å…¥åºåˆ—é•¿åº¦å˜åŒ–è€Œå˜åŒ–ï¼š</p><script type="math/tex; mode=display">\alpha _{t}(s) = \frac{exp(score(h_t, \bar{h}_s))}{\sum_{s'}exp(score(h_t, \bar{h}_{s'})) }</script><p>æœ€åï¼Œæ ¹æ®åŸ$\text{Context vector}$ (å³Encoderæ‰€æœ‰éšçŠ¶æ€$\bar{h}_s$)ï¼Œ$a_t(s)$è·å¾—å¯¹é½åçš„$c_t$ï¼Œ</p><script type="math/tex; mode=display">c_t = W_a\bar{h}_s  a_t(s)</script><p>Decoderæœ€ç»ˆçš„éšçŠ¶æ€ä¾æ®$c_t$äº§ç”Ÿï¼Œ</p><script type="math/tex; mode=display">\tilde{h}_t = \text{tanh}(W_c[c_t;h_t])</script><h1 id="Pointer-Network"><a href="#Pointer-Network" class="headerlink" title="Pointer Network"></a>Pointer Network</h1><p>ä¸ºäº†è§£å†³è¾“å‡ºåºåˆ—é•¿åº¦ä¸å›ºå®šï¼Œéšè¾“å…¥åºåˆ—å˜åŒ–è€Œå˜åŒ–çš„é—®é¢˜ (å¦‚ç»„åˆä¼˜åŒ–é—®é¢˜) ï¼Œ2015å¹´ï¼ŒVinyals ç­‰äººå¯¹Seq2Seqä¸­çš„Attentionæœºåˆ¶è¿›è¡Œäº†æ”¹è¿›ï¼Œæå‡ºäº†æŒ‡é’ˆç½‘ç»œæ¨¡å‹ (Pointer Network, Ptr-Net)<sup id="fnref:10" class="footnote-ref"><a href="#fn:10" rel="footnote"><span class="hint--top hint--rounded" aria-label="Vinyals O, Fortunato M, Jaitly N. Pointer networks[J]. arXiv preprint arXiv:1506.03134, 201">[10]</span></a></sup>ï¼Œå¹¶å±•ç¤ºäº†å¦‚ä½•ä½¿ç”¨Ptr-Netæ±‚å¾—ä¸‰ç§å‡ ä½•é—®é¢˜ (å‡¸åŒ…é—®é¢˜ï¼Œè®¡ç®—Delaunayä¸‰è§’å½¢ï¼ŒTSPé—®é¢˜) çš„è¿‘ä¼¼è§£ï¼Œæ–‡ç« ä¸­è¿˜è¡¨æ˜ï¼ŒPtr-Neté¢å¯¹æµ‹è¯•é›†çš„è¡¨ç°å¹¶ä¸å±€é™è®­ç»ƒæ¨¡å‹ï¼Œæ‹¥æœ‰è‰¯å¥½çš„æ³›åŒ–èƒ½åŠ›ã€‚</p><p><img src="https://i.loli.net/2021/10/16/uHp6LMWsiVP15K4.png" alt="ä»¥å‡¸åŒ…é—®é¢˜ä¸ºä¾‹ï¼ŒSeq2Seqä¸Ptr-Netçš„åŒºåˆ«" style="zoom:100%;" /></p><p>Ptr-Netçš„ä¸»è¦æ”¹è¿›åœ¨äºç®€åŒ–äº†Attention Mechanismï¼›å›é¡¾ä¸Šæ–‡<code>Attention-based Models</code>ä¸€èŠ‚çš„è®¡ç®—è¿‡ç¨‹ï¼ŒPtr-Netç›´æ¥å°†å¯¹é½å‘é‡$\alpha _{t}(s)$ä½œä¸ºæŒ‡å‘è¾“å…¥åºåˆ—çš„æ¦‚ç‡æ•°ç»„ï¼Œè®¤ä¸º$\alpha _{t}(s)$æœ€å¤§å€¼å¯¹åº”ä½ç½®å³ä¸ºå½“å‰çš„æŒ‡é’ˆæŒ‡å‘ï¼›åœ¨TSPé—®é¢˜ä¸­ï¼Œæˆ‘ä»¬å°†åŸå¸‚åæ ‡ä½œä¸ºè¾“å…¥åºåˆ—ã€æœ€ä¼˜è§£ä½œä¸ºè¾“å‡ºåºåˆ—å¯¹æ¨¡å‹è¿›è¡Œè®­ç»ƒï¼ŒæŒ‡é’ˆæŒ‡å‘å³ä¸ºå½“å‰æ—¶åˆ»åº”å½“è®¿é—®çš„åŸå¸‚ï¼ŒShir Gurçš„githubé¡¹ç›®<a href="https://github.com/shirgur/PointerNet">PointerNet</a>å¯¹PtrNetåœ¨è¯¥æ–¹é¢çš„åº”ç”¨åšäº†å¾ˆå¥½çš„å¤ç°ã€‚</p><h1 id="References"><a href="#References" class="headerlink" title="References"></a>References</h1><section class="footnotes"><div class="footnote-list"><ol><li><span id="fn:1" class="footnote-text"><span><a href="https://twitter.com/afshinea">Afshine Amidi</a>,<a href="https://twitter.com/shervinea">Shervine Amidi</a>. Recurrent Neural Networks cheatsheet<a href="#fnref:1" rev="footnote" class="footnote-backref"> â†©</a></span></span></li><li><span id="fn:2" class="footnote-text"><span>Hochreiter S, J. Schmidhuber. <a href="https://www.bioinf.jku.at/publications/older/2604.pdf">Long short-term memory</a>. Neural Computation 9.8(1997):1735-1780.<a href="#fnref:2" rev="footnote" class="footnote-backref"> â†©</a></span></span></li><li><span id="fn:3" class="footnote-text"><span>Christopher Olah.<a href="http://colah.github.io/posts/2015-08-Understanding-LSTMs/">Understanding LSTM Networks</a><a href="#fnref:3" rev="footnote" class="footnote-backref"> â†©</a></span></span></li><li><span id="fn:4" class="footnote-text"><span>Sutskever I, Vinyals O, Le Q V. <a href="https://arxiv.org/abs/1409.3215">Sequence to Sequence Learning with Neural Networks</a>[C]//Advances in neural information processing systems. 2014: 3104-3112.<a href="#fnref:4" rev="footnote" class="footnote-backref"> â†©</a></span></span></li><li><span id="fn:5" class="footnote-text"><span>Cho K, Van MerriÃ«nboer B, Gulcehre C, et al. <a href="https://arxiv.org/abs/1406.1078">Learning phrase representations using RNN encoder-decoder for statistical machine translation</a>[J]. arXiv preprint arXiv:1406.1078, 2014.<a href="#fnref:5" rev="footnote" class="footnote-backref"> â†©</a></span></span></li><li><span id="fn:6" class="footnote-text"><span>Guillaume Genthial, Lucas Liu, Barak Oshri, Kushal Ranjan. <a href="https://web.stanford.edu/class/archive/cs/cs224n/cs224n.1174/lecture_notes/cs224n-2017-notes6.pdf">CS224n: Natural Language Processing with Deep Learning </a>, 2017.<a href="#fnref:6" rev="footnote" class="footnote-backref"> â†©</a></span></span></li><li><span id="fn:7" class="footnote-text"><span>Murat Karakaya.<a href="https://medium.com/deep-learning-with-keras/seq2seq-part-f-encoder-decoder-with-bahdanau-luong-attention-mechanism-ca619e240c55">SEQ2SEQ LEARNING</a>. 2020.<a href="#fnref:7" rev="footnote" class="footnote-backref"> â†©</a></span></span></li><li><span id="fn:8" class="footnote-text"><span>Bahdanau D, Cho K, Bengio Y. Bahdanau et al., 2014. <a href="https://arxiv.org/abs/1409.0473">Neural Machine Translation by Jointly Learning to Align and Translate</a>[J]. arXiv preprint arXiv:1409.0473, 2014.<a href="#fnref:8" rev="footnote" class="footnote-backref"> â†©</a></span></span></li><li><span id="fn:9" class="footnote-text"><span>Luong M T,  Pham H,  Manning C D. <a href="https://arxiv.org/pdf/1508.04025.pdf">Effective Approaches to Attention-based Neural Machine Translation</a>[J]. Computer ence, 2015.<a href="#fnref:9" rev="footnote" class="footnote-backref"> â†©</a></span></span></li><li><span id="fn:10" class="footnote-text"><span>Vinyals O, Fortunato M, Jaitly N. <a href="https://arxiv.org/pdf/1506.03134.pdf">Pointer networks</a>[J]. arXiv preprint arXiv:1506.03134, 201<a href="#fnref:10" rev="footnote" class="footnote-backref"> â†©</a></span></span></li></ol></div></section>]]></content>
    
    
    <categories>
      
      <category>æœºå™¨å­¦ä¹ </category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>è‹±è¯­è¯­æ³•</title>
    <link href="/2021/09/05/%E8%8B%B1%E8%AF%AD%E8%AF%AD%E6%B3%95/"/>
    <url>/2021/09/05/%E8%8B%B1%E8%AF%AD%E8%AF%AD%E6%B3%95/</url>
    
    <content type="html"><![CDATA[<h1 id="å¥å­çš„ç»„æˆ"><a href="#å¥å­çš„ç»„æˆ" class="headerlink" title="å¥å­çš„ç»„æˆ"></a>å¥å­çš„ç»„æˆ</h1><p><strong>å¥å­ = ä¸»å¹² + ä¿®é¥°éƒ¨åˆ†</strong></p><p>å…¶ä¸­ï¼Œä¸»å¹²å°±æ˜¯è‹±è¯­ä¸­äº”å¤§å¥å‹ï¼ˆç®€å•å¥)ã€‚</p><p class="note note-primary">  <b>äº”å¤§å¥å‹</b></p> <pre><code class=" mermaid">graph LRç®€å•å¥ --&gt; ä¸»è°“ä¸»è°“ --&gt; id1[&quot;we meet&quot;]ç®€å•å¥ --&gt; ä¸»è°“å®¾ä¸»è°“å®¾ --&gt; id2[&quot;I like it&quot;]ç®€å•å¥ --&gt; ä¸»è°“å®¾å®¾ä¸»è°“å®¾å®¾ --&gt; id3[&quot;I give you my heart&quot;]ç®€å•å¥ --&gt; ä¸»è°“å®¾è¡¥ä¸»è°“å®¾è¡¥ --&gt; id4[&quot;You make me happy&quot;]ç®€å•å¥ --&gt; ä¸»ç³»è¡¨ä¸»ç³»è¡¨ --&gt; id5[&quot;You are my destiny&quot;]</code></pre><ol><li><p>ä¸»è°“(ä¸€ä¸ªå¥å­æœ€ä¸å¯æˆ–ç¼ºçš„ä¸¤ä¸ªéƒ¨åˆ†ï¼‰ï¼šYou jumpï¼›I jump.</p></li><li><p>ä¸»è°“å®¾ï¼ˆå®¾è¯­æ˜¯ä¸»è¯­åŠ¨ä½œçš„å¯¹è±¡)ï¼šI love him.</p></li><li><p>ä¸»è°“å®¾ï¼ˆäººï¼‰å®¾ï¼ˆç‰©ï¼‰ï¼šplease do me(äººï¼‰ a favorï¼ˆç‰©ï¼‰.ï¼ˆæ£€éªŒæ˜¯åŒå®¾è¯­çš„åŸåˆ™ï¼šä¸¤ä¸ªå®¾è¯­å¯ä»¥è°ƒæ¢ä½ç½®ï¼Œå¢åŠ ç›¸åº”ä»‹è¯ to/for please do a favor for me ï¼‰</p></li><li><p>ä¸»è°“å®¾è¡¥ï¼ˆè¡¥å……è¯´æ˜å®¾è¯­ï¼‰ï¼šI found the book easy(the book æ˜¯found çš„å¯¹è±¡ï¼Œeasyæ˜¯ç”¨æ¥ä¿®é¥°the book çš„)ï¼ˆæ£€éªŒæ˜¯å®¾è¡¥çš„åŸåˆ™ï¼šå®¾è¯­å’Œè¡¥è¯­ä¹‹é—´åŠ ä¸€ä¸ªç³»åŠ¨è¯ï¼Œå¯ä»¥æ„æˆè¯­ä¹‰é€šé¡ºçš„å¥å­ the book is easyï¼‰</p></li><li><p>ä¸»ç³»è¡¨ï¼ˆè¯´æ˜ä¸»è¯­çš„çŠ¶æ€ç‰¹ç‚¹ï¼‰ï¼šShe is pretty.</p></li></ol><p class="note note-primary">  <b>å¥å­ä¸­çš„ä¿®é¥°æˆåˆ†</b></p> <p>äº”ç§åŸºæœ¬å¥å‹ï¼Œæ˜¯è§£è¯»è‹±è¯­å¥å­å’Œæ„é€ è‹±è¯­å¥å­çš„åŸºç¡€ï¼Œä»»ä½•é«˜é˜¶å¤æ‚çš„å¥å­éƒ½æ˜¯ä»è¿™äº”ç§ç®€å•å¥å‹é€šè¿‡æ‰©å¤§ï¼Œç»„åˆï¼Œçœç•¥æˆ–å€’è£…ç­‰å˜åŒ–è€Œæ¥ã€‚</p><p>ä¿®é¥°æˆåˆ†åŒ…æ‹¬<strong>å®šè¯­</strong>å’Œ<strong>çŠ¶è¯­</strong>ï¼Œå®šè¯­è´Ÿè´£ä¿®é¥°é™å®šåè¯ï¼ŒçŠ¶è¯­è´Ÿè´£æŠŠå¥å­å£®å¤§ã€‚</p><pre><code class=" mermaid">graph LRå®šè¯­-ä¿®é¥°é™å®šåè¯ --&gt;  å½¢å®¹è¯å®šè¯­-ä¿®é¥°é™å®šåè¯ --&gt;  å®šè¯­ä»å¥ --&gt; å¼•å¯¼è¯+é™ˆè¿°å¥å®šè¯­-ä¿®é¥°é™å®šåè¯ --&gt;  ä»‹è¯çŸ­è¯­ --&gt; ä»‹è¯+åè¯å®šè¯­-ä¿®é¥°é™å®šåè¯ --&gt;  éè°“è¯­åŠ¨è¯ éè°“è¯­åŠ¨è¯ --&gt; id1[&quot;to do&quot;]éè°“è¯­åŠ¨è¯ --&gt; id2[&quot;doing&quot;]éè°“è¯­åŠ¨è¯ --&gt; id3[done]</code></pre><ol><li><p><strong>å½¢å®¹è¯ï¼š</strong>She is a <strong>lovely</strong> girl. å¥¹æ˜¯ä¸€ä½å¯çˆ±çš„å¥³å­©ã€‚</p></li><li><p><strong>å®šè¯­ä»å¥ï¼š</strong>New York is the place <strong>that he would like to visit</strong>. çº½çº¦æ˜¯ä»–æƒ³å»æ¸¸è§ˆçš„åœ°æ–¹ã€‚</p></li><li><p><strong>ä»‹è¯çŸ­è¯­</strong>ï¼šThe girl <strong>in red</strong> is my sister. ç©¿çº¢è‰²é‚£ä¸ªå¥³å­©æ˜¯æˆ‘çš„å¦¹å¦¹ã€‚</p></li><li><p><strong>éè°“è¯­åŠ¨è¯</strong>ï¼šthe girl <strong>standing</strong> there is my sister.</p><p>â€‹                       the girl <strong>who is standing</strong> there is my sister. ç«™åœ¨é‚£çš„å¥³å­©æ˜¯æˆ‘çš„å¦¹å¦¹ã€‚</p><p>â€‹                       the building <strong>completed</strong> yesterdayâ€¦=the building <strong>that was completed</strong> yesterdayâ€¦ æ˜¨å¤©ç«£å·¥çš„æ¥¼æˆ¿â€¦</p><p>â€‹                       I have something <strong>to say</strong>.</p></li></ol><p>ä»ä¸Šé¢éè°“è¯­ä¾‹å¥å¯ä»¥çœ‹åˆ°<strong>éè°“è¯­åŠ¨è¯å¯ä»¥å˜æˆå®šè¯­ä»å¥</strong></p><pre><code class=" mermaid">graph LRçŠ¶è¯­-æ‰©å¤§å¥å­ --&gt; åè¯çŠ¶è¯­-æ‰©å¤§å¥å­ --&gt; å‰¯è¯çŠ¶è¯­-æ‰©å¤§å¥å­ --&gt; çŠ¶è¯­ä»å¥ --&gt; å¼•å¯¼è¯+é™ˆè¿°å¥çŠ¶è¯­-æ‰©å¤§å¥å­ --&gt;  ä»‹è¯çŸ­è¯­ --&gt; ä»‹è¯+åè¯çŠ¶è¯­-æ‰©å¤§å¥å­ --&gt; éè°“è¯­åŠ¨è¯éè°“è¯­åŠ¨è¯ --&gt; id1[&quot;to do&quot;]éè°“è¯­åŠ¨è¯ --&gt; id2[&quot;doing&quot;]éè°“è¯­åŠ¨è¯ --&gt; id3[done]</code></pre><ol><li><p><strong>åè¯</strong>:  come <strong>this way.</strong> </p></li><li><p><strong>å‰¯è¯</strong>: speak <strong>politely.</strong></p></li><li><p><strong>ä»‹è¯çŸ­è¯­</strong>ï¼šCan you say it <strong>in English.</strong></p></li><li><p><strong>çŠ¶è¯­ä»å¥</strong>ï¼šI enjoyed myself <strong>when I visited my friends in Shanghai last year.</strong></p></li><li><p><strong>éè°“è¯­åŠ¨è¯ï¼šHaving finished the homework,</strong> I went home.</p><p>â€‹                       <strong>Given more time</strong>, I could write the essay better.</p><p>â€‹                       <strong>To give the teacher a good impression</strong>, I decided  to help her.</p></li></ol><h1 id="Present-and-past"><a href="#Present-and-past" class="headerlink" title="Present and past"></a>Present and past</h1><h2 id="Unit-1-Present-continuous-I-am-doing"><a href="#Unit-1-Present-continuous-I-am-doing" class="headerlink" title="Unit 1: Present continuous (I am doing)"></a>Unit 1: Present continuous (I am doing)</h2><p><strong>I am</strong>=<strong>doing</strong> something =  Iâ€™m in the middle of doing it; Iâ€™ve started doing it and I havenâ€™t finished.</p><ul><li><p>I am eating food.</p></li><li><p>I am taking a corporate training course.</p></li></ul><hr><p>Sometimes the action is not happening at the time of speaking. For example: </p><ul><li><p>Steve is talking to a friend on the phone. He says:</p></li><li><p>Iâ€™m <strong>reading</strong> a really good book at the moment. itâ€™s about a man who â€¦</p></li></ul><p>Steve is not reading the book at the time of speaking.He means that he has started it, but has not finished it yet. He is in the middle of reading it.</p><hr><p>You can use the present continuous with <strong>today</strong> <strong>/</strong> <strong>this week</strong> <strong>/</strong> <strong>this year</strong> etc. (periods around now)</p><ul><li><p>Youâ€™re <strong>working hard today. </strong>(<em>not</em> You work hard today)</p></li><li><p>The company I work for <strong>isnâ€™t doing</strong> so well <strong>this year.</strong></p></li></ul><hr><p>We use the present continuous when we talk about changes happening around now, especially with these verbs:</p><p><strong><code>get</code>, <code>change</code>, <code>become</code>, <code>increase</code>, <code>rise</code>, <code>fall</code>, <code>grow</code>, <code>improve</code>, <code>begin</code>, <code>start</code></strong></p><ul><li><p><strong>Is</strong> your English <strong>getting</strong> better?( <em>not</em> Does your English get better)</p></li><li><p>The world <strong>is changing</strong>.</p></li><li><p>The population of the world <strong>is</strong> <strong>increasing</strong> very fast. (<em>not</em> increases)</p></li><li><p>At first I didnâ€™t like my job, but Iâ€™m <strong>beginning</strong> to enj oy it now. <em>(not</em> I begin)</p></li></ul><hr><h2 id="Unit-2-Present-simple-I-do"><a href="#Unit-2-Present-simple-I-do" class="headerlink" title="Unit 2: Present simple (I do)"></a>Unit 2: Present simple (I do)</h2><p>We use the present simple to talk about things in general. We use it to say that something happens all the time or repeatedly/ or that something is true in general.</p><ul><li><p>Nurses <strong>look</strong> after patients in hospitals. </p></li><li><p>I usually <strong>go</strong> away at weekends.</p></li><li><p>The cafe <strong>opens</strong> at 7.30 in the morning.</p></li></ul><hr><p>We use <strong>do/does</strong> to make questions and negative sentences (<strong>auxiliary verb</strong>).</p><ul><li><p><strong>do</strong> I/we/you/they <strong>work?</strong> </p></li><li><p>he/she/it <strong>doesnâ€™t</strong> <strong>do</strong></p></li><li><p>I come from Canada. Where <strong>do</strong> you <strong>come</strong> from?</p></li><li><p>I <strong>donâ€™t go</strong> away very often.</p></li><li><p>What <strong>does</strong> this word <strong>mean?</strong> (<em>not</em> What means this word?) </p></li></ul><p>In the following examples, <strong>do</strong> is also the <strong>main verb</strong> (do you <strong>do</strong>/doesnâ€™t <strong>do</strong> etc.): </p><ul><li>â€˜What <strong>do</strong> you <strong>do</strong>?â€™   â€˜I work in a shop.â€™</li></ul><hr><p>We use the present simple to say how often we do things:</p><ul><li><p>I <strong>get</strong> up at 8 oâ€™clock <strong>every morning.</strong></p></li><li><p><strong>How often</strong> do you <strong>go</strong> to the dentist?</p></li><li><p>Julie <strong>doesnâ€™t drink</strong> tea <strong>very often.</strong></p></li><li><p>Robert usually <strong>goes</strong> away <strong>two or three times a year.</strong></p></li></ul><hr><p><strong>I promise</strong>/<strong>I apologise</strong> etc.</p><p>Sometimes we do things by saying something. For example, when you <em>promise</em> to do something, you can say â€˜I <strong>promise â€¦</strong>â€˜; when you <em>suggest</em> something, you can say â€˜I <strong>suggest â€¦</strong>â€˜, In the same way we say: <strong>I apologise</strong> .. . / <strong>I advise</strong> â€¦ / <strong>I insist</strong> â€¦ / <strong>I agree</strong> â€¦ / <strong>I refuse</strong> â€¦ etc.</p><ul><li><p>I <strong>promise</strong> I wonâ€™t be late. <em>(not</em> Iâ€™m promising)</p></li><li><p>â€˜What do you <strong>suggest</strong> I do?â€™ â€˜I <strong>suggest</strong> that you â€¦ â€˜</p></li></ul><h2 id="Unit-3-Present-continuous-and-present-simple-1-I-am-doing-and-I-do"><a href="#Unit-3-Present-continuous-and-present-simple-1-I-am-doing-and-I-do" class="headerlink" title="Unit 3: Present continuous and present simple 1 (I am doing and I do)"></a>Unit 3: Present continuous and present simple 1 (I am doing and I do)</h2><p>Compare:</p><div class="table-container"><table><thead><tr><th>Present continuous(I am doing)</th><th>Present Simple(I do)</th></tr></thead><tbody><tr><td>now</td><td>paste â¬…ï¸ now â¡ï¸ future</td></tr><tr><td><strong>We use the continuous for things happening at or around the time of speaking. The action is not complete</strong>.  <em>Example</em>: The water <strong>is boiling</strong>, Can you turn it off ?</td><td><strong>We use the simple for things in general or things that happen repeatedly.</strong>  <em>Example</em>: Water <strong>boils</strong> at 100 degrees Celsius.</td></tr><tr><td><strong>We use the continuous for <em>temporary</em> situations</strong>. <em>Example</em>: I<strong>â€˜m living</strong> with some friends until I find a place of my own.</td><td><strong>We use the simple for <em>permanent</em> situations</strong>. <em>Example</em>: My parents <strong>live</strong> in London. They have lived there all their lives.</td></tr></tbody></table></div><hr><p><strong>I always do</strong> and <strong>Iâ€™m always doing</strong></p><p>I always do (something) = I do it every time:</p><ul><li>I always go to work by car. (<em>not</em> Iâ€™m always going)</li></ul><p>â€˜I<strong>â€˜m always doing</strong> somethingâ€™ has a different meaning. </p><p>I<strong>â€˜m always losing</strong> things = I lose things very often, perhaps too often, or more often than normal.</p><ul><li><p>Iâ€™ve lose my phone again. Iâ€™m always losing things.</p></li><li><p>Youâ€™re always playing computer games. You should do something more active.(=You play computer games too often)</p></li><li><p>Tim is never satisfied. Heâ€™s always complaining. (=He complains too much)</p></li></ul><h2 id="Unit-4-Present-continuous-and-present-simple-2-I-am-doing-and-I-do"><a href="#Unit-4-Present-continuous-and-present-simple-2-I-am-doing-and-I-do" class="headerlink" title="Unit 4: Present continuous and present simple 2 (I am doing and I do)"></a>Unit 4: Present continuous and present simple 2 (I am doing and I do)</h2><p>We use continuous forms for actions and happenings that have started but not finished. Some verbs (for example, <strong>know</strong> and <strong>Like)</strong> are not normally used in this way. We donâ€™t say â€˜I am knowingâ€™ or â€˜they are likingâ€™; we say â€˜I <strong>know</strong>â€˜, â€˜they <strong>Likeâ€™.</strong></p><p>The following verbs are not normally used in the present continuous:</p><p><code>like</code>, <code>want</code>, <code>need</code>, <code>prefer</code>, <code>know</code>, <code>realise</code>, <code>belong</code>, <code>fit</code>, <code>suppose</code>, <code>mean</code>, <code>understand</code>, <code>believe</code>, <code>remember</code>, <code>contain</code>, <code>consist</code>, <code>seem</code>, â€¦</p><ul><li>Iâ€™m hungry. I <strong>want</strong> something to eat. (<em>not</em> Iâ€™m wanting)</li><li>Do you <strong>understand</strong> what I mean?</li><li>Anna <strong>doesnâ€™t seem</strong> very happy at the moment.</li></ul><hr><p><strong>Think</strong></p><p>When <strong>think</strong> means â€˜believeâ€™ or â€˜have an opinionâ€™, we do not use the continuous: </p><ul><li>I <strong>think</strong> Mary is Canadian, but Iâ€™m not sure. <em>(not</em> Iâ€™m thinking)</li><li>What <strong>do</strong> you <strong>think</strong> of my plan? (=What is your opinion?)</li></ul><p>When <strong>think</strong> means â€˜considerâ€™, the continuous is possible:</p><ul><li>Iâ€™m <strong>thinking</strong> about what happened. I often <strong>think</strong> about it.</li><li>Nicky <strong>is thinking</strong> of giving up her job. (=she is considering it)</li></ul><hr><p><strong>See hear smell taste</strong></p><p>We normally use the present simple (not continuous) with these verbs: </p><ul><li><p><strong>Do</strong> you <strong>see</strong> that man over there? <em>(not</em> Are you seeing)</p></li><li><p>This room <strong>smells.</strong> Lefs open a window.</p></li></ul><p>We often use <strong>can + see/ hear/smell/taste</strong>:</p><ul><li><strong>I can hear</strong> a strange noise. <strong>Can</strong> you <strong>hear</strong> it?</li></ul><hr><p><strong>Look feel</strong></p><p>You can use the present simple or continuous to say how somebody looks or feels now: </p><ul><li><p>You <strong>Look</strong> well today. or Youâ€™re <strong>Looking</strong> well today.</p></li><li><p>How <strong>do</strong> you <strong>feel</strong> now? or How <strong>are</strong> you <strong>feeling</strong> now? </p></li></ul><hr><p><strong>He is selfish</strong> and <strong>He</strong> <strong>is being selfish</strong></p><p>Heâ€™s <strong>being =</strong> Heâ€™s behaving/Heâ€™s acting. Compare:</p><ul><li><p>I canâ€™t understand why heâ€™s <strong>being</strong> so selfish. He isnâ€™t usually like that.</p><p><strong>(being</strong> selfish = behaving selfishly at the moment)</p></li><li><p>He never thinks about other people. He <strong>is</strong> very selfish. <em>(not</em> He is being)</p><p>(= He is selfish generally, not only at the moment)</p></li></ul><p>We use <strong>am/is/are being</strong> to say how somebody is <em>behaving.</em> lt is not usually possible in other sentences :</p><ul><li>itâ€™s hot today. <em>(not</em> lt is being hot)</li><li>Sarah <strong>is</strong> very tired . <em>(not</em> is being tired)</li></ul><h2 id="Unit-5-Past-simple-I-did"><a href="#Unit-5-Past-simple-I-did" class="headerlink" title="Unit 5: Past simple (I did)"></a>Unit 5: Past simple (I did)</h2><p>In questions and negatives we use <strong>did/didnâ€™t+</strong> <em>infinitive</em> <strong>(enjoy/see/go</strong> etc.):</p><ul><li><p>A: <strong>Did</strong> you <strong>go</strong> out last night?</p><p>B: Yes, I <strong>went</strong> to the cinema, but I <strong>didnâ€™t enjoy</strong> the film much.</p></li></ul><p>In the following examples, <strong>do</strong> is the main verb in the sentence <strong>(did</strong> â€¦ <strong>do</strong> <strong>/</strong> <strong>didnâ€™t do):</strong> </p><ul><li>What <strong>did</strong> you <strong>do</strong> at the weekend? <em>(not</em> What did you at the weekend?)</li><li>I <strong>didnâ€™t do</strong> anything. <em>(not</em> I didnâ€™t anything)</li></ul><h2 id="Unit-6-Past-continuous-I-was-doing"><a href="#Unit-6-Past-continuous-I-was-doing" class="headerlink" title="Unit 6: Past continuous (I was doing)"></a>Unit 6: Past continuous (I was doing)</h2><ul><li>Yesterday Karen and jim played tennis. They started at 10 oâ€™clock and finished at 11.30.So, at 10.30 they <strong>were playing</strong> tennis.</li></ul><p>They <strong>were playing</strong> = they were in the middle of playing. They had not finished playing.</p><p><strong>Was/were -ing</strong> is the <em>past continuous:</em></p><p><strong>I was doing</strong> something= I was in the middle of doing something at a certain time. The action or situation had already started before this time, but had not finished:</p><ul><li>This time last year I was living in Brazil.</li><li>What were you doing at 10 oâ€™clock last night?</li></ul><hr><p>We often use the past simple and the past continuous together to say that something happened in the middle of something else:</p><ul><li>Matt <strong>phoned</strong> while we <strong>were having</strong> dinner.</li><li>lt was <strong>raining</strong> when I <strong>got</strong> up.</li><li>I <strong>saw</strong> you in the park yesterday. You <strong>were sitting</strong> on the grass and <strong>reading</strong> a book. </li></ul><p>But we use the past simple to say that one thing happened after another:</p><ul><li>I <strong>was walking</strong> along the road when I <strong>saw</strong> Dan. So I <strong>stopped</strong>, and we <strong>had</strong> a chat.</li><li>When Karen arrived, we were having dinner. (= we had already started before she arrived)</li><li>When Karen arrived, we had dinner. (= Karen arrived, and then we had dinner)</li></ul><hr><h1 id="Present-perfect-and-past"><a href="#Present-perfect-and-past" class="headerlink" title="Present perfect and past"></a>Present perfect and past</h1><h2 id="Unit-7-Present-perfect1-I-have-done"><a href="#Unit-7-Present-perfect1-I-have-done" class="headerlink" title="Unit 7: Present perfect1 (I have done)"></a>Unit 7: Present perfect1 (I have done)</h2><ul><li>Tom is looking for his key. He canâ€™t find it. He <strong>has lost</strong> his key.</li></ul><p>He <strong>has lost</strong> his key = He lost it recently, and he still doesnâ€™t have it.</p><p>The present perfect simple is <strong>have/has</strong>+ <em>past participle.</em> </p><hr><p>When we say that â€˜something has happenedâ€™, this is usually new information:</p><ul><li>Ow! I<strong>â€˜ve cut</strong> my finger.</li><li>The road is closed. There<strong>â€˜s been</strong> (there <strong>has been</strong>) an accident.</li><li>Police <strong>have arrested</strong> two men in connection with the robbery.</li></ul><p>When we use the present perfect, <strong>there is a connection with <em>now.</em> The action in the past has a result now</strong>:</p><ul><li>â€˜Whereâ€™s your key?â€™ â€˜I donâ€™t know. Iâ€™ve lost it.â€™ (=I donâ€™t have it <em>now</em>)</li><li>â€˜Is Sally here?â€™ â€˜No, sheâ€™s gone out.â€™ (=she is out <em>now)</em></li><li>I canâ€™t find my bag. Have you seen it? (= Do you know where it is <em>now?)</em></li></ul><hr><p>Note the <strong>difference between gone (to) and been (to)</strong>:</p><ul><li>James is on holiday. He <strong>has gone</strong> to Italy. (= he is there now or on his way there)</li><li>Jane is back home now. She <strong>has been</strong> to Italy. (=she has now come back)</li></ul><hr><p>You can use the present perfect with <strong>just</strong>, <strong>already</strong> and <strong>yet</strong>.</p><p><strong>just</strong> = a short time ago:</p><ul><li>â€˜Are you hungry?â€™ â€˜No, I<strong>â€˜ve just had</strong> lunch.â€™</li><li>Hello. Have you <strong>just arrived</strong>?</li></ul><p><strong>already</strong> = something happened sooner than expected:</p><ul><li>â€˜Donâ€™t forget to pay your electricity bill.â€™ â€˜Iâ€™<strong>ve already paid</strong> it.â€™</li><li>â€˜What time is Mark leaving?â€™ â€˜He<strong>â€˜s already left</strong>.â€™</li></ul><p><strong>yet</strong> = until now. <strong>yet</strong> shows that the speaker is expecting something to happen. Use yet  <strong>only in questions and negative</strong> sentences:</p><ul><li><p><strong>Has</strong> it <strong>stopped</strong> raining <strong>yet</strong>?</p></li><li><p>I <strong>â€˜ve written</strong> the email, but I <strong>havenâ€™t sent</strong> it <strong>yet</strong>.</p></li></ul><hr><p>You can also use the past simple (<strong>did, went, had</strong> etc.) in the examples on this page. So you can say:</p><ul><li><p>â€˜Is Sally here?â€™ â€˜No, she went out.â€™ <em>or</em> â€˜No, sheâ€™s gone out.â€™</p></li><li><p>â€˜Are you hungry?â€™ â€˜No, I just had lunch.â€™ <em>or</em>  â€˜No, Iâ€™ve just had lunch.â€™</p></li></ul><h2 id="Unit-8-Present-perfect2-I-have-done"><a href="#Unit-8-Present-perfect2-I-have-done" class="headerlink" title="Unit 8: Present perfect2 (I have done)"></a>Unit 8: Present perfect2 (I have done)</h2><ul><li><p>DAVE: <strong>Have</strong> you <strong>travelled</strong> a lot, Jane? Yes, Iâ€™ve <strong>been</strong> to lots of places.</p></li><li><p>JANE: Really? <strong>Have</strong> you ever <strong>been</strong> to China? Yes, Iâ€™ve <strong>been</strong> to China twice.</p></li><li>DAVE: What about India?</li><li>JANE:  No, I <strong>havenâ€™t been</strong> to India.</li></ul><p>When we talk about a period of time that continues from the past until now, we use the <em>present perfect</em> <strong>(have been</strong> <strong>I</strong> <strong>have traveLLed</strong> etc.). Here, Dave and jane are talking about the places Jane has visited in her life, which is a period that continues until now.</p><hr><ul><li><p><strong>Have</strong> you ever <strong>eaten</strong> caviar?</p></li><li><p>We<strong>â€˜ve</strong> never <strong>had</strong> a car.</p></li><li>Susan really loves that film. Sheâ€™s <strong>seen</strong> it eight times!</li></ul><p><strong>Been</strong> <strong>(to)=</strong> visited:</p><ul><li>Iâ€™ve never <strong>been</strong> <strong>to</strong> China. Have you <strong>been</strong> there?</li></ul><hr><p>In the following examples too, the speakers are talking about a period that continues until now <strong>(recently</strong> <strong>/</strong> <strong>in</strong> <strong>the</strong> <strong>last few days</strong> <strong>/</strong> <strong>so far</strong> <strong>/</strong> <strong>since breakfast</strong> etc.):</p><ul><li><strong>Have</strong> you <strong>heard</strong> anything from Brian <strong>recently?</strong></li><li>Iâ€™ve <strong>met</strong> a lot of people <strong>in</strong> <strong>the</strong> <strong>last</strong> <strong>few</strong> <strong>days.</strong></li><li><p>Everything is going well. We <strong>havenâ€™t had</strong> any problems <strong>so far</strong>.</p></li><li><p>Iâ€™m hungry. I <strong>havenâ€™t eaten</strong> anything <strong>since breakfast.</strong> (=from breakfast until now)</p></li><li>ltâ€™s good to see you again. We <strong>havenâ€™t seen</strong> each other <strong>for a Long time.</strong></li></ul><hr><p>In the same way we use the present perfect with <strong>today</strong> <strong>/</strong> <strong>this evening</strong> <strong>/</strong> <strong>this year</strong> etc. when these periods are not finished at the time of speaking:</p><ul><li>Iâ€™ve <strong>drunk</strong> four cups of coffee today.</li><li><strong>Have</strong> you <strong>had</strong> a holiday <strong>this year?</strong></li><li>I <strong>havenâ€™t seen</strong> Tom <strong>this morning. Have</strong> you? </li><li>Rob <strong>hasnâ€™t worked</strong> very hard <strong>this</strong> <strong>term</strong>.</li></ul><hr><p>We say: ltâ€™s the (first) time something <strong>has happened.</strong> For example:</p><ul><li><p>Don is having a driving lesson. ltâ€™s his first one. </p><p>ltâ€™s the first time he <strong>has driven</strong> a car. <em>(not</em> drives)</p></li><li><p>He <strong>has never driven</strong> a car <strong>before.</strong></p></li><li><p>Bill is phoning his girlfriend again. Thatâ€™s the third time heâ€™s <strong>phoned</strong> her <strong>this evening.</strong> <em>(not</em> happens)</p></li></ul><h2 id="Unit-9-Present-perfect-continuous-I-have-been-doing"><a href="#Unit-9-Present-perfect-continuous-I-have-been-doing" class="headerlink" title="Unit 9: Present perfect continuous(I have been doing)"></a>Unit 9: Present perfect continuous(I have been doing)</h2><ul><li><strong>lt has been raining</strong></li></ul><p>Study this example situation:</p><ul><li>â€˜Is it raining?â€™ â€˜No, but the ground is wet.â€™</li><li>lt <strong>has been raining</strong>.</li></ul><p><strong>Have/has been -ing</strong> is the <em>presentperfect continuous:</em></p><p>We use the present perfect continuous for an activity that has recently stopped or just stopped. There is a connection with <em>now:</em></p><ul><li>Youâ€™re out of breath. Have you been running? (= youâ€™re out of breath <em>now)</em></li><li>Paul is very tired. Heâ€™s been working very hard. (= heâ€™stired <em>now)</em> </li><li>Why are your clothes so dirty? What have you been doing?</li><li>Iâ€™ve been talking to Amanda about the problem and she agrees with me.</li><li>Where have you been? Iâ€™ve been looking for you everywhere.</li></ul><hr><ul><li><strong>lt has been raining for two hours</strong>.</li></ul><p>lt began raining two hours ago and it is still raining.</p><ul><li>â€˜How long <strong>has</strong> it  <strong>been raining</strong> ?â€™  â€˜lt <strong>has been raining</strong> for two hours.â€™</li></ul><p>We use the present perfect continuous in this way especially with <strong>how long</strong>, <strong>for</strong> â€¦ and <strong>since</strong> â€¦. The activity is still happening (as in this example) or has just stopped.</p><ul><li>How long <strong>have you been Learning</strong> English? (=youâ€™re still learning English)</li><li>Tim is still watching TV. He<strong>â€˜s been watching</strong> TV all day.</li><li>Where have you been? I<strong>â€˜ve been looking</strong> for you <strong>for the last half hour</strong>.</li><li><p>Chris <strong>hasnâ€™t been feeling</strong> well recently.</p><p>You can use the present perfect continuousfor actions repeated over a period of time:</p></li><li><p>Silvia is a very good tennis player. Sheâ€™s been playing since she was eight.</p></li><li>Every morning they meet in t he same cafe. Theyâ€™ve been going there for years.</li></ul><h2 id="Unit10-Present-perfect-continuous-and-Present-perfect-I-have-been-doing-and-I-have-done"><a href="#Unit10-Present-perfect-continuous-and-Present-perfect-I-have-been-doing-and-I-have-done" class="headerlink" title="Unit10: Present perfect continuous and Present perfect (I have been doing and I have done)"></a>Unit10: Present perfect continuous and Present perfect (I have been doing and I have done)</h2><blockquote><p>I am confused for this section, the difference between the present perfect continuous and the present perfect seems not so muchâ€¦..but I still record that.</p></blockquote><ul><li><strong>Iâ€™ve been painting</strong> my bedroom.</li></ul><p>We are <strong>thinking of the activity</strong>. <strong>lt does not matter whether it has been finished or not</strong>. In this example, the activity (painting the bedroom) has not been finished.</p><ul><li>I<strong>â€˜ve painted</strong> my bedroom.</li></ul><p>Here, the important thing is that something has been finished. We are interested in <strong>the result of the activity</strong> (the painted bedroom), not the activity itself.</p><hr><p>Present perfect continuous</p><ul><li>My hands are very dirty. Iâ€™ve been repairing my bike.</li><li>Joe has been eating too much recently. He should eat less.</li><li>ltâ€™s nice to see you again. What have you been doing since we last met?</li><li>Where have you been? Have you been playing tennis?</li></ul><p>Present perfect</p><ul><li>My bike is OK again now. Iâ€™ve repaired it.</li><li>Somebody has eaten all the chocolates. The box is empty.</li><li>Whereâ€™s the book I gave you? What have you done with it?</li><li>Have you ever played tennis?</li></ul><hr><p>We use the continuous to say <em>how</em> <em>long</em> (for something that is still happening):</p><ul><li>How long have you been reading that book?</li><li>Lisa is writing emails. Sheâ€™s been writing emails all morning.</li><li>Theyâ€™ve been playing tennis since 2 oâ€™clock.</li></ul><p>We use the simple to say <em>how</em> <em>much, how</em> <em>many</em> or <em>how many times:</em></p><ul><li>How much of that book have you read ?</li><li>Lisa is writing emails. Sheâ€™s sent lots of emails this morning.</li><li>Theyâ€™ve played tennis three times this week.</li><li>Iâ€™m learning Arabic, but I havenâ€™t learnt very much yet.</li></ul><hr><p>Some verbs (for example, know/like/believe) are not normally used in the continuous:</p><ul><li>Iâ€™ve known about the problem for a long time. <em>(not</em> Iâ€™ve been knowing)</li><li>How long have you had that camera? <em>(not</em> have you been having)</li></ul><p>But note that you <em>can</em> use <strong>want</strong> and <strong>mean</strong> in the present perfect continuous:</p><ul><li>Iâ€™ve been meaning to phone Jane1 but I keep forgetting.</li></ul><h2 id="Unit11-How-long-have-you-been-â€¦"><a href="#Unit11-How-long-have-you-been-â€¦" class="headerlink" title="Unit11:  How long have you (been) â€¦ ?"></a>Unit11:  How long have you (been) â€¦ ?</h2><p>Dan and Jenny are married. They got married exactly 20 years ago, so today is their 20th wedding anniversary.</p><p>They <strong>have been married</strong> for 20 years. </p><p>We say: They are married. <em>(present)</em></p><p><em>but</em> <strong>How long have they been married</strong>? <em>(present perfect)  (not</em> How long are they married?)</p><p>They have been married for 20 years. <em>(not</em> They are married for 20 years)</p><hr><p>We use the <em>present perfect</em> to talk about something that began in the past and still continues now.</p><p>Compare the <em>present</em> and the <em>present perfect:</em></p><ul><li><p>Paul is in hospital.</p><p>He<strong>â€˜s been</strong> in hospital since Monday. <em>(not</em> Paul is in hospital since Monday)</p></li></ul><hr><p>I <strong>have known / had / lived</strong> etc. is the <em>present perfect simple.</em></p><p>I <strong>have been learning/been waiting/been doing</strong> etc. is the <em>present perfect continuous</em></p><p>When we ask or say â€˜how longâ€™, the continuous is more usual:</p><ul><li>Iâ€™ve been learning English for six months.</li><li>ltâ€™s been raining since Lunchtime.</li><li>Richard has been doing the same job for 20 years. </li><li>â€˜How long have you been driving?â€™ â€˜Since I was 17.â€™</li></ul><p>Some verbs (for example, <strong>know/like/believe/have</strong>) are not normally used in the continuous:</p><ul><li>How long have you <strong>known</strong> jane? <em>(not</em> have you been knowing)</li><li>I<strong>â€˜ve had</strong> a pain in my stomach all day. <em>(not</em> Iâ€™ve been having)</li></ul><hr><p>You can use either the present perfect continuous or simple with live and work:</p><ul><li>Julia has been living I has lived here for a long time.</li><li>How long have you been working I have you worked here?</li></ul><p>But use the simple (I<strong>â€˜ve lived</strong> I I<strong>â€˜ve done</strong> etc.) with <strong>always</strong>:</p><ul><li>Iâ€™ve always lived in the country. <em>(not</em> always been living)</li></ul><hr><p>We say â€˜<strong>I havenâ€™t done something since/for</strong> â€¦â€™ (present perfectsimple):</p><ul><li>I havenâ€™t seen Tom since Monday. (= Monday was the last time I saw him) </li><li>Sarah hasnâ€™t phoned for ages. (=the last time she phoned was ages ago)</li></ul><h2 id="Unit12-For-and-since-When-â€¦-and-How-Long-â€¦"><a href="#Unit12-For-and-since-When-â€¦-and-How-Long-â€¦" class="headerlink" title="Unit12:  For and since        When â€¦ ? and How Long â€¦ ?"></a>Unit12:  For and since        When â€¦ ? and How Long â€¦ ?</h2><p>We use <strong>for</strong> and <strong>since</strong> to say how long something has been happening.</p><p>We use <strong>for</strong> + a period of time (two hours, six weeks etc.):</p><ul><li>Iâ€™ve been waiting for two hours.</li><li>Sally has been working here for six months. <em>(not</em> since six months)</li><li>I havenâ€™t seen Tom for three days.</li></ul><p>We use <strong>since</strong> + the start of a period (8 oâ€™clock, Monday,1999 etc.):</p><ul><li>Sally has been working here since April. (=from April until now)</li><li>I havenâ€™t seen Tom since Monday.</li></ul><p>lt is possible to leave out <strong>for</strong> (but not usually in negative sentences):</p><ul><li>Theyâ€™ve been married (for) ten years. (with or without for) </li><li>They havenâ€™t had a holiday for ten years. (you must use for)</li></ul><p>We do <em>not</em> use <strong>for+ all</strong> â€¦ (all day <em>I</em> all my life etc.): </p><ul><li>Iâ€™ve lived here all my life. <em>(not</em> for all my life)</li></ul><p>You can use <strong>in</strong> instead of <strong>for</strong> in <strong>negative</strong> sentences (I havenâ€™t â€¦ etc.): </p><ul><li>They havenâ€™t had a holiday in ten years. (=for ten years)</li></ul><hr><p>Compare <strong>when</strong> â€¦ ? <em>(+past simple)</em> and <strong>how long</strong> â€¦ ? <em>(+present perfect):</em></p><ul><li><p>A: <strong>When</strong> did Joe and Carol first meet?<br>B: They first met <strong>when they were at school</strong>. (or <strong>a long time ago</strong>.)</p></li><li><p>A: How long have they known each other?<br>B: Theyâ€™ve known each other <strong>for a long time</strong>. (or <strong>since they were at school</strong>.)</p></li></ul><hr><p><strong>ltâ€™s</strong> or <strong>ltâ€™s been</strong> + a long time + since something happened.</p><ul><li><p><strong>ltâ€™s two years since</strong> I last saw Joe. or <strong>ltâ€™s been two years since</strong>â€¦ (= I havenâ€™t seen Joe for two years)</p></li><li><p><strong>How Long is it since</strong> Mrs Hill died? or <strong>How long has it been since</strong> .. . ? (= When did Mrs Hill die?)</p></li></ul><h2 id="Unit13-Present-perfect-and-past-1-I-have-done-and-I-did"><a href="#Unit13-Present-perfect-and-past-1-I-have-done-and-I-did" class="headerlink" title="Unit13: Present perfect and past 1 (I have done and I did)"></a>Unit13: Present perfect and past 1 (I have done and I did)</h2><p>The present perfect (something has happened) is a <em>present</em> tense. lt <strong>always tells us about the situation now</strong>. â€˜Tom has lost his keyâ€™= he doesnâ€™t have his key <em>now</em>.</p><p>The past simple (something happened) <strong>tells us only about the past</strong>. If somebody says â€˜Tom lost his keyâ€™, this doesnâ€™t tell us whether he has the key now or not. lt tells us only that he lost his key at some time in the past.</p><p>Do <em>not</em> use the present perfect if the situation now is different. </p><ul><li>They went away, but I think theyâ€™re back at home now. <em>(not</em> Theyâ€™ve gone)</li></ul><hr><p>You can use the present perfect for <strong>new or recent</strong> happenings:</p><ul><li>â€˜Iâ€™ve repaired the washing machine. ltâ€™s working OK now.â€™ â€˜Oh, thatâ€™s good.â€™</li></ul><p>Usually, you <strong>can also use</strong> the past simple:</p><ul><li>I repaired the washing machine. ltâ€™s working OK now.</li></ul><p>Use the past simple <em>(not</em> the present perfect) for things that are <strong>not recent or new</strong>:</p><ul><li>My mother grew up in Italy. <em>(not</em> has grown)</li></ul><p>Compare:</p><ul><li>Did you know that somebody has invented a new type of washing machine?</li><li>Who invented the telephone? <em>(not</em> has invented)</li></ul><hr><p>We use the present perfect to give new information. But if we <strong>continue to talk about it</strong>, we normally use the past simple:</p><ul><li><p>A : Ow! Iâ€™ve burnt myself.</p><p>B: How did you do that? <em>(not</em> have you done) </p><p>A: I picked up a hot dish. <em>(not</em> have picked)</p></li><li><p>A: Look! Somebody has spilt something on the sofa.</p><p>B: Well, it wasnâ€™t me. I didnâ€™t do it. <em>(not</em> hasnâ€™t been â€¦ havenâ€™t done)</p></li></ul><h1 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h1><p>[1]English Grammar in Use Answers 4th</p><p><a href="http://www.yinwang.org/blog-cn/2018/11/23/grammar">[2]ç‹å .è§£è°œè‹±è¯­è¯­æ³•</a></p>]]></content>
    
    
    <categories>
      
      <category>è‹±è¯­åŸºç¡€</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>MysqlåŸºç¡€è¯­æ³•</title>
    <link href="/2021/08/26/Mysql%E5%9F%BA%E7%A1%80%E8%AF%AD%E6%B3%95/"/>
    <url>/2021/08/26/Mysql%E5%9F%BA%E7%A1%80%E8%AF%AD%E6%B3%95/</url>
    
    <content type="html"><![CDATA[<h1 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h1><p><strong>brewå®‰è£…Mysql</strong></p><div class="code-wrapper"><pre><code class="hljs no">lihan@LideMacBook-Air ~ % brew install mysql==&gt; Installing mysql==&gt; SummaryğŸº  /opt/homebrew/Cellar/mysql/8.0.26: 303 files, 296.7MB==&gt; mysqlWe&#x27;ve installed your MySQL database without a root password. To secure it run:    mysql_secure_installationMySQL is configured to only allow connections from localhost by defaultTo connect run:    mysql -urootTo have launchd start mysql now and restart at login:  brew services start mysqlOr, if you don&#x27;t want/need a background service you can just run:  mysql.server startlihan@LideMacBook-Air ~ % mysql.server startStarting MySQL.. SUCCESS! lihan@LideMacBook-Air ~ % mysql_secure_installationSecuring the MySQL server deployment.Connecting to MySQL using a blank password.VALIDATE PASSWORD COMPONENT can be used to test passwordsand improve security. It checks the strength of passwordand allows the users to set only those passwords which aresecure enough. Would you like to setup VALIDATE PASSWORD component?Press y|Y for Yes, any other key for No: yThere are three levels of password validation policy:LOW    Length &gt;= 8MEDIUM Length &gt;= 8, numeric, mixed case, and special charactersSTRONG Length &gt;= 8, numeric, mixed case, special characters and dictionary                  filePlease enter 0 = LOW, 1 = MEDIUM and 2 = STRONG: 2Please set the password for root here.New password: Re-enter new password: Estimated strength of the password: 100 Do you wish to continue with the password provided?(Press y|Y for Yes, any other key for No) : yBy default, a MySQL installation has an anonymous user,allowing anyone to log into MySQL without having to havea user account created for them. This is intended only fortesting, and to make the installation go a bit smoother.You should remove them before moving into a productionenvironment.Remove anonymous users? (Press y|Y for Yes, any other key for No) : ySuccess.Normally, root should only be allowed to connect from&#x27;localhost&#x27;. This ensures that someone cannot guess atthe root password from the network.Disallow root login remotely? (Press y|Y for Yes, any other key for No)  n     ... skipping.By default, MySQL comes with a database named &#x27;test&#x27; thatanyone can access. This is also intended only for testing,and should be removed before moving into a productionenvironment.Remove test database and access to it? (Press y|Y for Yes, any other key for No) : y - Dropping test database...Success. - Removing privileges on test database...Success.Reloading the privilege tables will ensure that all changesmade so far will take effect immediately.Reload privilege tables now? (Press y|Y for Yes, any other key for No) : ySuccess.All done! lihan@LideMacBook-Air ~ % mysql -u root -pEnter password: Welcome to the MySQL monitor.  Commands end with ; or \g.Your MySQL connection id is 11Server version: 8.0.26 HomebrewCopyright (c) 2000, 2021, Oracle and/or its affiliates.Oracle is a registered trademark of Oracle Corporation and/or itsaffiliates. Other names may be trademarks of their respectiveowners.Type &#x27;help;&#x27; or &#x27;\h&#x27; for help. Type &#x27;\c&#x27; to clear the current input statement.mysql&gt; exit;Bye</code></pre></div><p><strong>å»ºç«‹æ•°æ®åº“</strong></p><div class="code-wrapper"><pre><code class="hljs no">é“¾æ¥ï¼šhttps://pan.baidu.com/s/1xDsDWFLiRITYTT6HoFb7Tw æå–ç ï¼šs5iz</code></pre></div><p>æ³¨æ„å­˜æ”¾ä½ç½®å¦‚æœæœ‰ä¸­æ–‡è·¯å¾„å¯èƒ½ä¼šåœ¨ä¹‹åæŠ¥<code>error 2</code>é”™è¯¯</p><p>åœ¨<code>source</code>åç›´æ¥æ‹–å…¥<code>sql</code>æ–‡ä»¶å³å¯</p><div class="code-wrapper"><pre><code class="hljs no">mysql&gt; create database mydatabase;Query OK, 1 row affected (0.01 sec)mysql&gt; use mydatabaseDatabase changedmysql&gt; source /Users/lihan/Desktop/summer/create-databases.sql Query OK, 0 rows affected, 1 warning (0.00 sec)....mysql&gt; show databases;+--------------------+| Database           |+--------------------+| information_schema || mydatabase         || mysql              || performance_schema || sql_hr             || sql_inventory      || sql_invoicing      || sql_store          || sys                |+--------------------+9 rows in set (0.00 sec)mysql&gt; drop database mydatabase;Query OK, 0 rows affected (0.01 sec)</code></pre></div><h1 id="å•è¡¨æ£€ç´¢"><a href="#å•è¡¨æ£€ç´¢" class="headerlink" title="å•è¡¨æ£€ç´¢"></a>å•è¡¨æ£€ç´¢</h1><ul><li>Mysqlå¤§å°å†™ä¸åˆ†ï¼Œå»ºè®®å¤§å†™å…³é”®å­—ï¼Œå°å†™å…¶ä»–å†…å®¹</li><li>åœ¨è¡Œå‰ä½¿ç”¨<code>--</code>è¡¨ç¤ºæ³¨é‡Š</li><li>æ¯ä¸ªè¯­å¥åä½¿ç”¨<code>;</code>è¡¨ç¤ºç»“æŸ</li><li>å¯ä»¥ä½¿ç”¨ç®—æœ¯è¡¨è¾¾å¼</li><li>å¯ä»¥ä½¿ç”¨<code>AS</code>å…³é”®å­—ä¸ºåˆ—å–åˆ«å</li></ul><div class="code-wrapper"><pre><code class="hljs sql"><span class="hljs-keyword">SELECT</span> first_name, point <span class="hljs-operator">*</span> <span class="hljs-number">10</span> <span class="hljs-operator">+</span> <span class="hljs-number">100</span> <span class="hljs-keyword">AS</span> `discount_factor`<span class="hljs-keyword">FROM</span> customers<span class="hljs-comment">-- WHERE custom_id = 1</span><span class="hljs-keyword">ORDER</span> <span class="hljs-keyword">BY</span> first_name;</code></pre></div><ul><li><code>DISTINCT</code>å¯ä»¥åˆ é™¤é‡å¤é¡¹ï¼Œ <em>é‡å¤</em>æ˜¯ä»¥åˆ—çš„ç»„åˆåˆ¤æ–­çš„ï¼Œ<code>DISTINCT</code>å¿…é¡»æ”¾åœ¨å¼€å¤´</li></ul><div class="code-wrapper"><pre><code class="hljs sql"><span class="hljs-keyword">SELECT</span> <span class="hljs-keyword">DISTINCT</span> state <span class="hljs-keyword">FROM</span> customers;</code></pre></div><ul><li><code>WHERE</code>ä¸­å¯¹äºæ–‡æœ¬éœ€è¦ä½¿ç”¨å•å¼•å·æˆ–åŒå¼•å·ï¼Œæ–‡æœ¬å¤§å°å†™ä¸æ•æ„Ÿ</li><li>æ³¨æ„æ­¤å¤„çš„<code>Customers</code>ä¸<code>va</code>å‡å¤§å°å†™ä¸æ•æ„Ÿ</li><li><code>!=</code> ï¼Œ<code>&lt;&gt;</code>å‡æ„ä¸ºä¸ç­‰äº</li><li>æ—¥æœŸç±»å‹æ•°æ®ä¹Ÿéœ€ä½¿ç”¨å¼•å·</li><li>å¯ä»¥ä½¿ç”¨<code>AND</code>ï¼Œ<code>OR</code>ï¼Œ<code>NOT</code>åˆ›å»ºå¤åˆæ¡ä»¶è¯­å¥</li><li>æ¡ä»¶è¯­å¥ä¸­å¯ä»¥ä½¿ç”¨ç®—æ•°è¡¨è¾¾å¼</li></ul><div class="code-wrapper"><pre><code class="hljs sql"><span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span><span class="hljs-keyword">FROM</span> Customers<span class="hljs-keyword">WHERE</span> state <span class="hljs-operator">&lt;&gt;</span> <span class="hljs-string">&#x27;va&#x27;</span> <span class="hljs-keyword">AND</span> birth_data <span class="hljs-operator">&gt;</span> <span class="hljs-string">&#x27;1990-01-01&#x27;</span>;</code></pre></div><ul><li><code>IN</code>å…³é”®å­—åˆ¤æ–­æ˜¯å¦åœ¨é›†åˆä¸­</li><li><code>BETWEEN</code>å…³é”®å­—åˆ¤æ–­æ˜¯å¦åœ¨é—­åŒºé—´å†…</li></ul><div class="code-wrapper"><pre><code class="hljs sql"><span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span><span class="hljs-keyword">FROM</span> customers<span class="hljs-keyword">WHERE</span> state <span class="hljs-keyword">IN</span> (<span class="hljs-string">&#x27;VA&#x27;</span>, <span class="hljs-string">&#x27;FL&#x27;</span>) <span class="hljs-keyword">AND</span> points <span class="hljs-keyword">BETWEEN</span> <span class="hljs-number">1000</span> <span class="hljs-keyword">AND</span> <span class="hljs-number">2000</span>;</code></pre></div><ul><li><code>LIKE</code>å…³é”®å­—ç”¨äºæ–‡æœ¬æ¨¡ç³ŠåŒ¹é…å¸¸ç”¨çš„æœ‰ï¼š<code>_</code>å•ä¸€å­—ç¬¦ï¼Œ<code>%</code>ä»»æ„æ•°ç›®å­—ç¬¦</li></ul><div class="code-wrapper"><pre><code class="hljs sql"><span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span><span class="hljs-keyword">FROM</span> customers<span class="hljs-keyword">WHERE</span> last_name <span class="hljs-keyword">LIKE</span> <span class="hljs-string">&#x27;%field%&#x27;</span>;</code></pre></div><ul><li><code>REGEXP</code>å…³é”®å­—ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼è¿›è¡Œæ¨¡ç³ŠåŒ¹é…</li></ul><div class="code-wrapper"><pre><code class="hljs sql"><span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span><span class="hljs-keyword">FROM</span> customers<span class="hljs-keyword">WHERE</span> last_name REGEXP <span class="hljs-string">&#x27;field&#x27;</span>;</code></pre></div><ul><li><code>NULL</code>è¡¨ç¤ºç©ºå€¼</li></ul><div class="code-wrapper"><pre><code class="hljs sql"><span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span><span class="hljs-keyword">FROM</span> customers<span class="hljs-keyword">WHERE</span> phone <span class="hljs-keyword">IS</span> <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>;</code></pre></div><ul><li>ç»“æœé›†é»˜è®¤ä»¥ä¸»é”®ä¸ºæ ‡å‡†è¿›è¡Œç”Ÿåºæ’åºï¼Œä½¿ç”¨<code>ORDER BY</code>å…³é”®å­—å¯ä»¥ä½¿ç”¨å…¶ä»–åˆ—ä¸ºæ ‡å‡†æ’åº</li><li>é»˜è®¤å‡åºæ’åºï¼Œä½¿ç”¨<code>DESC</code>è¿›è¡Œé™åºæ’åº</li><li>å¯ä»¥ä½¿ç”¨å¤šä¸ªæ’åºè§„åˆ™ï¼Œè¶Šé å‰ä¼˜å…ˆçº§è¶Šé«˜</li><li>Mysqlä¸­å…è®¸ç”¨äºæ’åºçš„åˆ—ä¸æ˜¯ç»“æœé›†çš„åˆ—</li></ul><div class="code-wrapper"><pre><code class="hljs sql"><span class="hljs-keyword">SELECT</span> first_name<span class="hljs-keyword">FROM</span> customers<span class="hljs-keyword">ORDER</span> <span class="hljs-keyword">BY</span> state <span class="hljs-keyword">DESC</span>, first_name <span class="hljs-keyword">DESC</span>;</code></pre></div><ul><li><code>LIMIT</code>å…³é”®å­—ç”¨äºé™åˆ¶ç»“æœé›†å¤§å°ï¼Œå¯ç”¨äºç½‘ç«™åˆ†é¡µ</li><li><code>LIMIT 3</code>ä»£è¡¨ç»“æœé›†å¤§å°ä¸º3ï¼Œ<code>LIMIT 6, 3</code>ä»£è¡¨è·³è¿‡6è¡Œå–3è¡Œ</li><li>æ³¨æ„<code>WHERE</code>ï¼Œ<code>ORDER BY</code>ï¼Œ<code>LIMIT</code>åœ¨è¯­å¥ä¸­å‡ºç°çš„å…ˆåé¡ºåº</li></ul><div class="code-wrapper"><pre><code class="hljs sql"><span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span><span class="hljs-keyword">FROM</span> customers<span class="hljs-keyword">WHERE</span> state <span class="hljs-operator">&lt;&gt;</span> <span class="hljs-string">&#x27;va&#x27;</span> <span class="hljs-keyword">ORDER</span> <span class="hljs-keyword">BY</span> points <span class="hljs-keyword">DESC</span>LIMIT <span class="hljs-number">3</span>;</code></pre></div><h1 id="å¤šè¡¨æ£€ç´¢"><a href="#å¤šè¡¨æ£€ç´¢" class="headerlink" title="å¤šè¡¨æ£€ç´¢"></a>å¤šè¡¨æ£€ç´¢</h1><ul><li><code>JOIN</code>é»˜è®¤ä»£è¡¨å†…è¿æ¥å³ <code>INNER JOIN</code></li><li>å¯ä»¥ä¸ºè¡¨å–åˆ«å</li></ul><div class="code-wrapper"><pre><code class="hljs sql"><span class="hljs-keyword">SELECT</span> o.customer_id<span class="hljs-keyword">FROM</span> orders o<span class="hljs-keyword">JOIN</span> customers <span class="hljs-keyword">ON</span> o.customer_id <span class="hljs-operator">=</span> customer.customer_id;</code></pre></div><ul><li>å¯ä»¥å¯¹ä¸åŒæ•°æ®åº“çš„è¡¨è¿›è¡Œè¿æ¥</li></ul><div class="code-wrapper"><pre><code class="hljs sql"><span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span><span class="hljs-keyword">FROM</span> order_items oi<span class="hljs-keyword">JOIN</span> sql_inventory.products p <span class="hljs-keyword">ON</span> oi.product_id <span class="hljs-operator">=</span> p.product_id;</code></pre></div><ul><li>è¡¨ä¹Ÿå¯ä»¥ä¸è‡ªèº«è¿›è¡Œè¿æ¥ï¼Œç§°ä¸ºè‡ªè¿æ¥</li></ul><div class="code-wrapper"><pre><code class="hljs sql"><span class="hljs-keyword">SELECT</span> e.employee_id, e.first_name, m.first_nam<span class="hljs-keyword">FROM</span> employees e<span class="hljs-keyword">JOIN</span> employees m <span class="hljs-keyword">WHERE</span> e.reports_to <span class="hljs-operator">=</span> m.employee_id;</code></pre></div><ul><li><code>JOIN</code>å¤šæ¬¡ä½¿ç”¨å¯ä»¥å¤šè¡¨è¿æ¥</li></ul><div class="code-wrapper"><pre><code class="hljs sql"><span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span><span class="hljs-keyword">FROM</span> orders o<span class="hljs-keyword">JOIN</span> customers c<span class="hljs-keyword">ON</span> o.customer_id <span class="hljs-operator">=</span> c.customer_id<span class="hljs-keyword">JOIN</span> order_statuses os<span class="hljs-keyword">ON</span> o.status <span class="hljs-operator">=</span> os.order_status_id;</code></pre></div><ul><li><code>AND</code>åˆ›å»ºå¤åˆè¿æ¥æ¡ä»¶</li></ul><div class="code-wrapper"><pre><code class="hljs sql"><span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span><span class="hljs-keyword">FROM</span> order_items oi<span class="hljs-keyword">JOIN</span> order_items_notes oin<span class="hljs-keyword">ON</span> oi.order_id <span class="hljs-operator">=</span> oin.order_id<span class="hljs-keyword">AND</span> oi.product_id <span class="hljs-operator">=</span> oin.product_id;</code></pre></div><ul><li>ä¸€èˆ¬æˆ‘ä»¬ä½¿ç”¨æ˜¾å¼è¿æ¥ï¼ˆç¬¬ä¸€å¥ï¼‰è€Œä¸æ˜¯éšå¼è¿æ¥ï¼ˆç¬¬äºŒå¥ï¼‰</li><li>æ˜¾å¼è¿æ¥ä¸åŠ <code>ON</code>æŒ‡åè¿æ¥æ¡ä»¶æˆ–éšå¼è¿æ¥ä¸åŠ <code>WHERE</code>ï¼Œçš„æ—¶å€™ç§°ä¸ºäº¤å‰è¿æ¥ï¼Œè¿”å›ç¬›å¡å°”ç§¯çš„ç»“æœ</li></ul><div class="code-wrapper"><pre><code class="hljs sql"><span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span><span class="hljs-keyword">FROM</span> orders o<span class="hljs-keyword">JOIN</span> customers c<span class="hljs-keyword">ON</span> o.customer_id <span class="hljs-operator">=</span> c.customer_id;<span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span><span class="hljs-keyword">FROM</span> orders o, customers c<span class="hljs-keyword">WHERE</span> o.customer_id <span class="hljs-operator">=</span> c.customer_id;<span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span><span class="hljs-keyword">FROM</span> orders o, customers c;</code></pre></div><ul><li><code>LEFT JOIN</code>å·¦å¤–è¿æ¥è¡¨ç¤ºæ‰€æœ‰å·¦è¡¨çš„è®°å½•éƒ½ä¼šè¿”å›ï¼Œå¦‚æœå³è¡¨æ²¡æœ‰ç›¸åŒ¹é…çš„ç»“æœï¼Œå¯¹åº”ä½ç½®ç½®ä¸ºNULL</li><li><code>OUTER</code>å…³é”®å­—ä¸€èˆ¬çœå»</li><li>ä¸ºä½¿å¾—è¯­å¥æ¸…æ™°ï¼Œå¤–è¿æ¥å°½é‡ä½¿ç”¨å·¦è¿æ¥</li></ul><div class="code-wrapper"><pre><code class="hljs sql"><span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span><span class="hljs-keyword">FROM</span> customers c<span class="hljs-keyword">LEFT</span> <span class="hljs-keyword">OUTER</span> <span class="hljs-keyword">JOIN</span> orders o<span class="hljs-keyword">ON</span> c.customer_id <span class="hljs-operator">=</span> o.customer_id;</code></pre></div><ul><li>å¤šè¡¨è¿æ¥æ—¶å€™ï¼Œåˆ¤æ–­å·¦å³è¡¨å…³ç³»ä¼¼ä¹æ˜¯æŒ‰ç…§<code>ON</code>æ¥çš„ï¼Œæœ‰å¾…è¡¥å……</li></ul><div class="code-wrapper"><pre><code class="hljs sql"><span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span><span class="hljs-keyword">FROM</span> customers c<span class="hljs-keyword">LEFT</span> <span class="hljs-keyword">JOIN</span> orders o<span class="hljs-keyword">ON</span> c.customer_id <span class="hljs-operator">=</span> o.customer_id<span class="hljs-keyword">LEFT</span> <span class="hljs-keyword">JOIN</span> shippers sh<span class="hljs-keyword">ON</span> o.shipper_id <span class="hljs-operator">=</span> sh.shipper_id<span class="hljs-keyword">ORDER</span> <span class="hljs-keyword">BY</span> c.customer_id;</code></pre></div><ul><li>å’Œå†…è¿æ¥ç±»ä¼¼ï¼Œå¤–è¿æ¥ä¹Ÿå¯ä»¥è‡ªè¿æ¥</li></ul><div class="code-wrapper"><pre><code class="hljs sql"><span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span><span class="hljs-keyword">FROM</span> employees m<span class="hljs-keyword">LEFT</span> <span class="hljs-keyword">JOIN</span> emplyees m<span class="hljs-keyword">ON</span> e.reports_to <span class="hljs-operator">=</span> m.emplyee_id;</code></pre></div><ul><li>å½“ä¸¤ä¸ªè¡¨çš„åˆ—åå®Œå…¨ä¸€æ ·æ—¶ï¼Œä½¿ç”¨<code>USING</code>ç®€åŒ–ï¼Œ<code>USING</code>åŒæ ·é€‚ç”¨äºæœ‰å¤šä¸ªåˆ—ä½œä¸ºé”®ç çš„æƒ…å†µ</li></ul><div class="code-wrapper"><pre><code class="hljs sql"><span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span><span class="hljs-keyword">FROM</span> orders o<span class="hljs-keyword">JOIN</span> customers c<span class="hljs-comment">-- ON o.customer_id = c.customer_id</span><span class="hljs-keyword">USING</span> (customer_id);<span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span><span class="hljs-keyword">FROM</span> order_items oi<span class="hljs-keyword">JOIN</span> order_items_notes oin<span class="hljs-comment">-- ON oi.order_id = oin.order_id</span><span class="hljs-comment">-- AND oi.product_id = oin.product_id;</span><span class="hljs-keyword">USING</span> (order_id, product_id);</code></pre></div><ul><li><code>NATURAL JOIN</code>è‡ªç„¶è¿æ¥ï¼Œä½¿ç”¨åŒåçš„å±æ€§ç»„ï¼Œå¹¶ä¸”åœ¨ç»“æœä¸­æŠŠé‡å¤çš„å±æ€§åˆ—å»æ‰ï¼Œä¸å»ºè®®ä½¿ç”¨</li></ul><div class="code-wrapper"><pre><code class="hljs sql"><span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span><span class="hljs-keyword">FROM</span> orders o<span class="hljs-keyword">NATURAL</span> <span class="hljs-keyword">JOIN</span> customers c;</code></pre></div><ul><li><code>CROSS JOIN</code>äº¤å‰è¿æ¥ï¼Œè¿”å›ç¬›å¡å°”ç§¯ï¼Œå³æ‰€æœ‰çš„ç»„åˆç»“æœ</li><li>ç¬¬ä¸€å¥ä¸ºæ˜¾å¼å†™æ³•ï¼Œç¬¬äºŒå¥ä¸ºéšå¼å†™æ³•</li></ul><div class="code-wrapper"><pre><code class="hljs sql"><span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span><span class="hljs-keyword">FROM</span> orders o<span class="hljs-keyword">CROSS</span> <span class="hljs-keyword">JOIN</span> customers c;<span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span><span class="hljs-keyword">FROM</span> orders o, customers c;</code></pre></div><ul><li><code>UNION</code>è”åˆæŸ¥è¯¢ç»“æœï¼Œä¸¤æ¬¡<code>SELECT</code>å¿…é¡»æœ‰ç›¸åŒçš„å±æ€§æ•°ï¼Œå±æ€§åä»¥ç¬¬ä¸€æ¬¡æŸ¥è¯¢ä¸ºä¸»è¿›è¡Œæ•´åˆ</li></ul><div class="code-wrapper"><pre><code class="hljs sql"><span class="hljs-keyword">SELECT</span> first_name<span class="hljs-keyword">FROM</span> archived_orders<span class="hljs-keyword">UNION</span><span class="hljs-keyword">SELECT</span> name<span class="hljs-keyword">FROM</span> orders;</code></pre></div><h1 id="æ’å…¥ã€æ›´æ–°ã€åˆ é™¤"><a href="#æ’å…¥ã€æ›´æ–°ã€åˆ é™¤" class="headerlink" title="æ’å…¥ã€æ›´æ–°ã€åˆ é™¤"></a>æ’å…¥ã€æ›´æ–°ã€åˆ é™¤</h1><ul><li><code>INSERT INTO</code>æ’å…¥å•è¡Œ</li><li><code>DEFAULT</code>å¯ç”¨äºå­˜åœ¨é»˜è®¤å€¼æˆ–é€’å¢çš„å±æ€§</li><li><code>NULL</code>å¯ç”¨äºå…è®¸ç©ºå€¼çš„å±æ€§</li><li>å¯ä»¥æŒ‡å®šè¦æ’å…¥çš„åˆ—</li></ul><div class="code-wrapper"><pre><code class="hljs sql"><span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> customers<span class="hljs-keyword">VALUES</span> (  <span class="hljs-keyword">DEFAULT</span>,   <span class="hljs-string">&#x27;John&#x27;</span>,   <span class="hljs-string">&#x27;Smith&#x27;</span>,   <span class="hljs-keyword">NULL</span>,<span class="hljs-string">&#x27;address&#x27;</span>,<span class="hljs-string">&#x27;city&#x27;</span>,<span class="hljs-string">&#x27;CA&#x27;</span>,<span class="hljs-number">200</span>);<span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> customers (first_name,last_name,birth_date,address,city,state)<span class="hljs-keyword">VALUES</span> (  <span class="hljs-string">&#x27;John&#x27;</span>,   <span class="hljs-string">&#x27;Smith&#x27;</span>,   <span class="hljs-string">&#x27;1990-01-01&#x27;</span>,<span class="hljs-string">&#x27;address&#x27;</span>,<span class="hljs-string">&#x27;city&#x27;</span>,<span class="hljs-string">&#x27;CA&#x27;</span>);</code></pre></div><ul><li>ä½¿ç”¨<code>VALUES</code>ä¹Ÿå¯ä»¥ä¸€æ¬¡æ’å…¥å¤šè¡Œ</li><li>åœ¨åˆ é™¤ä¸€äº›è¡Œçš„æƒ…å†µä¸‹ï¼Œè‡ªå¢çš„å±æ€§å€¼ä¾ç„¶ä¼šè®°ä½ä»–ä»¬ï¼Œå³å‡ºç°é€’å¢å±æ€§ä¸è¿ç»­</li></ul><div class="code-wrapper"><pre><code class="hljs sql"><span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> shippers (name)<span class="hljs-keyword">VALUES</span> (<span class="hljs-string">&#x27;Shipper1&#x27;</span>), (<span class="hljs-string">&#x27;Shipper2&#x27;</span>), (<span class="hljs-string">&#x27;Shipper3&#x27;</span>);</code></pre></div><ul><li><code>LAST_INSERT_TO()</code>è·å¾—æœ€æ–°æ‰§è¡ŒæˆåŠŸçš„<code>INSERT</code>è¯­å¥çš„è‡ªå¢id</li></ul><div class="code-wrapper"><pre><code class="hljs sql"><span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> orders (customer_id, order_date, status)<span class="hljs-keyword">VALUES</span> (<span class="hljs-number">1</span>, <span class="hljs-string">&#x27;2019-01-01&#x27;</span>, <span class="hljs-number">1</span>);<span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> order_items<span class="hljs-keyword">VALUES</span>     (last_insert_id(), <span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">2.5</span>),    (last_insert_id(), <span class="hljs-number">2</span>, <span class="hljs-number">5</span>, <span class="hljs-number">1.5</span>);</code></pre></div><ul><li><code>CREATE TABLE</code>å¯ä»¥é€šè¿‡<code>SELECT</code>è¯­å¥åˆ›å»ºåŸºäºæŸ¥è¯¢çš„å¤åˆ¶è¡¨ï¼Œå±æ€§ä¸å†æ‹¥æœ‰è‡ªå¢ï¼Œä¸»é”®ç­‰æ€§è´¨</li></ul><div class="code-wrapper"><pre><code class="hljs sql"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> orders_archived <span class="hljs-keyword">AS</span><span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> orders;</code></pre></div><ul><li><code>UPDATE</code>å…³é”®å­—å¯ç”¨äºæ›´æ–°è¡¨ä¸­çš„æŸäº›è¡Œ</li></ul><div class="code-wrapper"><pre><code class="hljs sql">UPDATE invoices<span class="hljs-keyword">SET</span> payment_total <span class="hljs-operator">=</span> <span class="hljs-number">0.5</span> <span class="hljs-operator">*</span> invoice_total,     payment_date <span class="hljs-operator">=</span> <span class="hljs-string">&#x27;2019-01-01&#x27;</span><span class="hljs-keyword">WHERE</span> invoice_id <span class="hljs-operator">=</span> <span class="hljs-number">3</span>;</code></pre></div><ul><li><code>UPDATE</code>æ“ä½œä¹Ÿå¯ä»¥ç»“åˆå­æŸ¥è¯¢ä½¿ç”¨</li><li>å­æŸ¥è¯¢æ·»åŠ æ‹¬å·ç¡®ä¿å…ˆæ‰§è¡Œ</li><li>å­æŸ¥è¯¢è¿”å›å¤šä¸ªæ•°æ®æ—¶åº”ä½¿ç”¨<code>IN</code>å…³é”®å­—</li></ul><div class="code-wrapper"><pre><code class="hljs sql">UPDATE invoices<span class="hljs-keyword">SET</span> payment_total <span class="hljs-operator">=</span> <span class="hljs-number">567</span>, payment_date <span class="hljs-operator">=</span> due_date<span class="hljs-keyword">WHERE</span> client_id <span class="hljs-operator">=</span>             (<span class="hljs-keyword">SELECT</span> client_id             <span class="hljs-keyword">FROM</span> clients            <span class="hljs-keyword">WHERE</span> name <span class="hljs-operator">=</span> <span class="hljs-string">&#x27;Yadel&#x27;</span>);UPDATE invoices<span class="hljs-keyword">SET</span> payment_total <span class="hljs-operator">=</span> <span class="hljs-number">567</span>, payment_date <span class="hljs-operator">=</span> due_date<span class="hljs-keyword">WHERE</span> client_id <span class="hljs-keyword">IN</span>             (<span class="hljs-keyword">SELECT</span> client_id             <span class="hljs-keyword">FROM</span> clients            <span class="hljs-keyword">WHERE</span> state <span class="hljs-keyword">IN</span> (<span class="hljs-string">&#x27;CA&#x27;</span>, <span class="hljs-string">&#x27;NY&#x27;</span>));</code></pre></div><ul><li><code>DELETE</code>å…³é”®å­—ç”¨äºåˆ é™¤</li><li><code>WHERE</code>å¯é€‰ï¼Œçœç•¥å°†åˆ é™¤è¡¨çš„æ‰€æœ‰è®°å½•</li></ul><div class="code-wrapper"><pre><code class="hljs sql"><span class="hljs-keyword">DELETE</span> <span class="hljs-keyword">FROM</span> invoices<span class="hljs-keyword">WHERE</span> client_id <span class="hljs-operator">=</span>             (<span class="hljs-keyword">SELECT</span> client_id              <span class="hljs-keyword">FROM</span> clients            <span class="hljs-keyword">WHERE</span> name <span class="hljs-operator">=</span> <span class="hljs-string">&#x27;Myworks&#x27;</span>);</code></pre></div><h1 id="æ±‡æ€»æ•°æ®"><a href="#æ±‡æ€»æ•°æ®" class="headerlink" title="æ±‡æ€»æ•°æ®"></a>æ±‡æ€»æ•°æ®</h1><ul><li>Mysqlå†…ç½®æœ‰<code>MAX()</code>ï¼Œ<code>MIN()</code>ï¼Œ<code>AVG()</code>ï¼Œ<code>SUM()</code>ï¼Œ<code>COUNT()</code>ç­‰èšåˆå‡½æ•°</li><li>èšåˆå‡½æ•°ä¸ä»…å¯ä»¥ç”¨äºåˆ—ï¼Œä¹Ÿå¯ä»¥ç”¨äºè¡¨è¾¾å¼</li><li>èšåˆå‡½æ•°ä¼šå¿½ç•¥ç©ºå€¼ï¼Œå¯¹äº<code>COUNT()</code>å‡½æ•°éœ€è¦æ³¨æ„</li><li><code>COUNT(*)</code>ä¸ä¼šå¿½ç•¥ç©ºå€¼ï¼Œ<code>*</code>è¡¨ç¤ºå…¨éƒ¨æ•°æ®</li><li>å¯ä»¥ä½¿ç”¨<code>DISTINCT</code>ç­›æ‰åˆ—çš„é‡å¤å€¼</li></ul><div class="code-wrapper"><pre><code class="hljs sql"><span class="hljs-keyword">SELECT</span>     <span class="hljs-built_in">MAX</span>(invoice_date) <span class="hljs-keyword">AS</span> latest_date,      <span class="hljs-built_in">MIN</span>(invoice_total) lowest,    <span class="hljs-built_in">AVG</span>(invoice_total) average,    <span class="hljs-built_in">SUM</span>(invoice_total <span class="hljs-operator">*</span> <span class="hljs-number">1.1</span>) total,    <span class="hljs-built_in">COUNT</span>(<span class="hljs-operator">*</span>) total_records,    <span class="hljs-built_in">COUNT</span>(invoice_total) number_of_invoices,     <span class="hljs-built_in">COUNT</span>(payment_date) number_of_payments,      <span class="hljs-built_in">COUNT</span>(<span class="hljs-keyword">DISTINCT</span> client_id) number_of_distinct_clients<span class="hljs-keyword">FROM</span> invoices<span class="hljs-keyword">WHERE</span> invoice_date <span class="hljs-operator">&gt;</span> <span class="hljs-string">&#x27;2019-07-01&#x27;</span>;</code></pre></div><ul><li><code>GROUP BY</code>é…åˆèšåˆå‡½æ•°ä½¿ç”¨ï¼Œè¿›è¡Œåˆ†ç»„ç»Ÿè®¡</li><li>æ³¨æ„<code>WHERE</code>ï¼Œ<code>GROUP BY</code>ï¼Œ<code>ORDER BY</code>çš„å…ˆåé¡ºåº</li><li><code>GROUP BY</code>ä¹Ÿå¯ä»¥å¤šåˆ—ç»„åˆä¸ºä¾æ®åˆ†ç»„ï¼Œé€—å·åˆ†éš”å³å¯</li></ul><div class="code-wrapper"><pre><code class="hljs sql"><span class="hljs-keyword">SELECT</span>     client_id,      <span class="hljs-built_in">SUM</span>(invoice_total) <span class="hljs-keyword">AS</span> total_sales<span class="hljs-keyword">FROM</span> invoices<span class="hljs-keyword">WHERE</span> invoice_date <span class="hljs-operator">&gt;=</span> <span class="hljs-string">&#x27;2019-07-01&#x27;</span><span class="hljs-keyword">GROUP</span> <span class="hljs-keyword">BY</span> client_id<span class="hljs-keyword">ORDER</span> <span class="hljs-keyword">BY</span> total_sales <span class="hljs-keyword">DESC</span>;<span class="hljs-keyword">SELECT</span>     state,    city,    <span class="hljs-built_in">SUM</span>(invoice_total) <span class="hljs-keyword">AS</span> total_sales<span class="hljs-keyword">FROM</span> invoices<span class="hljs-keyword">JOIN</span> clients <span class="hljs-keyword">USING</span> (client_id) <span class="hljs-keyword">GROUP</span> <span class="hljs-keyword">BY</span> state, city  <span class="hljs-keyword">ORDER</span> <span class="hljs-keyword">BY</span> state;</code></pre></div><ul><li><code>HAVING</code>å…³é”®å­—å¯¹<code>SELECT</code>åçš„ç»“æœåˆ—è¿›è¡Œäº‹åç­›é€‰ï¼Œé€šå¸¸ç”¨äºåˆ†ç»„èšåˆåæŸ¥è¯¢</li><li><code>HAVING</code>å’Œ <code>WHERE</code> éƒ½æ˜¯æ˜¯æ¡ä»¶ç­›é€‰è¯­å¥ï¼Œæ¡ä»¶å†™æ³•ç›¸é€š</li><li><code>HAVING</code>ä½¿ç”¨ç»“æœåˆ—æ˜ï¼Œ<code>WHERE</code>ä½¿ç”¨åŸè¡¨åˆ—å</li></ul><div class="code-wrapper"><pre><code class="hljs sql"><span class="hljs-keyword">SELECT</span>     client_id,    <span class="hljs-built_in">SUM</span>(invoice_total) <span class="hljs-keyword">AS</span> total_sales,    <span class="hljs-built_in">COUNT</span>(<span class="hljs-operator">*</span><span class="hljs-operator">/</span>invoice_total<span class="hljs-operator">/</span>invoice_date) <span class="hljs-keyword">AS</span> number_of_invoices<span class="hljs-keyword">FROM</span> invoices<span class="hljs-keyword">GROUP</span> <span class="hljs-keyword">BY</span> client_id<span class="hljs-keyword">HAVING</span> total_sales <span class="hljs-operator">&gt;</span> <span class="hljs-number">500</span> <span class="hljs-keyword">AND</span> number_of_invoices <span class="hljs-operator">&gt;</span> <span class="hljs-number">5</span>;</code></pre></div><ul><li>Mysqlæä¾›äº†<code>ROLLUP</code>è¿ç®—ç¬¦å¯¹èšåˆå€¼è¿›è¡Œæ±‡æ€»ï¼Œå¦‚ä¸‹å°†è¿”å›å„å®¢æˆ·çš„å‘ç¥¨æ€»é¢ä»¥åŠæ‰€æœ‰äººçš„æ€»å‘ç¥¨é¢</li><li><code>ROLLUP</code>ä¸æ˜¯æ ‡å‡†çš„SQLè¯­è¨€</li></ul><div class="code-wrapper"><pre><code class="hljs sql"><span class="hljs-keyword">SELECT</span>     client_id,    <span class="hljs-built_in">SUM</span>(invoice_total)<span class="hljs-keyword">FROM</span> invoices<span class="hljs-keyword">GROUP</span> <span class="hljs-keyword">BY</span> client_id <span class="hljs-keyword">WITH</span> <span class="hljs-keyword">ROLLUP</span>;</code></pre></div><ul><li>å½“<code>GROUP BY</code>å–å¤šåˆ—æ—¶ï¼Œ<code>ROLLUP</code>å¯ä»¥è¿›è¡Œå¤šå±‚æ±‡æ€»</li><li>ä¸‹é¢å°†è¿”å›å„å·çš„å„å¸‚çš„å‘ç¥¨æ€»é¢ä»¥åŠå·å±‚æ¬¡å’Œå…¨å›½å±‚æ¬¡çš„æ±‡æ€»é¢</li></ul><div class="code-wrapper"><pre><code class="hljs sql"><span class="hljs-keyword">SELECT</span>     state,    city,    <span class="hljs-built_in">SUM</span>(invoice_total) <span class="hljs-keyword">AS</span> total_sales<span class="hljs-keyword">FROM</span> invoices<span class="hljs-keyword">JOIN</span> clients <span class="hljs-keyword">USING</span> (client_id) <span class="hljs-keyword">GROUP</span> <span class="hljs-keyword">BY</span> state, city <span class="hljs-keyword">WITH</span> <span class="hljs-keyword">ROLLUP</span>;</code></pre></div><ul><li>ä½¿ç”¨<code>ROLLUP</code>æ—¶ï¼Œ<code>GROUP BY</code>ä¸èƒ½ä½¿ç”¨åˆ—åˆ«å</li></ul><div class="code-wrapper"><pre><code class="hljs sql"><span class="hljs-keyword">SELECT</span>     pm.name <span class="hljs-keyword">AS</span> payment_method,    <span class="hljs-built_in">SUM</span>(amount) <span class="hljs-keyword">AS</span> total<span class="hljs-keyword">FROM</span> payments p<span class="hljs-keyword">JOIN</span> payment_methods pm    <span class="hljs-keyword">ON</span> p.payment_method <span class="hljs-operator">=</span> pm.payment_method_id<span class="hljs-keyword">GROUP</span> <span class="hljs-keyword">BY</span> pm.name <span class="hljs-keyword">WITH</span> <span class="hljs-keyword">ROLLUP</span>;</code></pre></div><h1 id="ç¼–å†™å¤æ‚æŸ¥è¯¢"><a href="#ç¼–å†™å¤æ‚æŸ¥è¯¢" class="headerlink" title="ç¼–å†™å¤æ‚æŸ¥è¯¢"></a>ç¼–å†™å¤æ‚æŸ¥è¯¢</h1><ul><li>Mysqlå°†å…ˆæ‰§è¡Œæ‹¬å·å†…çš„å­æŸ¥è¯¢ï¼Œä¹‹åå°†ç»“æœè¿”å›ç»™å¤–æŸ¥è¯¢</li></ul><div class="code-wrapper"><pre><code class="hljs sql"><span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span><span class="hljs-keyword">FROM</span> products<span class="hljs-keyword">WHERE</span> unit_price <span class="hljs-operator">&gt;</span> (    <span class="hljs-keyword">SELECT</span> unit_price    <span class="hljs-keyword">FROM</span> products    <span class="hljs-keyword">WHERE</span> product_id <span class="hljs-operator">=</span> <span class="hljs-number">3</span>);<span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span><span class="hljs-keyword">FROM</span> products<span class="hljs-keyword">WHERE</span> product_id <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">IN</span> (    <span class="hljs-keyword">SELECT</span> <span class="hljs-keyword">DISTINCT</span> product_id    <span class="hljs-keyword">FROM</span> order_items);</code></pre></div><ul><li>å­æŸ¥è¯¢å°†ä¸€å¼ è¡¨çš„æŸ¥è¯¢ç»“æœä½œä¸ºå¦ä¸€å¼ è¡¨çš„æŸ¥è¯¢ä¾æ®å¹¶å±‚å±‚åµŒå¥—ï¼›é“¾æ¥å°†è¿™äº›è¡¨åˆå¹¶æˆä¸€ä¸ªåŒ…å«æ‰€éœ€å…¨éƒ¨ä¿¡æ¯çš„è¯¦æƒ…è¡¨å†ç›´æ¥åœ¨è¯¦æƒ…è¡¨é‡Œç­›é€‰æŸ¥è¯¢ï¼›ä¸¤ç§æ–¹æ³•ä¸€èˆ¬æ˜¯å¯äº’æ¢çš„ï¼Œå…·ä½“ç”¨å“ªä¸€ç§å–å†³äºæ•ˆç‡å’Œå¯è¯»æ€§</li><li>ä¾‹ï¼šæŸ¥æ‰¾ä»æœªè®¢è´­è¿‡çš„é¡¾å®¢ï¼Œä¸‹é¢ä¸¤ç§æ–¹æ³•å‡å¯è¾¾åˆ°æ•ˆæœ</li></ul><div class="code-wrapper"><pre><code class="hljs sql"><span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span><span class="hljs-keyword">FROM</span> clients<span class="hljs-keyword">WHERE</span> client_id <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">IN</span> (    <span class="hljs-keyword">SELECT</span> <span class="hljs-keyword">DISTINCT</span> client_id    <span class="hljs-keyword">FROM</span> invoices);<span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span><span class="hljs-keyword">FROM</span> clients<span class="hljs-keyword">LEFT</span> <span class="hljs-keyword">JOIN</span> invoices <span class="hljs-keyword">USING</span> (client_id)<span class="hljs-keyword">WHERE</span> invoices_id <span class="hljs-keyword">IS</span> <span class="hljs-keyword">NULL</span>;</code></pre></div><ul><li>ä¾‹ï¼šé€‰å‡ºä¹°è¿‡ç”Ÿèœï¼ˆid = 3ï¼‰çš„é¡¾å®¢çš„idï¼Œå§“å’Œåï¼Œé‡‡ç”¨æ··åˆå­æŸ¥è¯¢+è¡¨è¿æ¥çš„æ–¹æ³•</li></ul><div class="code-wrapper"><pre><code class="hljs sql"><span class="hljs-keyword">SELECT</span> customer_id, first_name, last_name<span class="hljs-keyword">FROM</span> customers<span class="hljs-keyword">WHERE</span> customer_id <span class="hljs-keyword">IN</span> (      <span class="hljs-keyword">SELECT</span> customer_id    <span class="hljs-keyword">FROM</span> orders    <span class="hljs-keyword">JOIN</span> order_items <span class="hljs-keyword">USING</span> (order_id)      <span class="hljs-keyword">WHERE</span> product_id <span class="hljs-operator">=</span> <span class="hljs-number">3</span>);</code></pre></div><ul><li><code>ALL</code>å…³é”®å­—ä»£è¡¨é›†åˆä¸­çš„ä»»æ„è®°å½•</li></ul><div class="code-wrapper"><pre><code class="hljs sql"><span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span><span class="hljs-keyword">FROM</span> invoices<span class="hljs-keyword">WHERE</span> invoice_total <span class="hljs-operator">&gt;</span> (    <span class="hljs-keyword">SELECT</span> <span class="hljs-built_in">MAX</span>(invoice_total)    <span class="hljs-keyword">FROM</span> invoices    <span class="hljs-keyword">WHERE</span> client_id <span class="hljs-operator">=</span> <span class="hljs-number">3</span>);<span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span><span class="hljs-keyword">FROM</span> invoices<span class="hljs-keyword">WHERE</span> invoice_total <span class="hljs-operator">&gt;</span> <span class="hljs-keyword">ALL</span> (    <span class="hljs-keyword">SELECT</span> invoice_total    <span class="hljs-keyword">FROM</span> invoices    <span class="hljs-keyword">WHERE</span> client_id <span class="hljs-operator">=</span> <span class="hljs-number">3</span>);</code></pre></div><ul><li><code>ANY</code>å…³é”®å­—ä»£è¡¨é›†åˆä¸­å­˜åœ¨æŸæ¡è®°å½•ï¼Œå¯ä¸<code>MIN</code>ç­‰æ•ˆ</li></ul><div class="code-wrapper"><pre><code class="hljs sql"><span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span><span class="hljs-keyword">FROM</span> invoices<span class="hljs-keyword">WHERE</span> invoice_total <span class="hljs-operator">&gt;</span> <span class="hljs-keyword">ANY</span> (<span class="hljs-keyword">SELECT</span> invoice_total<span class="hljs-keyword">FROM</span> invoices<span class="hljs-keyword">WHERE</span> client_id <span class="hljs-operator">=</span> <span class="hljs-number">3</span>);<span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span><span class="hljs-keyword">FROM</span> invoices<span class="hljs-keyword">WHERE</span> invoice_total <span class="hljs-operator">&gt;</span> (<span class="hljs-keyword">SELECT</span> <span class="hljs-built_in">MIN</span>(invoice_total)<span class="hljs-keyword">FROM</span> invoices<span class="hljs-keyword">WHERE</span> client_id <span class="hljs-operator">=</span> <span class="hljs-number">3</span>);</code></pre></div><ul><li><code>ANY</code>æŸäº›æ—¶å€™ä¹Ÿå¯ä¸<code>IN</code>ç­‰æ•ˆ</li><li>ä¾‹ï¼šé€‰æ‹©è‡³å°‘æœ‰ä¸¤æ¬¡å‘ç¥¨è®°å½•çš„é¡¾å®¢</li></ul><div class="code-wrapper"><pre><code class="hljs sql"><span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span><span class="hljs-keyword">FROM</span> clients<span class="hljs-keyword">WHERE</span> client_id <span class="hljs-keyword">IN</span> (    <span class="hljs-keyword">SELECT</span> client_id    <span class="hljs-keyword">FROM</span> invoices    <span class="hljs-keyword">GROUP</span> <span class="hljs-keyword">BY</span> client_id    <span class="hljs-keyword">HAVING</span> <span class="hljs-built_in">COUNT</span>(<span class="hljs-operator">*</span>) <span class="hljs-operator">&gt;=</span> <span class="hljs-number">2</span>);<span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span><span class="hljs-keyword">FROM</span> clients<span class="hljs-keyword">WHERE</span> client_id <span class="hljs-operator">=</span> <span class="hljs-keyword">ANY</span> (     <span class="hljs-keyword">SELECT</span> client_id    <span class="hljs-keyword">FROM</span> invoices    <span class="hljs-keyword">GROUP</span> <span class="hljs-keyword">BY</span> client_id    <span class="hljs-keyword">HAVING</span> <span class="hljs-built_in">COUNT</span>(<span class="hljs-operator">*</span>) <span class="hljs-operator">&gt;=</span> <span class="hljs-number">2</span>);</code></pre></div><ul><li>åœ¨ä¸Šé¢çš„å­æŸ¥è¯¢ä¸­ï¼Œå­æŸ¥è¯¢ä¸ä¸»æŸ¥è¯¢æ— å…³ï¼Œå¯ä»¥å…ˆè¿›è¡Œå®Œå­æŸ¥è¯¢ï¼Œå†è¿›è¡Œä¸»æŸ¥è¯¢</li><li>ç›¸å…³å­æŸ¥è¯¢ï¼Œå­æŸ¥è¯¢ä¸ä¸»æŸ¥è¯¢æœ‰å…³</li><li>ä¾‹ï¼šè¿”å›å„éƒ¨é—¨ä¸­å·¥èµ„è¶…è¿‡è¯¥éƒ¨é—¨å¹³å‡å€¼çš„äººï¼Œå¯¹äº<code>employees e</code>ä¸­çš„æ¯æ¡è®°å½•ï¼Œéƒ½å°†æ‰§è¡Œä¸€æ¬¡å­æŸ¥è¯¢</li></ul><div class="code-wrapper"><pre><code class="hljs sql"><span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span><span class="hljs-keyword">FROM</span> employees e  <span class="hljs-comment">-- å…³é”® 1</span><span class="hljs-keyword">WHERE</span> salary <span class="hljs-operator">&gt;</span> (    <span class="hljs-keyword">SELECT</span> <span class="hljs-built_in">AVG</span>(salary)    <span class="hljs-keyword">FROM</span> employees    <span class="hljs-keyword">WHERE</span> office_id <span class="hljs-operator">=</span> e.office_id  <span class="hljs-comment">-- å…³é”® 2</span>    <span class="hljs-comment">-- ã€å­æŸ¥è¯¢è¡¨å­—æ®µä¸ç”¨åŠ å‰ç¼€ï¼Œä¸»æŸ¥è¯¢è¡¨çš„å­—æ®µè¦åŠ å‰ç¼€ï¼Œä»¥æ­¤åŒºåˆ†ã€‘</span>);</code></pre></div><ul><li><code>EXISTS</code>å…³é”®å­—å¦‚æœé›†åˆä¸ä¸ºç©ºè¿”å›<code>TRUE</code>ï¼Œå¦åˆ™è¿”å›<code>FALSE</code></li><li><code>IN + å­æŸ¥è¯¢</code> ç­‰æ•ˆäº <code>EXIST + ç›¸å…³å­æŸ¥è¯¢</code>ï¼Œå¦‚å‰è€…å­æŸ¥è¯¢ç»“æœé›†è¿‡å¤§å ç”¨å†…å­˜ï¼Œåè€…é€æ¡éªŒè¯æ›´æœ‰æ•ˆç‡</li></ul><div class="code-wrapper"><pre><code class="hljs sql"><span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span><span class="hljs-keyword">FROM</span> clients<span class="hljs-keyword">WHERE</span> client_id <span class="hljs-keyword">IN</span> (    <span class="hljs-keyword">SELECT</span> <span class="hljs-keyword">DISTINCT</span> client_id    <span class="hljs-keyword">FROM</span> invoices);<span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span><span class="hljs-keyword">FROM</span> clients c<span class="hljs-keyword">WHERE</span> <span class="hljs-keyword">EXISTS</span> (    <span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span>    <span class="hljs-comment">-- å°±è¿™ä¸ªå­æŸ¥è¯¢çš„ç›®çš„æ¥è¯´ï¼ŒSELECTçš„é€‰æ‹©ä¸å½±å“ç»“æœï¼Œ</span>    <span class="hljs-comment">-- å› ä¸ºEXISTS()å‡½æ•°åªæ ¹æ®æ˜¯å¦ä¸ºç©ºè¿”å›ç»“æœ</span>    <span class="hljs-keyword">FROM</span> invoices    <span class="hljs-keyword">WHERE</span> client_id <span class="hljs-operator">=</span> c.client_id);</code></pre></div><ul><li><code>EXISTS()</code>è¿”å›çš„æ˜¯ <code>TRUE/FALSE</code>ï¼Œæ‰€ä»¥ä¹Ÿå¯ä»¥åŠ ä¸Š<code>NOT</code>å–å</li></ul><div class="code-wrapper"><pre><code class="hljs sql"><span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span><span class="hljs-keyword">FROM</span> products <span class="hljs-keyword">WHERE</span> product_id <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">IN</span> (    <span class="hljs-keyword">FROM</span> order_items);<span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span><span class="hljs-keyword">FROM</span> products p<span class="hljs-keyword">WHERE</span> <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">EXISTS</span> (    <span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span>    <span class="hljs-keyword">FROM</span> order_items    <span class="hljs-keyword">WHERE</span> product_id <span class="hljs-operator">=</span> p.product_id);</code></pre></div><ul><li>ä¾‹ï¼šç»å…¸é¢˜ç›®ï¼Œé€‰æ‹©æ²¡æœ‰é€‰æ‰€æœ‰è¯¾çš„å­¦ç”Ÿ</li></ul><div class="code-wrapper"><pre><code class="hljs sql"><span class="hljs-comment">-- é€‰æ‹©æ²¡æœ‰é€‰æ‰€æœ‰è¯¾çš„å­¦ç”Ÿ</span><span class="hljs-comment">-- å­˜åœ¨æŸä¸€æ ·è¯¾ï¼Œè¯¥å­¦ç”Ÿæ²¡æœ‰å¯¹åº”çš„é€‰è¯¾è®°å½•</span><span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span><span class="hljs-keyword">FROM</span> stu s<span class="hljs-keyword">WHERE</span> <span class="hljs-keyword">EXISTS</span>(  <span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span>  <span class="hljs-keyword">FROM</span> class c  <span class="hljs-keyword">WHERE</span> <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">EXISTS</span>(      <span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span>      <span class="hljs-keyword">FROM</span> stu_class      <span class="hljs-keyword">WHERE</span> stu_id <span class="hljs-operator">=</span> s.stu_id <span class="hljs-keyword">AND</span> class_id <span class="hljs-operator">=</span> c.class_id    ));</code></pre></div><ul><li>å­æŸ¥è¯¢æˆ–ç›¸å…³å­æŸ¥è¯¢ä¹Ÿå¯ç”¨äº<code>SELECT</code>ä¸­</li><li>å¼•ç”¨åŒçº§çš„åˆ—åˆ«åï¼Œéœ€è¦ä½¿ç”¨<code>SELECT</code>ï¼Œå¼•ç”¨åŒçº§çš„åˆ—åˆ«åä¸éœ€è¦è¯´æ˜æ¥æº</li><li>ä¸‹é¢çš„ä¾‹å­ä¸­æœ‰ä¸‰ä¸ªå­æŸ¥è¯¢ï¼Œç¬¬ä¸€ä¸ªä¸ºç›¸å…³å­æŸ¥è¯¢ï¼Œè¡¨ç¤ºæŸé¡¾å®¢è®¢å•æ€»é‡ï¼Œç¬¬äºŒä¸ªä¸ºå­æŸ¥è¯¢ï¼Œè¡¨ç¤ºæ‰€æœ‰è®¢å•å¹³å‡å€¼ï¼Œç¬¬ä¸‰ä¸ªå¼•ç”¨åŒçº§çš„åˆ—åˆ«åï¼Œè¡¨ç¤ºå‰ä¸¤è€…çš„å·®</li></ul><div class="code-wrapper"><pre><code class="hljs sql"><span class="hljs-keyword">SELECT</span>     client_id,    name,    (<span class="hljs-keyword">SELECT</span> <span class="hljs-built_in">SUM</span>(invoice_total) <span class="hljs-keyword">FROM</span> invoices <span class="hljs-keyword">WHERE</span> client_id <span class="hljs-operator">=</span> c.client_id) <span class="hljs-keyword">AS</span> total_sales,    (<span class="hljs-keyword">SELECT</span> <span class="hljs-built_in">AVG</span>(invoice_total) <span class="hljs-keyword">FROM</span> invoices) <span class="hljs-keyword">AS</span> average,    (<span class="hljs-keyword">SELECT</span> total_sales <span class="hljs-operator">-</span> average) <span class="hljs-keyword">AS</span> difference   <span class="hljs-keyword">FROM</span> clients c;</code></pre></div><ul><li>å­æŸ¥è¯¢ä¹Ÿå¯ç”¨äº<code>FROM</code>ä¸­</li><li>å½“å­æŸ¥è¯¢å¤ªå¤æ‚æ—¶åº”ä½¿ç”¨è§†å›¾å°†å­æŸ¥è¯¢ç»“æœå‚¨å­˜èµ·æ¥ï¼Œä½¿ç”¨è§†å›¾ä½œä¸ºæ¥æºè¡¨</li><li>åœ¨FROMä¸­ä½¿ç”¨å­æŸ¥è¯¢ï¼Œå³ä½¿ç”¨ â€œæ´¾ç”Ÿè¡¨â€ æ—¶ï¼Œå¿…é¡»ç»™æ´¾ç”Ÿè¡¨å–ä¸ªåˆ«å</li></ul><div class="code-wrapper"><pre><code class="hljs sql"><span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> (    <span class="hljs-keyword">SELECT</span>         client_id,        name,        (<span class="hljs-keyword">SELECT</span> <span class="hljs-built_in">SUM</span>(invoice_total) <span class="hljs-keyword">FROM</span> invoices <span class="hljs-keyword">WHERE</span> client_id <span class="hljs-operator">=</span> c.client_id) <span class="hljs-keyword">AS</span> total_sales,        (<span class="hljs-keyword">SELECT</span> <span class="hljs-built_in">AVG</span>(invoice_total) <span class="hljs-keyword">FROM</span> invoices) <span class="hljs-keyword">AS</span> average,        (<span class="hljs-keyword">SELECT</span> total_sales <span class="hljs-operator">-</span> average) <span class="hljs-keyword">AS</span> difference       <span class="hljs-keyword">FROM</span> clients c) <span class="hljs-keyword">AS</span> sales_summury<span class="hljs-keyword">WHERE</span> total_sales <span class="hljs-keyword">IS</span> <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>;</code></pre></div><h1 id="åŸºæœ¬å‡½æ•°"><a href="#åŸºæœ¬å‡½æ•°" class="headerlink" title="åŸºæœ¬å‡½æ•°"></a>åŸºæœ¬å‡½æ•°</h1><p>å†…ç½®çš„ç”¨æ¥å¤„ç†æ•°å€¼ã€æ–‡æœ¬ã€æ—¥æœŸç­‰çš„å‡½æ•°</p><ul><li>æ•°å€¼å‡½æ•°</li></ul><div class="code-wrapper"><pre><code class="hljs sql"><span class="hljs-keyword">SELECT</span> ROUND(<span class="hljs-number">5.7365</span>, <span class="hljs-number">2</span>)  <span class="hljs-comment">-- å››èˆäº”å…¥</span><span class="hljs-keyword">SELECT</span> <span class="hljs-keyword">TRUNCATE</span>(<span class="hljs-number">5.7365</span>, <span class="hljs-number">2</span>)  <span class="hljs-comment">-- æˆªæ–­</span><span class="hljs-keyword">SELECT</span> <span class="hljs-built_in">CEILING</span>(<span class="hljs-number">5.2</span>)  <span class="hljs-comment">-- å¤©èŠ±æ¿å‡½æ•°ï¼Œå¤§äºç­‰äºæ­¤æ•°çš„æœ€å°æ•´æ•°</span><span class="hljs-keyword">SELECT</span> <span class="hljs-built_in">FLOOR</span>(<span class="hljs-number">5.6</span>)  <span class="hljs-comment">-- åœ°æ¿å‡½æ•°ï¼Œå°äºç­‰äºæ­¤æ•°çš„æœ€å¤§æ•´æ•°</span><span class="hljs-keyword">SELECT</span> <span class="hljs-built_in">ABS</span>(<span class="hljs-number">-5.2</span>)  <span class="hljs-comment">-- ç»å¯¹å€¼</span><span class="hljs-keyword">SELECT</span> RAND()  <span class="hljs-comment">-- éšæœºå‡½æ•°ï¼Œ0åˆ°1çš„éšæœºå€¼</span></code></pre></div><ul><li>å­—ç¬¦ä¸²å‡½æ•°</li></ul><div class="code-wrapper"><pre><code class="hljs sql"><span class="hljs-keyword">SELECT</span> LENGTH(<span class="hljs-string">&#x27;sky&#x27;</span>)  <span class="hljs-comment">-- å­—ç¬¦ä¸²å­—ç¬¦ä¸ªæ•°</span><span class="hljs-keyword">SELECT</span> <span class="hljs-built_in">UPPER</span>(<span class="hljs-string">&#x27;sky&#x27;</span>)  <span class="hljs-comment">-- è½¬å¤§å†™</span><span class="hljs-keyword">SELECT</span> <span class="hljs-built_in">LOWER</span>(<span class="hljs-string">&#x27;Sky&#x27;</span>)  <span class="hljs-comment">-- è½¬å°å†™</span><span class="hljs-keyword">SELECT</span> LTRIM(<span class="hljs-string">&#x27;  Sky&#x27;</span>)  <span class="hljs-comment">-- å»é™¤å·¦å¤šä½™ç©ºæ ¼</span><span class="hljs-keyword">SELECT</span> RTRIM(<span class="hljs-string">&#x27;Sky  &#x27;</span>)  <span class="hljs-comment">-- å»é™¤å³å¤šä½™ç©ºæ ¼</span><span class="hljs-keyword">SELECT</span> <span class="hljs-built_in">TRIM</span>(<span class="hljs-string">&#x27; Sky &#x27;</span>)  <span class="hljs-comment">-- å»é™¤å¤šä½™ç©ºæ ¼</span><span class="hljs-keyword">SELECT</span> <span class="hljs-keyword">LEFT</span>(<span class="hljs-string">&#x27;Kindergarden&#x27;</span>, <span class="hljs-number">4</span>)  <span class="hljs-comment">-- å–å·¦4ä¸ªå­—ç¬¦</span><span class="hljs-keyword">SELECT</span> <span class="hljs-keyword">RIGHT</span>(<span class="hljs-string">&#x27;Kindergarden&#x27;</span>, <span class="hljs-number">6</span>)  <span class="hljs-comment">-- å–å³6ä¸ªå­—ç¬¦</span><span class="hljs-keyword">SELECT</span> <span class="hljs-built_in">SUBSTRING</span>(<span class="hljs-string">&#x27;Kindergarden&#x27;</span>, <span class="hljs-number">7</span>, <span class="hljs-number">6</span>)  <span class="hljs-comment">-- ä»ç¬¬7ä¸ªå¼€å§‹é•¿åº¦ä¸º6çš„å­ä¸²ï¼Œçœç•¥é•¿åº¦å‚æ•°åˆ™å–åˆ°æœ«ç«¯</span><span class="hljs-keyword">SELECT</span> LOCATE(<span class="hljs-string">&#x27;gar&#x27;</span>, <span class="hljs-string">&#x27;Kindergarden&#x27;</span>)  <span class="hljs-comment">-- å®šä½é¦–æ¬¡å‡ºç°çš„ä½ç½®ï¼Œæ²¡æœ‰çš„è¯è¿”å›0ï¼Œä¸åŒºåˆ†å¤§å°å†™</span><span class="hljs-keyword">SELECT</span> REPLACE(<span class="hljs-string">&#x27;Kindergarten&#x27;</span>, <span class="hljs-string">&#x27;garten&#x27;</span>, <span class="hljs-string">&#x27;garden&#x27;</span>)  <span class="hljs-comment">-- æ›¿æ¢</span><span class="hljs-keyword">SELECT</span> CONCAT(f_name, <span class="hljs-string">&#x27; &#x27;</span>, l_name) <span class="hljs-keyword">AS</span> f_name <span class="hljs-keyword">FROM</span> customers  <span class="hljs-comment">-- è¿æ¥</span></code></pre></div><ul><li>å¤„ç†æ—¶é—´æ—¥æœŸçš„å‡½æ•°</li></ul><div class="code-wrapper"><pre><code class="hljs sql"><span class="hljs-comment">-- å½“å‰æ—¶é—´æ—¥æœŸå¯¹è±¡</span><span class="hljs-keyword">SELECT</span> NOW()  <span class="hljs-comment">-- 2021-08-27 08:50:46</span><span class="hljs-keyword">SELECT</span> CURDATE()  <span class="hljs-comment">-- 2021-08-27</span><span class="hljs-keyword">SELECT</span> CURTIME()  <span class="hljs-comment">-- 08:50:46</span><span class="hljs-comment">-- æå–æ—¶é—´æ—¥æœŸå¯¹è±¡ä¸­çš„å…ƒç´ </span><span class="hljs-keyword">SELECT</span> <span class="hljs-keyword">YEAR</span>(NOW())  <span class="hljs-comment">-- 2021</span><span class="hljs-keyword">SELECT</span> DAYNAME(NOW())  <span class="hljs-comment">-- Saturday</span><span class="hljs-keyword">SELECT</span> MONTHNAME(NOW())  <span class="hljs-comment">-- September</span></code></pre></div><ul><li>æ—¥æœŸæ ¼å¼åŒ–ï¼Œæ ¼å¼è¯´æ˜ç¬¦é‡Œï¼Œå¤§å°å†™æ˜¯ä¸åŒçš„ï¼Œè¿™æ˜¯ç›®å‰SQLé‡Œç¬¬ä¸€æ¬¡å‡ºç°å¤§å°å†™ä¸åŒçš„æƒ…å†µ</li></ul><div class="code-wrapper"><pre><code class="hljs sql"><span class="hljs-keyword">SELECT</span> DATE_FORMAT(NOW(), <span class="hljs-string">&#x27;%M %d, %Y&#x27;</span>)  <span class="hljs-comment">-- September 12, 2020</span><span class="hljs-keyword">SELECT</span> TIME_FORMAT(NOW(), <span class="hljs-string">&#x27;%H:%i %p&#x27;</span>)  <span class="hljs-comment">-- 11:07 AM</span></code></pre></div><h1 id="SELECT-è¯­å¥æ‰§è¡Œé¡ºåº"><a href="#SELECT-è¯­å¥æ‰§è¡Œé¡ºåº" class="headerlink" title="SELECT è¯­å¥æ‰§è¡Œé¡ºåº"></a>SELECT è¯­å¥æ‰§è¡Œé¡ºåº</h1><p>å…¶ä¸­æ¯ä¸€ä¸ªæ“ä½œéƒ½ä¼šäº§ç”Ÿä¸€å¼ è™šæ‹Ÿçš„è¡¨ï¼Œè¿™ä¸ªè™šæ‹Ÿçš„è¡¨ä½œä¸ºä¸€ä¸ªå¤„ç†çš„è¾“å…¥ï¼Œåªæ˜¯è¿™äº›è™šæ‹Ÿçš„è¡¨å¯¹ç”¨æˆ·æ¥è¯´æ˜¯é€æ˜çš„ï¼Œåªæœ‰æœ€åä¸€ä¸ªè™šæ‹Ÿçš„è¡¨æ‰ä¼šè¢«ä½œä¸ºç»“æœè¿”å›ã€‚ </p><ol><li>FORMï¼šå¯¹è¡¨è®¡ç®—ç¬›å¡å°”ç§¯ï¼Œäº§ç”Ÿè™šè¡¨VT1ã€‚</li><li>ONï¼šå¯¹è™šè¡¨VT1è¿›è¡ŒONç­›é€‰ï¼Œåªæœ‰é‚£äº›ç¬¦åˆ<code>join-condition</code>çš„è¡Œæ‰ä¼šè¢«è®°å½•åœ¨è™šè¡¨VT2ä¸­ã€‚</li><li>JOINï¼šå¦‚æœæŒ‡å®šäº†OUTER JOINï¼ˆæ¯”å¦‚left joinã€ right joinï¼‰ï¼Œé‚£ä¹ˆä¿ç•™è¡¨ä¸­æœªåŒ¹é…çš„è¡Œå°±ä¼šä½œä¸ºå¤–éƒ¨è¡Œæ·»åŠ åˆ°è™šæ‹Ÿè¡¨VT2ä¸­ï¼Œäº§ç”Ÿè™šæ‹Ÿè¡¨VT3, å¦‚æœfromå­å¥ä¸­åŒ…å«ä¸¤ä¸ªä»¥ä¸Šçš„è¡¨çš„è¯ï¼Œé‚£ä¹ˆå°±ä¼šå¯¹ä¸Šä¸€ä¸ªjoinè¿æ¥äº§ç”Ÿçš„ç»“æœVT3å’Œä¸‹ä¸€ä¸ªè¡¨é‡å¤æ‰§è¡Œæ­¥éª¤1~3è¿™ä¸‰ä¸ªæ­¥éª¤ï¼Œä¸€ç›´åˆ°å¤„ç†å®Œæ‰€æœ‰çš„è¡¨ä¸ºæ­¢ã€‚</li><li>WHEREï¼šå¯¹è™šæ‹Ÿè¡¨VT3è¿›è¡ŒWHEREæ¡ä»¶è¿‡æ»¤ã€‚åªæœ‰ç¬¦åˆ<code>where-condition</code>çš„è®°å½•æ‰ä¼šè¢«æ’å…¥åˆ°è™šæ‹Ÿè¡¨VT4ä¸­ã€‚</li><li>GROUP BYï¼šæ ¹æ®group byå­å¥ä¸­çš„åˆ—ï¼Œå¯¹VT4ä¸­çš„è®°å½•è¿›è¡Œåˆ†ç»„æ“ä½œï¼Œäº§ç”ŸVT5ã€‚</li><li>HAVINGï¼šå¯¹è™šæ‹Ÿè¡¨VT5åº”ç”¨havingè¿‡æ»¤ï¼Œåªæœ‰ç¬¦åˆ<code>having-condition</code>çš„è®°å½•æ‰ä¼šè¢«æ’å…¥åˆ°è™šæ‹Ÿè¡¨VT6ä¸­ã€‚</li><li>SELECTï¼šæ‰§è¡Œselectæ“ä½œï¼Œé€‰æ‹©æŒ‡å®šçš„åˆ—ï¼Œæ’å…¥åˆ°è™šæ‹Ÿè¡¨VT7ä¸­ã€‚</li><li>DISTINCTï¼šå¯¹VT7ä¸­çš„è®°å½•è¿›è¡Œå»é‡ã€‚äº§ç”Ÿè™šæ‹Ÿè¡¨VT8ã€‚</li><li>ORDER BY: å°†è™šæ‹Ÿè¡¨VT8ä¸­çš„è®°å½•æŒ‰ç…§<order_by_list>è¿›è¡Œæ’åºæ“ä½œï¼Œäº§ç”Ÿè™šæ‹Ÿè¡¨VT9ã€‚</li><li>LIMITï¼šå–å‡ºæŒ‡å®šè¡Œçš„è®°å½•ï¼Œäº§ç”Ÿè™šæ‹Ÿè¡¨VT10,å¹¶å°†ç»“æœè¿”å›ã€‚</li></ol><h1 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h1><p><a href="https://www.bilibili.com/video/BV1UE41147KC?p=34">ä¼Ÿå¤§çš„æµ·ä¼¦å›.SQLè¿›é˜¶æ•™ç¨‹</a></p><p><a href="https://zhuanlan.zhihu.com/p/222865842">ASC2050.Moshå®Œå…¨æŒæ¡SQLç¬”è®°</a></p>]]></content>
    
    
    <categories>
      
      <category>è®¡ç®—æœºåŸºç¡€</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>è®¡ç®—æœºç½‘ç»œé¢è¯•</title>
    <link href="/2021/08/07/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E7%AC%94%E8%AE%B0/"/>
    <url>/2021/08/07/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E7%AC%94%E8%AE%B0/</url>
    
    <content type="html"><![CDATA[<h1 id="åŸºç¡€ç¯‡"><a href="#åŸºç¡€ç¯‡" class="headerlink" title="åŸºç¡€ç¯‡"></a>åŸºç¡€ç¯‡</h1><h2 id="ç‰©ç†å±‚"><a href="#ç‰©ç†å±‚" class="headerlink" title="ç‰©ç†å±‚"></a>ç‰©ç†å±‚</h2><p>é€šè¿‡å…‰ç¼†ã€ç”µç¼†ã€åŒç»çº¿ã€æ— çº¿ç”µæ³¢ç­‰æ–¹å¼å°†ç”µè„‘è¿æ¥èµ·æ¥ï¼Œå°†æ•°æ®åŒ…è½¬åŒ–ä¸º0å’Œ1çš„ç”µä¿¡å·è¿›è¡Œä¼ è¾“ï¼Œä¸»è¦è§„å®šç½‘ç»œçš„ä¸€äº›ç”µæ°”ç‰¹æ€§ã€‚</p><h2 id="é“¾æ¥å±‚"><a href="#é“¾æ¥å±‚" class="headerlink" title="é“¾æ¥å±‚"></a>é“¾æ¥å±‚</h2><p>é“¾æ¥å±‚è§„å®šäº†0å’Œ1çš„åˆ†ç»„æ–¹å¼ï¼Œå³å¦‚ä½•è§£è¯»è·å¾—çš„01ä¸²ã€‚</p><p class="note note-primary">  <b>ä»¥å¤ªç½‘åè®®</b></p><p>ä»¥å¤ªç½‘åè®®è§„å®šï¼Œä¸€ç»„ç”µä¿¡å·æ„æˆä¸€ä¸ªæ•°æ®åŒ…ï¼šâ€œå¸§â€ï¼Œæ¯ä¸€å¸§åŒ…æ‹¬æ ‡å¤´ï¼ˆHeadï¼‰å’Œæ•°æ®ï¼ˆDataï¼‰ã€‚</p><p>â€œæ ‡å¤´â€åŒ…å«æ•°æ®åŒ…çš„ä¸€äº›è¯´æ˜é¡¹ï¼Œæ¯”å¦‚å‘é€è€…ã€æ¥å—è€…ã€æ•°æ®ç±»å‹ç­‰ç­‰ï¼›â€æ•°æ®â€åˆ™æ˜¯æ•°æ®åŒ…çš„å…·ä½“å†…å®¹ã€‚</p><p>â€œæ ‡å¤´â€çš„é•¿åº¦ï¼Œå›ºå®šä¸º18å­—èŠ‚ã€‚â€æ•°æ®â€çš„é•¿åº¦ï¼Œæœ€çŸ­ä¸º46å­—èŠ‚ï¼Œæœ€é•¿ä¸º1500å­—èŠ‚ã€‚å› æ­¤ï¼Œæ•´ä¸ªâ€å¸§â€æœ€çŸ­ä¸º64å­—èŠ‚ï¼Œæœ€é•¿ä¸º1518å­—èŠ‚ã€‚å¦‚æœæ•°æ®å¾ˆé•¿ï¼Œå°±å¿…é¡»åˆ†å‰²æˆå¤šä¸ªå¸§è¿›è¡Œå‘é€ã€‚</p><p class="note note-primary">  <b>MACåœ°å€</b></p><p>ä»¥å¤ªç½‘è§„å®šï¼Œè¿å…¥ç½‘ç»œçš„æ‰€æœ‰è®¾å¤‡ï¼Œéƒ½å¿…é¡»å…·æœ‰â€ç½‘å¡â€æ¥å£ã€‚æ•°æ®åŒ…å¿…é¡»æ˜¯ä»ä¸€å—ç½‘å¡ï¼Œä¼ é€åˆ°å¦ä¸€å—ç½‘å¡ã€‚ç½‘å¡çš„åœ°å€ï¼Œå°±æ˜¯æ•°æ®åŒ…çš„å‘é€åœ°å€å’Œæ¥æ”¶åœ°å€ï¼Œå«åšMACåœ°å€ã€‚</p><p>æ¯å—ç½‘å¡å‡ºå‚çš„æ—¶å€™ï¼Œéƒ½æœ‰ä¸€ä¸ªå…¨ä¸–ç•Œç‹¬ä¸€æ— äºŒçš„MACåœ°å€ï¼Œé•¿åº¦æ˜¯48ä¸ªäºŒè¿›åˆ¶ä½ï¼Œé€šå¸¸ç”¨12ä¸ªåå…­è¿›åˆ¶æ•°è¡¨ç¤ºï¼Œå¦‚<code>00-B0-D0-86-BB-F7</code>ï¼Œå‰6ä¸ªåå…­è¿›åˆ¶æ•°æ˜¯å‚å•†ç¼–å·ï¼Œå6ä¸ªæ˜¯è¯¥å‚å•†çš„ç½‘å¡æµæ°´å·ã€‚æœ‰äº†MACåœ°å€ï¼Œå°±å¯ä»¥å®šä½ç½‘å¡å’Œæ•°æ®åŒ…çš„è·¯å¾„äº†ã€‚</p><p class="note note-primary">  <b>å¹¿æ’­</b></p><p>ä»¥å¤ªç½‘æ•°æ®åŒ…å¿…é¡»çŸ¥é“æ¥æ”¶æ–¹çš„MACåœ°å€ï¼Œç„¶åæ‰èƒ½å‘é€ï¼Œéœ€è¦ç”¨åˆ°ARPåè®®ï¼Œè¿™ä¸ªç•™åˆ°åé¢ä»‹ç»ã€‚</p><p>æœ‰äº†MACåœ°å€åï¼Œä¸ºäº†æŠŠæ•°æ®åŒ…å‡†ç¡®é€åˆ°æ¥æ”¶æ–¹ï¼Œä»¥å¤ªç½‘é‡‡ç”¨äº†ä¸€ç§å¾ˆâ€åŸå§‹â€çš„æ–¹å¼ï¼Œå®ƒå‘æœ¬ç½‘ç»œå†…æ‰€æœ‰è®¡ç®—æœºå‘é€æ•°æ®åŒ…ï¼Œæ¯å°è®¡ç®—æœºè‡ªå·±åˆ¤æ–­æ˜¯å¦ä¸ºæ¥æ”¶æ–¹ã€‚</p><h2 id="ç½‘ç»œå±‚"><a href="#ç½‘ç»œå±‚" class="headerlink" title="ç½‘ç»œå±‚"></a>ç½‘ç»œå±‚</h2><p class="note note-primary">  <b>ç½‘ç»œå±‚çš„ç”±æ¥</b></p><p>äº’è”ç½‘æ˜¯æ— æ•°å­ç½‘ç»œå…±åŒç»„æˆçš„ä¸€ä¸ªå·¨å‹ç½‘ç»œï¼Œä»¥å¤ªç½‘é‡‡ç”¨å¹¿æ’­æ–¹å¼å‘é€æ•°æ®åŒ…ï¼Œæ‰€æœ‰æˆå‘˜äººæ‰‹ä¸€â€åŒ…â€ï¼Œä¸ä»…æ•ˆç‡ä½ï¼Œè€Œä¸”å±€é™åœ¨å‘é€è€…æ‰€åœ¨çš„å­ç½‘ç»œã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚æœä¸¤å°è®¡ç®—æœºä¸åœ¨åŒä¸€ä¸ªå­ç½‘ç»œï¼Œå¹¿æ’­æ˜¯ä¼ ä¸è¿‡å»çš„ã€‚è¿™ç§è®¾è®¡æ˜¯åˆç†çš„ï¼Œå¦åˆ™äº’è”ç½‘ä¸Šæ¯ä¸€å°è®¡ç®—æœºéƒ½ä¼šæ”¶åˆ°æ‰€æœ‰åŒ…ï¼Œé‚£ä¼šå¼•èµ·ç¾éš¾ã€‚</p><p>å› æ­¤ï¼Œå¿…é¡»æ‰¾åˆ°ä¸€ç§æ–¹æ³•ï¼Œèƒ½å¤ŸåŒºåˆ†å“ªäº›MACåœ°å€å±äºåŒä¸€ä¸ªå­ç½‘ç»œï¼Œå“ªäº›ä¸æ˜¯ã€‚å¦‚æœæ˜¯åŒä¸€ä¸ªå­ç½‘ç»œï¼Œå°±é‡‡ç”¨å¹¿æ’­æ–¹å¼å‘é€ï¼Œå¦åˆ™å°±é‡‡ç”¨â€è·¯ç”±â€æ–¹å¼å‘é€ã€‚â€è·¯ç”±â€ï¼Œå°±æ˜¯æŒ‡å¦‚ä½•å‘ä¸åŒçš„å­ç½‘ç»œåˆ†å‘æ•°æ®åŒ…ã€‚é—æ†¾çš„æ˜¯ï¼ŒMACåœ°å€æœ¬èº«æ— æ³•åšåˆ°è¿™ä¸€ç‚¹ã€‚å®ƒåªä¸å‚å•†æœ‰å…³ï¼Œä¸æ‰€å¤„ç½‘ç»œæ— å…³ã€‚</p><p>è¿™å°±å¯¼è‡´äº†â€ç½‘ç»œå±‚â€çš„è¯ç”Ÿã€‚å®ƒå¼•è¿›ä¸€å¥—æ–°çš„åœ°å€ï¼Œä½¿å¾—æˆ‘ä»¬èƒ½å¤ŸåŒºåˆ†ä¸åŒçš„è®¡ç®—æœºæ˜¯å¦å±äºåŒä¸€ä¸ªå­ç½‘ç»œã€‚è¿™å¥—åœ°å€å°±å«åšâ€ç½‘ç»œåœ°å€â€ï¼Œç®€ç§°â€ç½‘å€â€ã€‚</p><p>â€œç½‘ç»œå±‚â€å‡ºç°ä»¥åï¼Œæ¯å°è®¡ç®—æœºæœ‰äº†ä¸¤ç§åœ°å€ï¼Œä¸€ç§æ˜¯MACåœ°å€ï¼Œå¦ä¸€ç§æ˜¯ç½‘ç»œåœ°å€ã€‚ä¸¤ç§åœ°å€ä¹‹é—´æ²¡æœ‰ä»»ä½•è”ç³»ï¼ŒMACåœ°å€æ˜¯ç»‘å®šåœ¨ç½‘å¡ä¸Šçš„ï¼Œç½‘ç»œåœ°å€åˆ™æ˜¯ç®¡ç†å‘˜åˆ†é…çš„ï¼Œå®ƒä»¬åªæ˜¯éšæœºç»„åˆåœ¨ä¸€èµ·ã€‚</p><p>ç½‘ç»œåœ°å€å¸®åŠ©æˆ‘ä»¬ç¡®å®šè®¡ç®—æœºæ‰€åœ¨çš„å­ç½‘ç»œï¼ŒMACåœ°å€åˆ™å°†æ•°æ®åŒ…é€åˆ°è¯¥å­ç½‘ç»œä¸­çš„ç›®æ ‡ç½‘å¡ã€‚ä»é€»è¾‘ä¸Šå¯ä»¥æ¨æ–­ï¼Œå¿…å®šæ˜¯å…ˆå¤„ç†ç½‘ç»œåœ°å€ï¼Œç„¶åå†å¤„ç†MACåœ°å€ã€‚</p><p class="note note-primary">  <b>IPåè®®</b></p><p>è§„å®šç½‘ç»œåœ°å€çš„åè®®ï¼Œå«åšIPåè®®ã€‚å®ƒæ‰€å®šä¹‰çš„åœ°å€ï¼Œå°±è¢«ç§°ä¸ºIPåœ°å€ã€‚</p><p>ç›®å‰ï¼Œå¹¿æ³›é‡‡ç”¨çš„æ˜¯IPåè®®ç¬¬å››ç‰ˆï¼Œç®€ç§°IPv4ã€‚è¿™ä¸ªç‰ˆæœ¬è§„å®šï¼Œç½‘ç»œåœ°å€ç”±32ä¸ªäºŒè¿›åˆ¶ä½ç»„æˆï¼Œä¹ æƒ¯ä¸Šï¼Œæˆ‘ä»¬ç”¨åˆ†æˆå››æ®µçš„åè¿›åˆ¶æ•°è¡¨ç¤ºIPåœ°å€ï¼Œä»<code>0.0.0.0</code>ä¸€ç›´åˆ°<code>255.255.255.255</code>ã€‚</p><p>äº’è”ç½‘ä¸Šçš„æ¯ä¸€å°è®¡ç®—æœºï¼Œéƒ½ä¼šåˆ†é…åˆ°ä¸€ä¸ªIPåœ°å€ã€‚è¿™ä¸ªåœ°å€åˆ†æˆä¸¤ä¸ªéƒ¨åˆ†ï¼Œå‰ä¸€éƒ¨åˆ†ä»£è¡¨ç½‘ç»œï¼Œåä¸€éƒ¨åˆ†ä»£è¡¨ä¸»æœºã€‚</p><p>é‚£ä¹ˆï¼Œæ€æ ·æ‰èƒ½ä»IPåœ°å€ï¼Œåˆ¤æ–­ä¸¤å°è®¡ç®—æœºæ˜¯å¦å±äºåŒä¸€ä¸ªå­ç½‘ç»œå‘¢ï¼Ÿè¿™å°±è¦ç”¨åˆ°å¦ä¸€ä¸ªå‚æ•°â€å­ç½‘æ©ç â€ï¼ˆsubnet maskï¼‰ã€‚</p><p>æ‰€è°“â€å­ç½‘æ©ç â€ï¼Œå°±æ˜¯è¡¨ç¤ºå­ç½‘ç»œç‰¹å¾çš„ä¸€ä¸ªå‚æ•°ã€‚å®ƒåœ¨å½¢å¼ä¸Šç­‰åŒäºIPåœ°å€ï¼Œä¹Ÿæ˜¯ä¸€ä¸ª32ä½äºŒè¿›åˆ¶æ•°å­—ï¼Œå®ƒçš„ç½‘ç»œéƒ¨åˆ†å…¨éƒ¨ä¸º1ï¼Œä¸»æœºéƒ¨åˆ†å…¨éƒ¨ä¸º0ã€‚æ¯”å¦‚ï¼ŒIPåœ°å€<code>172.16.254.1</code>ï¼Œå¦‚æœå·²çŸ¥ç½‘ç»œéƒ¨åˆ†æ˜¯å‰24ä½ï¼Œä¸»æœºéƒ¨åˆ†æ˜¯å8ä½ï¼Œé‚£ä¹ˆå­ç½‘ç»œæ©ç å°±æ˜¯<code>255.255.255.0</code>ã€‚</p><p>çŸ¥é“â€å­ç½‘æ©ç â€ï¼Œæˆ‘ä»¬å°±èƒ½åˆ¤æ–­ï¼Œä»»æ„ä¸¤ä¸ªIPåœ°å€æ˜¯å¦å¤„åœ¨åŒä¸€ä¸ªå­ç½‘ç»œã€‚æ–¹æ³•æ˜¯å°†ä¸¤ä¸ªIPåœ°å€ä¸å­ç½‘æ©ç åˆ†åˆ«è¿›è¡ŒANDè¿ç®—ï¼Œå¦‚æœç»“æœç›¸åŒçš„è¯ï¼Œå°±è¡¨æ˜å®ƒä»¬åœ¨åŒä¸€ä¸ªå­ç½‘ç»œä¸­ã€‚</p><p>æ€»ç»“ä¸€ä¸‹ï¼ŒIPåè®®çš„ä½œç”¨ä¸»è¦æœ‰ä¸¤ä¸ªï¼Œä¸€ä¸ªæ˜¯ä¸ºæ¯ä¸€å°è®¡ç®—æœºåˆ†é…IPåœ°å€ï¼Œå¦ä¸€ä¸ªæ˜¯ç¡®å®šå“ªäº›åœ°å€åœ¨åŒä¸€ä¸ªå­ç½‘ç»œã€‚</p><p class="note note-primary">  <b>IPæ•°æ®åŒ…</b></p><p>IPæ•°æ®åŒ…åœ¨ä¼ è¾“è¿‡ç¨‹ä¸­ä¼šè¢«æ”¾åˆ°ä»¥å¤ªç½‘æ•°æ®åŒ…çš„â€œæ•°æ®â€éƒ¨åˆ†ï¼Œåˆ†ä¸ºâ€æ ‡å¤´â€å’Œâ€æ•°æ®â€ä¸¤ä¸ªéƒ¨åˆ†ã€‚</p><p>â€œæ ‡å¤´â€éƒ¨åˆ†ä¸»è¦åŒ…æ‹¬ç‰ˆæœ¬ã€é•¿åº¦ã€IPåœ°å€ç­‰ä¿¡æ¯ï¼Œâ€æ•°æ®â€éƒ¨åˆ†åˆ™æ˜¯IPæ•°æ®åŒ…çš„å…·ä½“å†…å®¹ã€‚</p><p>IPæ•°æ®åŒ…çš„â€æ ‡å¤´â€éƒ¨åˆ†çš„é•¿åº¦ä¸º20åˆ°60å­—èŠ‚ï¼Œæ•´ä¸ªæ•°æ®åŒ…çš„æ€»é•¿åº¦æœ€å¤§ä¸º65,535å­—èŠ‚ã€‚å› æ­¤ç†è®ºä¸Šï¼Œä¸€ä¸ªIPæ•°æ®åŒ…çš„â€æ•°æ®â€éƒ¨åˆ†æœ€é•¿ä¸º65,515å­—èŠ‚ã€‚å‰é¢è¯´è¿‡ï¼Œä»¥å¤ªç½‘æ•°æ®åŒ…çš„â€æ•°æ®â€éƒ¨åˆ†ï¼Œæœ€é•¿åªæœ‰1500å­—èŠ‚ã€‚å› æ­¤ï¼Œå¦‚æœIPæ•°æ®åŒ…è¶…è¿‡äº†1500å­—èŠ‚ï¼Œå®ƒå°±éœ€è¦åˆ†å‰²æˆå‡ ä¸ªä»¥å¤ªç½‘æ•°æ®åŒ…ï¼Œåˆ†å¼€å‘é€äº†ã€‚</p><p class="note note-primary">  <b>ARPåè®®</b></p><p>åœ¨å‘é€æ–¹å‘é€æ•°æ®æ—¶ï¼Œå› ä¸ºIPæ•°æ®åŒ…æ˜¯æ”¾åœ¨ä»¥å¤ªç½‘æ•°æ®åŒ…é‡Œå‘é€çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬å¿…é¡»çŸ¥é“å¯¹æ–¹çš„MACåœ°å€å’Œå¯¹æ–¹çš„IPåœ°å€ã€‚é€šå¸¸æƒ…å†µä¸‹ï¼Œå¯¹æ–¹çš„IPåœ°å€æ˜¯å·²çŸ¥çš„ï¼ˆåæ–‡ä¼šè§£é‡Šï¼‰ï¼Œä½†æ˜¯æˆ‘ä»¬ä¸çŸ¥é“å®ƒçš„MACåœ°å€ã€‚</p><p>æ‰€ä»¥ï¼Œæˆ‘ä»¬éœ€è¦ä¸€ç§æœºåˆ¶ï¼Œèƒ½å¤Ÿä»IPåœ°å€å¾—åˆ°MACåœ°å€ï¼Œè¿™é‡Œå¯ä»¥åˆ†æˆä¸¤ç§æƒ…å†µã€‚</p><p>ç¬¬ä¸€ç§æƒ…å†µï¼Œä¸¤å°ä¸»æœºä¸åœ¨åŒä¸€ä¸ªå­ç½‘ç»œï¼Œé‚£ä¹ˆäº‹å®ä¸Šæ²¡æœ‰åŠæ³•å¾—åˆ°å¯¹æ–¹çš„MACåœ°å€ï¼Œåªèƒ½æŠŠæ•°æ®åŒ…ä¼ é€åˆ°ä¸¤ä¸ªå­ç½‘ç»œè¿æ¥å¤„çš„â€ç½‘å…³â€ï¼ˆgatewayï¼‰ï¼Œè®©ç½‘å…³å»å¤„ç†ã€‚</p><p>ç¬¬äºŒç§æƒ…å†µï¼Œä¸¤å°ä¸»æœºåœ¨åŒä¸€ä¸ªå­ç½‘ç»œï¼Œé‚£ä¹ˆæˆ‘ä»¬å¯ä»¥ç”¨ARPåè®®ï¼Œå¾—åˆ°å¯¹æ–¹çš„MACåœ°å€ã€‚ARPåè®®ä¹Ÿæ˜¯å‘å‡ºä¸€ä¸ªæ•°æ®åŒ…ï¼ˆåŒ…å«åœ¨ä»¥å¤ªç½‘æ•°æ®åŒ…ä¸­ï¼‰ï¼Œå…¶ä¸­åŒ…å«å®ƒæ‰€è¦æŸ¥è¯¢ä¸»æœºçš„IPåœ°å€ï¼Œåœ¨å¯¹æ–¹çš„MACåœ°å€è¿™ä¸€æ ï¼Œå¡«çš„æ˜¯<code>FF:FF:FF:FF:FF:FF</code>ï¼Œè¡¨ç¤ºè¿™æ˜¯ä¸€ä¸ªâ€å¹¿æ’­â€åœ°å€ã€‚å®ƒæ‰€åœ¨å­ç½‘ç»œçš„æ¯ä¸€å°ä¸»æœºï¼Œéƒ½ä¼šæ”¶åˆ°è¿™ä¸ªæ•°æ®åŒ…ï¼Œä»ä¸­å–å‡ºIPåœ°å€ï¼Œä¸è‡ªèº«çš„IPåœ°å€è¿›è¡Œæ¯”è¾ƒã€‚å¦‚æœä¸¤è€…ç›¸åŒï¼Œåšå‡ºå›å¤ï¼Œå‘å¯¹æ–¹æŠ¥å‘Šè‡ªå·±çš„MACåœ°å€ã€‚</p><h2 id="ä¼ è¾“å±‚"><a href="#ä¼ è¾“å±‚" class="headerlink" title="ä¼ è¾“å±‚"></a>ä¼ è¾“å±‚</h2><p class="note note-primary">  <b>ä¼ è¾“å±‚çš„ç”±æ¥</b></p><p>æœ‰äº†MACåœ°å€å’ŒIPåœ°å€ï¼Œå¯ä»¥åœ¨äº’è”ç½‘ä¸Šä»»æ„ä¸¤å°ä¸»æœºä¸Šå»ºç«‹é€šä¿¡ã€‚</p><p>é—®é¢˜æ˜¯ï¼ŒåŒä¸€å°ä¸»æœºä¸Šæœ‰è®¸å¤šè¿›ç¨‹éœ€è¦ç”¨åˆ°ç½‘ç»œï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œæˆ‘ä»¬è¿˜éœ€è¦ä¸€ä¸ªå‚æ•°ï¼Œè¡¨ç¤ºè¿™ä¸ªæ•°æ®åŒ…åˆ°åº•ä¾›å“ªä¸ªè¿›ç¨‹ä½¿ç”¨ã€‚è¿™ä¸ªå‚æ•°å°±å«åšâ€ç«¯å£â€ï¼ˆportï¼‰ï¼Œå®ƒæ˜¯æ¯ä¸€ä¸ªä½¿ç”¨ç½‘å¡çš„è¿›ç¨‹çš„ç¼–å·ã€‚æ¯ä¸ªæ•°æ®åŒ…éƒ½å‘åˆ°ä¸»æœºçš„ç‰¹å®šç«¯å£ï¼Œæ‰€ä»¥ä¸åŒçš„ç¨‹åºå°±èƒ½å–åˆ°è‡ªå·±æ‰€éœ€è¦çš„æ•°æ®ã€‚</p><p>â€œç«¯å£â€æ˜¯0åˆ°65535ä¹‹é—´çš„ä¸€ä¸ªæ•´æ•°ï¼Œ16ä¸ªäºŒè¿›åˆ¶ä½ã€‚0åˆ°1023çš„ç«¯å£è¢«ç³»ç»Ÿå ç”¨ï¼Œç”¨æˆ·åªèƒ½é€‰ç”¨å¤§äº1023çš„ç«¯å£ã€‚ä¸ç®¡æ˜¯æµè§ˆç½‘é¡µè¿˜æ˜¯åœ¨çº¿èŠå¤©ï¼Œåº”ç”¨ç¨‹åºä¼šéšæœºé€‰ç”¨ä¸€ä¸ªç«¯å£ï¼Œç„¶åä¸æœåŠ¡å™¨çš„ç›¸åº”ç«¯å£è”ç³»ã€‚</p><p>â€œä¼ è¾“å±‚â€çš„åŠŸèƒ½ï¼Œå°±æ˜¯å»ºç«‹â€ç«¯å£åˆ°ç«¯å£â€çš„é€šä¿¡ã€‚ç›¸æ¯”ä¹‹ä¸‹ï¼Œâ€ç½‘ç»œå±‚â€çš„åŠŸèƒ½æ˜¯å»ºç«‹â€ä¸»æœºåˆ°ä¸»æœºâ€çš„é€šä¿¡ã€‚åªè¦ç¡®å®šä¸»æœºå’Œç«¯å£ï¼Œæˆ‘ä»¬å°±èƒ½å®ç°ç¨‹åºä¹‹é—´çš„äº¤æµã€‚å› æ­¤ï¼ŒUnixç³»ç»Ÿå°±æŠŠä¸»æœº+ç«¯å£ï¼Œå«åšâ€å¥—æ¥å­—â€ï¼ˆsocketï¼‰ã€‚æœ‰äº†å®ƒï¼Œå°±å¯ä»¥è¿›è¡Œç½‘ç»œåº”ç”¨ç¨‹åºå¼€å‘äº†ã€‚</p><p class="note note-primary">  <b>UDPåè®®</b></p><p>ç°åœ¨ï¼Œæˆ‘ä»¬å¿…é¡»åœ¨æ•°æ®åŒ…ä¸­åŠ å…¥ç«¯å£ä¿¡æ¯ï¼Œè¿™å°±éœ€è¦æ–°çš„åè®®ã€‚æœ€ç®€å•çš„å®ç°å«åšUDPåè®®ï¼Œå®ƒçš„æ ¼å¼å‡ ä¹å°±æ˜¯åœ¨æ•°æ®å‰é¢ï¼ŒåŠ ä¸Šç«¯å£å·ã€‚</p><p>UDPæ•°æ®åŒ…ï¼Œä¹Ÿæ˜¯ç”±â€æ ‡å¤´â€å’Œâ€æ•°æ®â€ä¸¤éƒ¨åˆ†ç»„æˆã€‚â€æ ‡å¤´â€éƒ¨åˆ†ä¸»è¦å®šä¹‰äº†å‘å‡ºç«¯å£å’Œæ¥æ”¶ç«¯å£ï¼Œâ€æ•°æ®â€éƒ¨åˆ†å°±æ˜¯å…·ä½“çš„å†…å®¹ã€‚ç„¶åï¼ŒæŠŠæ•´ä¸ªUDPæ•°æ®åŒ…æ”¾å…¥IPæ•°æ®åŒ…çš„â€æ•°æ®â€éƒ¨åˆ†ã€‚</p><p>UDPæ•°æ®åŒ…éå¸¸ç®€å•ï¼Œâ€æ ‡å¤´â€éƒ¨åˆ†ä¸€å…±åªæœ‰8ä¸ªå­—èŠ‚ï¼Œæ€»é•¿åº¦ä¸è¶…è¿‡65,535å­—èŠ‚ï¼Œæ­£å¥½æ”¾è¿›ä¸€ä¸ªIPæ•°æ®åŒ…ã€‚</p><p class="note note-primary">  <b>TCPåè®®</b></p><p>UDPåè®®çš„ä¼˜ç‚¹æ˜¯æ¯”è¾ƒç®€å•ï¼Œå®¹æ˜“å®ç°ï¼Œä½†æ˜¯ç¼ºç‚¹æ˜¯å¯é æ€§è¾ƒå·®ï¼Œä¸€æ—¦æ•°æ®åŒ…å‘å‡ºï¼Œæ— æ³•çŸ¥é“å¯¹æ–¹æ˜¯å¦æ”¶åˆ°ã€‚</p><p>ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæé«˜ç½‘ç»œå¯é æ€§ï¼ŒTCPåè®®å°±è¯ç”Ÿäº†ã€‚è¿™ä¸ªåè®®éå¸¸å¤æ‚ï¼Œä½†å¯ä»¥è¿‘ä¼¼è®¤ä¸ºï¼Œå®ƒå°±æ˜¯æœ‰ç¡®è®¤æœºåˆ¶çš„UDPåè®®ï¼Œæ¯å‘å‡ºä¸€ä¸ªæ•°æ®åŒ…éƒ½è¦æ±‚ç¡®è®¤ã€‚å¦‚æœæœ‰ä¸€ä¸ªæ•°æ®åŒ…é—å¤±ï¼Œå°±æ”¶ä¸åˆ°ç¡®è®¤ï¼Œå‘å‡ºæ–¹å°±çŸ¥é“æœ‰å¿…è¦é‡å‘è¿™ä¸ªæ•°æ®åŒ…äº†ã€‚</p><p>TCPåè®®å¹¶ä¸èƒ½å¤Ÿç¡®ä¿æ•°æ®ä¸ä¼šé—å¤±ï¼Œä½†æ˜¯å¯ä»¥ç¡®ä¿æ•°æ®ä¸€æ—¦é—å¤±ï¼Œæ¥æ”¶æ–¹å¯ä»¥å¾—çŸ¥è¿™ä»¶äº‹ã€‚å®ƒçš„ç¼ºç‚¹æ˜¯è¿‡ç¨‹å¤æ‚ã€å®ç°å›°éš¾ã€æ¶ˆè€—è¾ƒå¤šçš„èµ„æºã€‚</p><p>TCPæ•°æ®åŒ…å’ŒUDPæ•°æ®åŒ…ä¸€æ ·ï¼Œéƒ½æ˜¯å†…åµŒåœ¨IPæ•°æ®åŒ…çš„â€æ•°æ®â€éƒ¨åˆ†ã€‚TCPæ•°æ®åŒ…æ²¡æœ‰é•¿åº¦é™åˆ¶ï¼Œç†è®ºä¸Šå¯ä»¥æ— é™é•¿ï¼Œä½†æ˜¯ä¸ºäº†ä¿è¯ç½‘ç»œçš„æ•ˆç‡ï¼Œé€šå¸¸TCPæ•°æ®åŒ…çš„é•¿åº¦ä¸ä¼šè¶…è¿‡IPæ•°æ®åŒ…çš„é•¿åº¦ï¼Œä»¥ç¡®ä¿å•ä¸ªTCPæ•°æ®åŒ…ä¸å¿…å†åˆ†å‰²ã€‚</p><h2 id="åº”ç”¨å±‚"><a href="#åº”ç”¨å±‚" class="headerlink" title="åº”ç”¨å±‚"></a>åº”ç”¨å±‚</h2><p>â€œåº”ç”¨å±‚â€çš„ä½œç”¨ï¼Œå°±æ˜¯è§„å®šåº”ç”¨ç¨‹åºçš„æ•°æ®æ ¼å¼ã€‚</p><p>ä¸¾ä¾‹æ¥è¯´ï¼ŒTCPåè®®å¯ä»¥ä¸ºå„ç§å„æ ·çš„ç¨‹åºä¼ é€’æ•°æ®ï¼Œæ¯”å¦‚Emailã€WWWã€FTPç­‰ç­‰ã€‚é‚£ä¹ˆï¼Œå¿…é¡»æœ‰ä¸åŒåè®®è§„å®šç”µå­é‚®ä»¶ã€ç½‘é¡µã€FTPæ•°æ®çš„æ ¼å¼ï¼Œè¿™äº›åº”ç”¨ç¨‹åºåè®®å°±æ„æˆäº†â€åº”ç”¨å±‚â€ã€‚</p><p>è¿™æ˜¯æœ€é«˜çš„ä¸€å±‚ï¼Œç›´æ¥é¢å¯¹ç”¨æˆ·ã€‚å®ƒçš„æ•°æ®å°±æ”¾åœ¨TCPæ•°æ®åŒ…çš„â€æ•°æ®â€éƒ¨åˆ†ã€‚</p><p>åº”ç”¨è½¯ä»¶åœ¨åº”ç”¨å±‚å®ç°ï¼Œåº”ç”¨å±‚åªéœ€è¦ä¸“æ³¨äºä¸ºç”¨æˆ·æä¾›åº”ç”¨åŠŸèƒ½ï¼Œä¸ç”¨å»å…³å¿ƒæ•°æ®æ˜¯å¦‚ä½•ä¼ è¾“çš„ã€‚å½“ä¸¤ä¸ªä¸åŒè®¾å¤‡çš„åº”ç”¨éœ€è¦é€šä¿¡çš„æ—¶å€™ï¼Œåº”ç”¨å°±æŠŠåº”ç”¨æ•°æ®ä¼ ç»™ä¸‹ä¸€å±‚ï¼Œä¹Ÿå°±æ˜¯ä¼ è¾“å±‚ã€‚</p><p>åº”ç”¨å±‚å·¥ä½œåœ¨æ“ä½œç³»ç»Ÿä¸­çš„ç”¨æˆ·æ€ï¼Œä¼ è¾“å±‚åŠä»¥ä¸‹å·¥ä½œåœ¨å†…æ ¸æ€ã€‚</p><h2 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h2><p><a href="https://www.ruanyifeng.com/blog/2012/05/internet_protocol_suite_part_i.html">é˜®ä¸€å³°.äº’è”ç½‘åè®®å…¥é—¨(ä¸€)</a></p><h1 id="HTTPç¯‡"><a href="#HTTPç¯‡" class="headerlink" title="HTTPç¯‡"></a>HTTPç¯‡</h1><p>HTTP æ˜¯è¶…æ–‡æœ¬ä¼ è¾“åè®®ï¼Œä¹Ÿå°±æ˜¯<strong>H</strong>yperText <strong>T</strong>ransfer <strong>P</strong>rotocolã€‚</p><h2 id="HTTP-0-9"><a href="#HTTP-0-9" class="headerlink" title="HTTP/0.9"></a>HTTP/0.9</h2><p>HTTPæœ€æ—©çš„ç‰ˆæœ¬æ˜¯1991å¹´å‘å¸ƒçš„0.9ç‰ˆæœ¬ï¼Œè¯¥ç‰ˆæœ¬æä¸ºç®€å•ï¼Œåªæœ‰ä¸€ä¸ªå‘½ä»¤<code>GET</code></p><div class="code-wrapper"><pre><code class="hljs http">GET /index.html</code></pre></div><p>TCP è¿æ¥å»ºç«‹åï¼Œå®¢æˆ·ç«¯å‘æœåŠ¡å™¨è¯·æ±‚ç½‘é¡µ<code>index.html</code>ã€‚åè®®è§„å®šï¼ŒæœåŠ¡å™¨åªèƒ½å›åº”HTMLæ ¼å¼çš„å­—ç¬¦ä¸²ï¼Œä¸èƒ½å›åº”åˆ«çš„æ ¼å¼ã€‚</p><div class="code-wrapper"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">html</span>&gt;</span>  <span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>Hello World<span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span></code></pre></div><p>æœåŠ¡å™¨å‘é€å®Œæ¯•ï¼Œå°±å…³é—­TCPè¿æ¥ã€‚</p><h2 id="HTTP-1-0"><a href="#HTTP-1-0" class="headerlink" title="HTTP/1.0"></a>HTTP/1.0</h2><p>1996å¹´5æœˆï¼ŒHTTP/1.0 ç‰ˆæœ¬å‘å¸ƒï¼Œå†…å®¹å¤§å¤§å¢åŠ ã€‚</p><p>é¦–å…ˆï¼Œä»»ä½•æ ¼å¼çš„å†…å®¹éƒ½å¯ä»¥å‘é€ã€‚è¿™ä½¿å¾—äº’è”ç½‘ä¸ä»…å¯ä»¥ä¼ è¾“æ–‡å­—ï¼Œè¿˜èƒ½ä¼ è¾“å›¾åƒã€è§†é¢‘ã€äºŒè¿›åˆ¶æ–‡ä»¶ã€‚è¿™ä¸ºäº’è”ç½‘çš„å¤§å‘å±•å¥ å®šäº†åŸºç¡€ã€‚</p><p>å…¶æ¬¡ï¼Œé™¤äº†<code>GET</code>å‘½ä»¤ï¼Œè¿˜å¼•å…¥äº†<code>POST</code>å‘½ä»¤å’Œ<code>HEAD</code>å‘½ä»¤ï¼Œä¸°å¯Œäº†æµè§ˆå™¨ä¸æœåŠ¡å™¨çš„äº’åŠ¨æ‰‹æ®µã€‚</p><div class="table-container"><table><thead><tr><th>æ–¹æ³•</th><th>æè¿°</th></tr></thead><tbody><tr><td>GET</td><td>è¯·æ±‚æŒ‡å®šçš„é¡µé¢ä¿¡æ¯ï¼Œå¹¶è¿”å›å…·ä½“å†…å®¹ï¼Œé€šå¸¸åªç”¨äºè¯»å–æ•°æ®ã€‚</td></tr><tr><td>HEAD</td><td>ç±»ä¼¼äº GET è¯·æ±‚ï¼Œåªä¸è¿‡è¿”å›çš„å“åº”ä¸­æ²¡æœ‰å…·ä½“çš„å†…å®¹ï¼Œç”¨äºè·å–æŠ¥å¤´ã€‚</td></tr><tr><td>POST</td><td>å‘æŒ‡å®šèµ„æºè¯·æ±‚æ•°æ®å¤„ç†ï¼Œå¦‚æäº¤è¡¨å•æˆ–è€…ä¸Šä¼ æ–‡ä»¶ï¼ŒæœåŠ¡å™¨è¿”å›å¤„ç†ç»“æœã€‚æ•°æ®åŒ…å«åœ¨è¯·æ±‚ä½“ä¸­ã€‚POST è¯·æ±‚å¯èƒ½ä¼šå¯¼è‡´æ–°çš„èµ„æºçš„å»ºç«‹æˆ–å·²æœ‰èµ„æºçš„æ›´æ”¹ã€‚</td></tr></tbody></table></div><p>å†æ¬¡ï¼ŒHTTPè¯·æ±‚å’Œå›åº”çš„æ ¼å¼ä¹Ÿå˜äº†ã€‚é™¤äº†æ•°æ®éƒ¨åˆ†ï¼Œæ¯æ¬¡é€šä¿¡éƒ½å¿…é¡»åŒ…æ‹¬å¤´ä¿¡æ¯ï¼ˆHTTP headerï¼‰ï¼Œç”¨æ¥æè¿°ä¸€äº›å…ƒæ•°æ®ã€‚</p><p>å…¶ä»–çš„æ–°å¢åŠŸèƒ½è¿˜åŒ…æ‹¬çŠ¶æ€ç ï¼ˆstatus codeï¼‰ã€å¤šå­—ç¬¦é›†æ”¯æŒã€å¤šéƒ¨åˆ†å‘é€ï¼ˆmulti-part typeï¼‰ã€æƒé™ï¼ˆauthorizationï¼‰ã€ç¼“å­˜ï¼ˆcacheï¼‰ã€å†…å®¹ç¼–ç ï¼ˆcontent encodingï¼‰ç­‰ã€‚</p><p class="note note-primary">  <b>è¯·æ±‚æ ¼å¼</b></p> <div class="code-wrapper"><pre><code class="hljs http"><span class="hljs-keyword">GET</span> <span class="hljs-string">/</span> <span class="hljs-meta">HTTP/1.0</span><span class="hljs-attribute">User-Agent</span><span class="hljs-punctuation">: </span>Mozilla/5.0 (Macintosh; Intel Mac OS X 10_10_5)<span class="hljs-attribute">Accept</span><span class="hljs-punctuation">: </span>*/*</code></pre></div><p>ä¸€è¡Œæ˜¯è¯·æ±‚å‘½ä»¤ï¼Œå¿…é¡»åœ¨å°¾éƒ¨æ·»åŠ åè®®ç‰ˆæœ¬<code>HTTP/1.0</code>ã€‚åé¢å°±æ˜¯å¤šè¡Œå¤´ä¿¡æ¯ï¼Œæè¿°å®¢æˆ·ç«¯çš„æƒ…å†µï¼Œå…¶ä¸­<code>User-Agent</code> å­—æ®µæ ‡è¯†äº†æµè§ˆå™¨çš„èº«ä»½ã€‚</p><p class="note note-primary">  <b>å›åº”æ ¼å¼</b></p> <p>æœåŠ¡å™¨çš„å›åº”å¦‚ä¸‹</p><div class="code-wrapper"><pre><code class="hljs http"><span class="hljs-meta">HTTP/1.0</span> <span class="hljs-number">200</span> OK <span class="hljs-attribute">Content-Type</span><span class="hljs-punctuation">: </span>text/plain<span class="hljs-attribute">Content-Length</span><span class="hljs-punctuation">: </span>137582<span class="hljs-attribute">Expires</span><span class="hljs-punctuation">: </span>Thu, 05 Dec 1997 16:00:00 GMT<span class="hljs-attribute">Last-Modified</span><span class="hljs-punctuation">: </span>Wed, 5 August 1996 15:55:28 GMT<span class="hljs-attribute">Server</span><span class="hljs-punctuation">: </span>Apache 0.84<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">html</span>&gt;</span></span><span class="xml">  <span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>Hello World<span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span></span><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span></span></code></pre></div><p>å›åº”çš„æ ¼å¼æ˜¯â€å¤´ä¿¡æ¯ + ä¸€ä¸ªç©ºè¡Œï¼ˆ<code>\r\n</code>ï¼‰ + æ•°æ®â€ã€‚å…¶ä¸­ï¼Œç¬¬ä¸€è¡Œæ˜¯â€åè®®ç‰ˆæœ¬ + çŠ¶æ€ç ï¼ˆstatus codeï¼‰ + çŠ¶æ€æè¿°â€ã€‚</p><p class="note note-primary">  <b>Content-Type å­—æ®µ</b></p> <p>å…³äºå­—ç¬¦çš„ç¼–ç ï¼Œ1.0ç‰ˆè§„å®šï¼Œå¤´ä¿¡æ¯å¿…é¡»æ˜¯ ASCII ç ï¼Œåé¢çš„æ•°æ®å¯ä»¥æ˜¯ä»»ä½•æ ¼å¼ã€‚å› æ­¤ï¼ŒæœåŠ¡å™¨å›åº”çš„æ—¶å€™ï¼Œå¿…é¡»å‘Šè¯‰å®¢æˆ·ç«¯ï¼Œæ•°æ®æ˜¯ä»€ä¹ˆæ ¼å¼ï¼Œè¿™å°±æ˜¯<code>Content-Type</code>å­—æ®µçš„ä½œç”¨ã€‚å¸¸è§çš„<code>Content-Type</code>å­—æ®µçš„å€¼æœ‰ï¼štext/plainï¼Œtext/htmlï¼Œtext/cssï¼Œimage/jpegï¼Œimage/pngï¼Œimage/svg+xmlï¼Œaudio/mp4ï¼Œvideo/mp4ï¼Œapplication/javascriptï¼Œapplication/pdfï¼Œapplication/zipï¼Œapplication/atom+xmlç­‰ã€‚</p><p>è¿™äº›æ•°æ®ç±»å‹æ€»ç§°ä¸º<code>MIME type</code>ï¼Œæ¯ä¸ªå€¼åŒ…æ‹¬ä¸€çº§ç±»å‹å’ŒäºŒçº§ç±»å‹ï¼Œä¹‹é—´ç”¨æ–œæ åˆ†éš”ã€‚<code>MIME type</code>è¿˜å¯ä»¥åœ¨å°¾éƒ¨ä½¿ç”¨åˆ†å·ï¼Œæ·»åŠ å‚æ•°ã€‚</p><div class="code-wrapper"><pre><code class="hljs http"><span class="hljs-attribute">Content-Type</span><span class="hljs-punctuation">: </span>text/html; charset=utf-8</code></pre></div><p>ä¸Šé¢çš„ç±»å‹è¡¨æ˜ï¼Œå‘é€çš„æ˜¯ç½‘é¡µï¼Œè€Œä¸”ç¼–ç æ˜¯UTF-8ã€‚</p><p>å®¢æˆ·ç«¯è¯·æ±‚çš„æ—¶å€™ï¼Œå¯ä»¥ä½¿ç”¨<code>Accept</code>å­—æ®µå£°æ˜è‡ªå·±å¯ä»¥æ¥å—å“ªäº›æ•°æ®æ ¼å¼ã€‚</p><div class="code-wrapper"><pre><code class="hljs http"><span class="hljs-attribute">Accept</span><span class="hljs-punctuation">: </span>*/*</code></pre></div><p>ä¸Šé¢ä»£ç ä¸­ï¼Œå®¢æˆ·ç«¯å£°æ˜è‡ªå·±å¯ä»¥æ¥å—ä»»ä½•æ ¼å¼çš„æ•°æ®ã€‚</p><p><code>MIME type</code>è¿˜å¯ä»¥ç”¨åœ¨å…¶ä»–åœ°æ–¹ï¼Œå¦‚HTMLç½‘é¡µã€‚</p><div class="code-wrapper"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">http-equiv</span>=<span class="hljs-string">&quot;Content-Type&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;text/html; charset=UTF-8&quot;</span> /&gt;</span><span class="hljs-comment">&lt;!-- ç­‰åŒäº --&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;utf-8&quot;</span> /&gt;</span></code></pre></div><p class="note note-primary">  <b>Content-Encoding å­—æ®µ</b></p> <p>ç”±äºå‘é€çš„æ•°æ®å¯ä»¥æ˜¯ä»»ä½•æ ¼å¼ï¼Œå› æ­¤å¯ä»¥æŠŠæ•°æ®å‹ç¼©åå†å‘é€ã€‚<code>Content-Encoding</code>å­—æ®µè¯´æ˜æ•°æ®çš„å‹ç¼©æ–¹æ³•ã€‚</p><div class="code-wrapper"><pre><code class="hljs http"><span class="hljs-attribute">Content-Encoding</span><span class="hljs-punctuation">: </span>gzip<span class="hljs-attribute">Content-Encoding</span><span class="hljs-punctuation">: </span>compress<span class="hljs-attribute">Content-Encoding</span><span class="hljs-punctuation">: </span>deflate</code></pre></div><p>å®¢æˆ·ç«¯åœ¨è¯·æ±‚æ—¶ï¼Œç”¨<code>Accept-Encoding</code>å­—æ®µè¯´æ˜è‡ªå·±å¯ä»¥æ¥å—å“ªäº›å‹ç¼©æ–¹æ³•ã€‚</p><div class="code-wrapper"><pre><code class="hljs http"><span class="hljs-attribute">Accept-Encoding</span><span class="hljs-punctuation">: </span>gzip, deflate</code></pre></div><p class="note note-primary">  <b>çŠ¶æ€ç </b></p> <p>HTTP/1.0 è§„å®šï¼Œæ‰€æœ‰HTTPå“åº”çš„ç¬¬ä¸€è¡Œéƒ½æ˜¯<strong>çŠ¶æ€è¡Œ</strong>ï¼Œä¾æ¬¡æ˜¯å½“å‰HTTPç‰ˆæœ¬å·ï¼Œ3ä½æ•°å­—ç»„æˆçš„<a href="https://zh.wikipedia.org/wiki/HTTPçŠ¶æ€ç ">çŠ¶æ€ä»£ç </a>ï¼Œä»¥åŠæè¿°çŠ¶æ€çš„çŸ­è¯­ï¼Œå½¼æ­¤ç”±ç©ºæ ¼åˆ†éš”ã€‚</p><p>HTTP/1.1 åœ¨ 1.0 çš„åŸºç¡€ä¸Šæ–°å¢äº† 24 ä¸ªé”™è¯¯çŠ¶æ€å“åº”ç ï¼Œéšç€HTTPåè®®çš„å‘å±•ï¼ŒçŠ¶æ€ç çš„ç§ç±»ä¹Ÿåœ¨ä¸æ–­æ‰©å¤§ä¸­ã€‚ç›®å‰å¸¸ç”¨çš„çŠ¶æ€ç åŒ…æ‹¬ä»¥ä¸‹äº”ç±»ï¼š</p><div class="table-container"><table><thead><tr><th></th><th>æè¿°</th><th>å¸¸è§çŠ¶æ€ç </th></tr></thead><tbody><tr><td>1xxæ¶ˆæ¯</td><td>è¯·æ±‚å·²è¢«æœåŠ¡å™¨æ¥æ”¶ï¼Œç»§ç»­å¤„ç†</td><td></td></tr><tr><td>2xxæˆåŠŸ</td><td>è¯·æ±‚å·²æˆåŠŸè¢«æœåŠ¡å™¨æ¥æ”¶ã€ç†è§£ã€å¹¶æ¥å—</td><td>200ã€204ã€206</td></tr><tr><td>3xxé‡å®šå‘</td><td>éœ€è¦åç»­æ“ä½œæ‰èƒ½å®Œæˆè¿™ä¸€è¯·æ±‚</td><td>301ã€302ã€304</td></tr><tr><td>4xxè¯·æ±‚é”™è¯¯</td><td>è¯·æ±‚å«æœ‰è¯æ³•é”™è¯¯æˆ–è€…æ— æ³•è¢«æ‰§è¡Œ</td><td>400ã€403ã€404</td></tr><tr><td>5xxæœåŠ¡å™¨é”™è¯¯</td><td>æœåŠ¡å™¨åœ¨å¤„ç†æŸä¸ªæ­£ç¡®è¯·æ±‚æ—¶å‘ç”Ÿé”™è¯¯</td><td>500ã€501ã€502ã€503</td></tr></tbody></table></div><p class="note note-primary">  <b>HTTP/1.0 çš„ç¼ºç‚¹</b></p> <p>HTTP/1.0 ç‰ˆçš„ä¸»è¦ç¼ºç‚¹æ˜¯ï¼Œæ¯ä¸ªTCPè¿æ¥åªèƒ½å‘é€ä¸€ä¸ªè¯·æ±‚ã€‚å‘é€æ•°æ®å®Œæ¯•ï¼Œè¿æ¥å°±å…³é—­ï¼Œå¦‚æœè¯·æ±‚å…¶ä»–èµ„æºï¼Œå°±å¿…é¡»å†æ–°å»ºä¸€ä¸ªè¿æ¥ã€‚</p><p>TCPè¿æ¥çš„æ–°å»ºæˆæœ¬å¾ˆé«˜ï¼Œå› ä¸ºéœ€è¦å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ä¸‰æ¬¡æ¡æ‰‹ï¼Œå¹¶ä¸”å¼€å§‹æ—¶å‘é€é€Ÿç‡è¾ƒæ…¢ï¼ˆslow startï¼‰ã€‚æ‰€ä»¥ï¼ŒHTTP 1.0ç‰ˆæœ¬çš„æ€§èƒ½æ¯”è¾ƒå·®ã€‚éšç€ç½‘é¡µåŠ è½½çš„å¤–éƒ¨èµ„æºè¶Šæ¥è¶Šå¤šï¼Œè¿™ä¸ªé—®é¢˜å°±æ„ˆå‘çªå‡ºäº†ã€‚</p><p>ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæœ‰äº›æµè§ˆå™¨åœ¨è¯·æ±‚æ—¶ï¼Œç”¨äº†ä¸€ä¸ªéæ ‡å‡†çš„<code>Connection</code>å­—æ®µã€‚</p><div class="code-wrapper"><pre><code class="hljs http"><span class="hljs-attribute">Connection</span><span class="hljs-punctuation">: </span>keep-alive</code></pre></div><p>è¿™ä¸ªå­—æ®µè¦æ±‚æœåŠ¡å™¨ä¸è¦å…³é—­TCPè¿æ¥ï¼Œä»¥ä¾¿å…¶ä»–è¯·æ±‚å¤ç”¨ã€‚æœåŠ¡å™¨åŒæ ·å›åº”<code>Connection: keep-alive</code>ã€‚</p><p>ä¸€ä¸ªå¯ä»¥å¤ç”¨çš„TCPè¿æ¥å°±å»ºç«‹äº†ï¼Œç›´åˆ°å®¢æˆ·ç«¯æˆ–æœåŠ¡å™¨ä¸»åŠ¨å…³é—­è¿æ¥ã€‚ä½†æ˜¯ï¼Œè¿™ä¸æ˜¯æ ‡å‡†å­—æ®µï¼Œä¸åŒå®ç°çš„è¡Œä¸ºå¯èƒ½ä¸ä¸€è‡´ï¼Œå› æ­¤ä¸æ˜¯æ ¹æœ¬çš„è§£å†³åŠæ³•ã€‚</p><h2 id="HTTP-1-1"><a href="#HTTP-1-1" class="headerlink" title="HTTP/1.1"></a>HTTP/1.1</h2><p>1997å¹´1æœˆï¼ŒHTTP/1.1 ç‰ˆæœ¬å‘å¸ƒï¼Œåªæ¯” 1.0 ç‰ˆæœ¬æ™šäº†åŠå¹´ï¼Œå®ƒè¿›ä¸€æ­¥å®Œå–„äº† HTTP åè®®ï¼Œå¢åŠ äº†å…­ç§è¯·æ±‚æ–¹æ³•ï¼š<code>PUT</code>ã€<code>PATCH</code>ã€ <code>OPTIONS</code>ã€<code>DELETE</code>ã€<code>TRACE</code> å’Œ <code>CONNECT</code> ã€‚</p><div class="table-container"><table><thead><tr><th>æ–¹æ³•</th><th>æè¿°</th></tr></thead><tbody><tr><td>PUT</td><td>æ›¿æ¢æŒ‡å®šçš„èµ„æºï¼Œæ²¡æœ‰çš„è¯å°±æ–°å¢ã€‚</td></tr><tr><td>PATCH</td><td>æ˜¯å¯¹ PUT æ–¹æ³•çš„è¡¥å……ï¼Œç”¨æ¥å¯¹å·²çŸ¥èµ„æºè¿›è¡Œå±€éƒ¨æ›´æ–°ã€‚</td></tr><tr><td>OPTIONS</td><td>å‘æœåŠ¡å™¨å‘é€è¯¥æ–¹æ³•ï¼Œä¼šè¿”å›å¯¹æŒ‡å®šèµ„æºæ‰€æ”¯æŒçš„ HTTP è¯·æ±‚æ–¹æ³•ã€‚</td></tr><tr><td>DELETE</td><td>è¯·æ±‚æœåŠ¡å™¨åˆ é™¤ URL æ ‡è¯†çš„èµ„æºæ•°æ®ã€‚</td></tr><tr><td>CONNECT</td><td>å°†æœåŠ¡å™¨ä½œä¸ºä»£ç†ï¼Œè®©æœåŠ¡å™¨ä»£æ›¿ç”¨æˆ·è¿›è¡Œè®¿é—®ã€‚</td></tr><tr><td>TRACE</td><td>å›æ˜¾æœåŠ¡å™¨æ”¶åˆ°çš„è¯·æ±‚æ•°æ®ï¼Œå³æœåŠ¡å™¨è¿”å›è‡ªå·±æ”¶åˆ°çš„æ•°æ®ï¼Œä¸»è¦ç”¨äºæµ‹è¯•å’Œè¯Šæ–­ã€‚</td></tr></tbody></table></div><p class="note note-primary">  <b>æŒä¹…è¿æ¥</b></p> <p>1.1 ç‰ˆçš„æœ€å¤§å˜åŒ–ï¼Œå°±æ˜¯å¼•å…¥äº†æŒä¹…è¿æ¥ï¼ˆpersistent connectionï¼‰ï¼Œå³TCPè¿æ¥é»˜è®¤ä¸å…³é—­ï¼Œå¯ä»¥è¢«å¤šä¸ªè¯·æ±‚å¤ç”¨ï¼Œä¸ç”¨å£°æ˜<code>Connection: keep-alive</code>ã€‚</p><p>å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨å‘ç°å¯¹æ–¹ä¸€æ®µæ—¶é—´æ²¡æœ‰æ´»åŠ¨ï¼Œå°±å¯ä»¥ä¸»åŠ¨å…³é—­è¿æ¥ã€‚ä¸è¿‡ï¼Œè§„èŒƒçš„åšæ³•æ˜¯ï¼Œå®¢æˆ·ç«¯åœ¨æœ€åä¸€ä¸ªè¯·æ±‚æ—¶ï¼Œå‘é€<code>Connection: close</code>ï¼Œæ˜ç¡®è¦æ±‚æœåŠ¡å™¨å…³é—­TCPè¿æ¥ã€‚</p><p class="note note-primary">  <b>ç®¡é“æœºåˆ¶</b></p> <p>1.1 ç‰ˆè¿˜å¼•å…¥äº†ç®¡é“æœºåˆ¶ï¼ˆpipeliningï¼‰ï¼Œå³åœ¨åŒä¸€ä¸ªTCPè¿æ¥é‡Œé¢ï¼Œå®¢æˆ·ç«¯å¯ä»¥åŒæ—¶å‘é€å¤šä¸ªè¯·æ±‚ã€‚</p><p>ä¸¾ä¾‹æ¥è¯´ï¼Œå®¢æˆ·ç«¯éœ€è¦è¯·æ±‚ä¸¤ä¸ªèµ„æºã€‚ä»¥å‰çš„åšæ³•æ˜¯ï¼Œåœ¨åŒä¸€ä¸ªTCPè¿æ¥é‡Œé¢ï¼Œå…ˆå‘é€Aè¯·æ±‚ï¼Œç„¶åç­‰å¾…æœåŠ¡å™¨åšå‡ºå›åº”ï¼Œæ”¶åˆ°åå†å‘å‡ºBè¯·æ±‚ã€‚ç®¡é“æœºåˆ¶åˆ™æ˜¯å…è®¸æµè§ˆå™¨åŒæ—¶å‘å‡ºAè¯·æ±‚å’ŒBè¯·æ±‚ï¼Œä½†æ˜¯æœåŠ¡å™¨è¿˜æ˜¯æŒ‰ç…§é¡ºåºï¼Œå…ˆå›åº”Aè¯·æ±‚ï¼Œå®Œæˆåå†å›åº”Bè¯·æ±‚ã€‚</p><p class="note note-primary">  <b>Content-Length å­—æ®µ</b></p><p>ä¸€ä¸ªTCPè¿æ¥ç°åœ¨å¯ä»¥ä¼ é€å¤šä¸ªå›åº”ï¼ŒåŠ¿å¿…å°±è¦æœ‰ä¸€ç§æœºåˆ¶ï¼ŒåŒºåˆ†æ•°æ®åŒ…æ˜¯å±äºå“ªä¸€ä¸ªå›åº”çš„ã€‚è¿™å°±æ˜¯<code>Content-length</code>å­—æ®µçš„ä½œç”¨ï¼Œå£°æ˜æœ¬æ¬¡å›åº”çš„æ•°æ®é•¿åº¦ã€‚</p><div class="code-wrapper"><pre><code class="hljs http"><span class="hljs-attribute">Content-Length</span><span class="hljs-punctuation">: </span>3495</code></pre></div><p>ä¸Šé¢ä»£ç å‘Šè¯‰æµè§ˆå™¨ï¼Œæœ¬æ¬¡å›åº”çš„é•¿åº¦æ˜¯3495ä¸ªå­—èŠ‚ï¼Œè¿™äº›å­—èŠ‚ä¼šè¢«æˆªå–ä½œä¸ºæœ¬æ¬¡å›åº”ã€‚åé¢çš„å­—èŠ‚ä½œä¸ºä¸‹ä¸€ä¸ªå›åº”çš„å†…å®¹ã€‚</p><p class="note note-primary">  <b>åˆ†å—ä¼ è¾“ç¼–ç </b></p><p>ä½¿ç”¨<code>Content-Length</code>å­—æ®µçš„å‰ææ¡ä»¶æ˜¯ï¼ŒæœåŠ¡å™¨å‘é€å›åº”ä¹‹å‰ï¼Œå¿…é¡»çŸ¥é“å›åº”çš„æ•°æ®é•¿åº¦ã€‚</p><p>å¯¹äºä¸€äº›å¾ˆè€—æ—¶çš„åŠ¨æ€æ“ä½œæ¥è¯´ï¼Œè¿™æ„å‘³ç€ï¼ŒæœåŠ¡å™¨è¦ç­‰åˆ°æ‰€æœ‰æ“ä½œå®Œæˆï¼Œæ‰èƒ½å‘é€æ•°æ®ï¼Œæ˜¾ç„¶è¿™æ ·çš„æ•ˆç‡ä¸é«˜ã€‚æ›´å¥½çš„å¤„ç†æ–¹æ³•æ˜¯ï¼Œäº§ç”Ÿä¸€å—æ•°æ®ï¼Œå°±å‘é€ä¸€å—ï¼Œé‡‡ç”¨â€æµæ¨¡å¼â€ï¼ˆstreamï¼‰å–ä»£â€ç¼“å­˜æ¨¡å¼â€ï¼ˆbufferï¼‰ã€‚</p><p>å› æ­¤ï¼Œ1.1ç‰ˆè§„å®šå¯ä»¥ä¸ä½¿ç”¨<code>Content-Length</code>å­—æ®µï¼Œè€Œä½¿ç”¨<a href="https://zh.wikipedia.org/wiki/åˆ†å—ä¼ è¾“ç¼–ç ">â€œåˆ†å—ä¼ è¾“ç¼–ç â€</a>ï¼ˆchunked transfer encodingï¼‰ã€‚åªè¦è¯·æ±‚æˆ–å›åº”çš„å¤´ä¿¡æ¯æœ‰<code>Transfer-Encoding</code>å­—æ®µï¼Œå°±è¡¨æ˜å›åº”å°†ç”±æ•°é‡æœªå®šçš„æ•°æ®å—ç»„æˆã€‚</p><div class="code-wrapper"><pre><code class="hljs http"><span class="hljs-attribute">Transfer-Encoding</span><span class="hljs-punctuation">: </span>chunked</code></pre></div><p>æ¯ä¸ªéç©ºçš„æ•°æ®å—ä¹‹å‰ï¼Œä¼šæœ‰ä¸€ä¸ª16è¿›åˆ¶çš„æ•°å€¼ï¼Œè¡¨ç¤ºè¿™ä¸ªå—çš„é•¿åº¦ã€‚æœ€åæ˜¯ä¸€ä¸ªå¤§å°ä¸º0çš„å—ï¼Œå°±è¡¨ç¤ºæœ¬æ¬¡å›åº”çš„æ•°æ®å‘é€å®Œäº†ã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªä¾‹å­ã€‚</p><div class="code-wrapper"><pre><code class="hljs http"><span class="hljs-meta">HTTP/1.1</span> <span class="hljs-number">200</span> OK<span class="hljs-attribute">Content-Type</span><span class="hljs-punctuation">: </span>text/plain<span class="hljs-attribute">Transfer-Encoding</span><span class="hljs-punctuation">: </span>chunked<span class="livecodeserver"><span class="hljs-number">25</span></span><span class="livecodeserver">This is <span class="hljs-keyword">the</span> data <span class="hljs-keyword">in</span> <span class="hljs-keyword">the</span> <span class="hljs-keyword">first</span> chunk</span><span class="livecodeserver"></span><span class="livecodeserver"><span class="hljs-number">1</span>C</span><span class="livecodeserver"><span class="hljs-keyword">and</span> this is <span class="hljs-keyword">the</span> <span class="hljs-keyword">second</span> <span class="hljs-literal">one</span></span><span class="livecodeserver"></span><span class="livecodeserver"><span class="hljs-number">3</span></span><span class="livecodeserver">con</span><span class="livecodeserver"></span><span class="livecodeserver"><span class="hljs-number">8</span></span><span class="livecodeserver">sequence</span><span class="livecodeserver"></span><span class="livecodeserver"><span class="hljs-number">0</span></span></code></pre></div><p class="note note-primary">  <b>HOSTè¯·æ±‚å¤´</b></p><p>æ—©æœŸ HTTP/1.0 ä¸­è®¤ä¸ºæ¯å°æœåŠ¡å™¨éƒ½ç»‘å®šä¸€ä¸ªå”¯ä¸€çš„ IP åœ°å€å¹¶æä¾›å•ä¸€çš„æœåŠ¡ï¼Œè¯·æ±‚æ¶ˆæ¯ä¸­çš„ URL å¹¶æ²¡æœ‰ä¼ é€’ä¸»æœºåã€‚è€Œéšç€è™šæ‹Ÿä¸»æœºçš„å‡ºç°ï¼Œä¸€å°ç‰©ç†æœåŠ¡å™¨ä¸Šå¯ä»¥å­˜åœ¨å¤šä¸ªè™šæ‹Ÿä¸»æœºï¼Œå¹¶ä¸”å®ƒä»¬å…±äº«åŒä¸€ä¸ª IP åœ°å€ã€‚</p><p>ä¸ºäº†æ”¯æŒè™šæ‹Ÿä¸»æœºï¼ŒHTTP/1.1 ä¸­æ·»åŠ äº† host è¯·æ±‚å¤´ï¼Œå¦‚<code>Host: www.example.com</code>ï¼Œè¯·æ±‚æ¶ˆæ¯å’Œå“åº”æ¶ˆæ¯ä¸­åº”å£°æ˜è¿™ä¸ªå­—æ®µï¼Œè‹¥è¯·æ±‚æ¶ˆæ¯ä¸­ç¼ºå°‘è¯¥å­—æ®µæ—¶æœåŠ¡ç«¯ä¼šå“åº”ä¸€ä¸ª 404 é”™è¯¯çŠ¶æ€ç ã€‚</p><p class="note note-primary">  <b>ç¼ºç‚¹</b></p><p>è™½ç„¶1.1ç‰ˆå…è®¸å¤ç”¨TCPè¿æ¥ï¼Œä½†æ˜¯åŒä¸€ä¸ªTCPè¿æ¥é‡Œé¢ï¼Œæ‰€æœ‰çš„æ•°æ®é€šä¿¡æ˜¯æŒ‰æ¬¡åºè¿›è¡Œçš„ã€‚æœåŠ¡å™¨åªæœ‰å¤„ç†å®Œä¸€ä¸ªå›åº”ï¼Œæ‰ä¼šè¿›è¡Œä¸‹ä¸€ä¸ªå›åº”ã€‚è¦æ˜¯å‰é¢çš„å›åº”ç‰¹åˆ«æ…¢ï¼Œåé¢å°±ä¼šæœ‰è®¸å¤šè¯·æ±‚æ’é˜Ÿç­‰ç€ã€‚è¿™ç§°ä¸º<a href="https://zh.wikipedia.org/wiki/é˜Ÿå¤´é˜»å¡">â€œé˜Ÿå¤´å µå¡â€</a>ï¼ˆHead-of-line blockingï¼‰ã€‚</p><p>ä¸ºäº†é¿å…è¿™ä¸ªé—®é¢˜ï¼Œåªæœ‰ä¸¤ç§æ–¹æ³•ï¼šä¸€æ˜¯å‡å°‘è¯·æ±‚æ•°ï¼ŒäºŒæ˜¯åŒæ—¶å¤šå¼€æŒä¹…è¿æ¥ã€‚è¿™å¯¼è‡´äº†å¾ˆå¤šçš„ç½‘é¡µä¼˜åŒ–æŠ€å·§ï¼Œæ¯”å¦‚åˆå¹¶è„šæœ¬å’Œæ ·å¼è¡¨ã€å°†å›¾ç‰‡åµŒå…¥CSSä»£ç ã€åŸŸååˆ†ç‰‡ï¼ˆdomain shardingï¼‰ç­‰ç­‰ã€‚å¦‚æœHTTPåè®®è®¾è®¡å¾—æ›´å¥½ä¸€äº›ï¼Œè¿™äº›é¢å¤–çš„å·¥ä½œæ˜¯å¯ä»¥é¿å…çš„ã€‚</p><h2 id="HTTPS"><a href="#HTTPS" class="headerlink" title="HTTPS"></a>HTTPS</h2><p>HTTP ç”±äºæ˜¯æ˜æ–‡ä¼ è¾“ï¼Œæ‰€è°“çš„æ˜æ–‡ï¼Œå°±æ˜¯è¯´å®¢æˆ·ç«¯ä¸æœåŠ¡ç«¯é€šä¿¡çš„ä¿¡æ¯éƒ½æ˜¯è‚‰çœ¼å¯â»…çš„ï¼Œéšæ„ä½¿ç”¨ä¸€ä¸ªæŠ“åŒ…å·¥å…·éƒ½å¯ä»¥æˆªè·é€šä¿¡çš„å†…å®¹ã€‚<br>æ‰€ä»¥å®‰å…¨ä¸Šå­˜åœ¨ä»¥ä¸‹ä¸‰ä¸ªâ»›é™©</p><ul><li><strong>çªƒå¬é£é™©</strong>ï¼šç¬¬ä¸‰æ–¹å¯ä»¥è·çŸ¥é€šä¿¡å†…å®¹ï¼›</li><li><strong>ç¯¡æ”¹é£é™©</strong>ï¼šç¬¬ä¸‰æ–¹å¯ä»¥ä¿®æ”¹é€šä¿¡å†…å®¹ï¼›</li><li><strong>å†’å……é£é™©</strong>ï¼šç¬¬ä¸‰æ–¹å¯ä»¥å†’å……ä»–äººèº«ä»½å‚ä¸é€šä¿¡ã€‚</li></ul><p>HTTPS åœ¨ HTTP ä¸ TCP å±‚ä¹‹é—´åŠ å…¥äº†SSL/TLSåè®®ï¼Œæ¥è§£å†³ä¸Šè¿°çš„â»›é™©ã€‚</p><ul><li>æ‰€æœ‰ä¿¡æ¯éƒ½æ˜¯<strong>åŠ å¯†ä¼ æ’­</strong>ï¼Œç¬¬ä¸‰æ–¹æ— æ³•çªƒå¬ï¼›</li><li>å…·æœ‰<strong>æ ¡éªŒæœºåˆ¶</strong>ï¼Œä¸€æ—¦è¢«ç¯¡æ”¹ï¼Œé€šä¿¡åŒæ–¹ä¼šç«‹åˆ»å‘ç°ï¼›</li><li>é…å¤‡<strong>èº«ä»½è¯ä¹¦</strong>ï¼Œé˜²æ­¢èº«ä»½è¢«å†’å……ã€‚</li></ul><p><img src="https://github.com/HerloConnell/BlogPicture/blob/CS-basics/å›¾è§£è®¡ç®—æœºç½‘ç»œç¬”è®°1.png?raw=true" alt=""></p><p>HTTPSç»ç”±<a href="https://zh.wikipedia.org/wiki/HTTP">HTTP</a>è¿›è¡Œé€šä¿¡ï¼Œä½†åˆ©ç”¨<a href="https://zh.wikipedia.org/wiki/ä¼ è¾“å±‚å®‰å…¨">SSL/TLS</a>æ¥<a href="https://zh.wikipedia.org/wiki/åŠ å¯†">åŠ å¯†</a>æ•°æ®åŒ…ã€‚HTTPSå¼€å‘çš„ä¸»è¦ç›®çš„ï¼Œæ˜¯æä¾›å¯¹ç½‘ç«™æœåŠ¡å™¨çš„èº«ä»½è®¤è¯ï¼Œä¿æŠ¤äº¤æ¢èµ„æ–™çš„éšç§ä¸å®Œæ•´æ€§ã€‚è¿™ä¸ªåè®®ç”±ç½‘æ™¯å…¬å¸ï¼ˆNetscapeï¼‰åœ¨1994å¹´é¦–æ¬¡æå‡ºï¼Œéšåæ‰©å±•åˆ°äº’è”ç½‘ä¸Šã€‚</p><p>å†å²ä¸Šï¼ŒHTTPSè¿æ¥ç»å¸¸ç”¨äºä¸‡ç»´ç½‘ä¸Šçš„äº¤æ˜“æ”¯ä»˜å’Œä¼ä¸šä¿¡æ¯ç³»ç»Ÿä¸­æ•æ„Ÿä¿¡æ¯çš„ä¼ è¾“ã€‚åœ¨2000å¹´ä»£æœ«è‡³2010å¹´ä»£åˆï¼ŒHTTPSå¼€å§‹å¹¿æ³›ä½¿ç”¨ï¼Œä»¥ç¡®ä¿å„ç±»å‹çš„ç½‘é¡µçœŸå®ï¼Œä¿æŠ¤è´¦æˆ·å’Œä¿æŒç”¨æˆ·é€šä¿¡ï¼Œèº«ä»½å’Œç½‘ç»œæµè§ˆçš„ç§å¯†æ€§ã€‚</p><p>åœ¨çœŸæ­£è®¤è¯†SSL/TLSä»¥å‰ï¼Œéœ€è¦äº†è§£ä¸€äº›åŸºç¡€çš„åŠ å¯†ç®—æ³•çŸ¥è¯†ã€‚</p><h3 id="åŠ å¯†ç®—æ³•"><a href="#åŠ å¯†ç®—æ³•" class="headerlink" title="åŠ å¯†ç®—æ³•"></a>åŠ å¯†ç®—æ³•</h3><p>åŠ å¯†ç®—æ³•åˆ†ä¸ºä»¥ä¸‹ä¸¤ç§ï¼š</p><p class="note note-primary">  <b>å¯¹ç§°åŠ å¯†</b></p><ul><li><p>ç”²æ–¹é€‰æ‹©æŸä¸€ç§åŠ å¯†è§„åˆ™ï¼Œå¯¹ä¿¡æ¯è¿›è¡ŒåŠ å¯†ï¼›ä¹™æ–¹ä½¿ç”¨åŒä¸€ç§è§„åˆ™ï¼Œå¯¹ä¿¡æ¯è¿›è¡Œè§£å¯†ï¼›</p></li><li><p>åŠ å¯†å’Œè§£å¯†ä½¿ç”¨åŒæ ·è§„åˆ™ï¼ˆç®€ç§°â€<strong>å¯†é’¥</strong>â€œï¼‰ã€‚</p></li></ul><p>ç”²æ–¹å¿…é¡»æŠŠåŠ å¯†è§„åˆ™å‘Šè¯‰ä¹™æ–¹ï¼Œå¦åˆ™æ— æ³•è§£å¯†ã€‚ä¿å­˜å’Œä¼ é€’å¯†é’¥ï¼Œå°±æˆäº†æœ€å¤´ç–¼çš„é—®é¢˜ã€‚</p><p>åæ¥ï¼Œäººä»¬è®¤è¯†åˆ°ï¼ŒåŠ å¯†å’Œè§£å¯†å¯ä»¥ä½¿ç”¨ä¸åŒçš„è§„åˆ™ï¼Œåªè¦è¿™ä¸¤ç§è§„åˆ™ä¹‹é—´å­˜åœ¨æŸç§å¯¹åº”å…³ç³»å³å¯ï¼Œè¿™æ ·å°±é¿å…äº†ç›´æ¥ä¼ é€’å¯†é’¥ã€‚</p><p class="note note-primary">  <b>ä¸å¯¹ç§°åŠ å¯†</b></p><ul><li>ä¹™æ–¹ç”Ÿæˆä¸¤æŠŠå¯†é’¥ï¼ˆå…¬é’¥å’Œç§é’¥ï¼‰ã€‚å…¬é’¥æ˜¯å…¬å¼€çš„ï¼Œä»»ä½•äººéƒ½å¯ä»¥è·å¾—ï¼Œç§é’¥åˆ™æ˜¯ä¿å¯†çš„ï¼›ç”²æ–¹è·å–ä¹™æ–¹çš„å…¬é’¥ï¼Œç„¶åç”¨å®ƒå¯¹ä¿¡æ¯åŠ å¯†ã€‚ä¹™æ–¹å¾—åˆ°åŠ å¯†åçš„ä¿¡æ¯ï¼Œç”¨ç§é’¥è§£å¯†ï¼›</li><li>ä¸å¯¹ç§°åŠ å¯†åˆç§°å…¬é’¥åŠ å¯†æ³•ï¼›</li><li>å…¬é’¥å’Œç§é’¥æ˜¯ä¸€ä¸€å¯¹åº”çš„å…³ç³»ï¼Œç”¨å…¬é’¥å¯ä»¥è§£å¼€ç§é’¥åŠ å¯†çš„ä¿¡æ¯ï¼Œåä¹‹äº¦æˆç«‹ï¼›</li><li>åŒæ—¶ç”Ÿæˆå…¬é’¥å’Œç§é’¥åº”è¯¥ç›¸å¯¹æ¯”è¾ƒå®¹æ˜“ï¼Œä½†æ˜¯ä»å…¬é’¥æ¨ç®—å‡ºç§é’¥ï¼Œåº”è¯¥æ˜¯å¾ˆå›°éš¾æˆ–ä¸å¯èƒ½çš„ï¼›</li><li>åœ¨åŒé’¥ä½“ç³»ä¸­ï¼Œ<strong>å…¬é’¥ç”¨æ¥åŠ å¯†/éªŒç­¾ï¼Œç§é’¥ç”¨æ¥è§£å¯†/ç­¾å</strong>ã€‚</li></ul><p>å¦‚æœå…¬é’¥åŠ å¯†çš„ä¿¡æ¯åªæœ‰ç§é’¥è§£å¾—å¼€ï¼Œé‚£ä¹ˆåªè¦ç§é’¥ä¸æ³„æ¼ï¼Œé€šä¿¡å°±æ˜¯å®‰å…¨çš„ã€‚</p><h3 id="æ•°å­—è¯ä¹¦"><a href="#æ•°å­—è¯ä¹¦" class="headerlink" title="æ•°å­—è¯ä¹¦"></a>æ•°å­—è¯ä¹¦</h3><p>ä¸å¯¹ç§°åŠ å¯†è¿‡ç¨‹ä¸­ï¼ŒåŒæ–¹çš„é€šä¿¡æ˜¯å»ºç«‹åœ¨å…¬é’¥å¯ä¿¡çš„åŸºç¡€ä¸Šçš„ï¼š</p><ol><li>æœåŠ¡å™¨å¯¹æ•°æ®è¿›è¡ŒHashç”Ÿæˆ<strong>æ‘˜è¦</strong>åï¼Œä½¿ç”¨ç§é’¥å¯¹æ‘˜è¦è¿›è¡Œç­¾åè¿ç®—ç”Ÿæˆ<strong>æ•°å­—ç­¾å</strong>ï¼ŒæœåŠ¡å™¨å°†æ•°æ®å’Œæ•°å­—ç­¾åä¸€åŒå‘ç»™å®¢æˆ·ç«¯ï¼›</li><li>å®¢æˆ·ç«¯å¯¹æ•°æ®è¿›è¡Œç›¸åŒçš„Hashï¼Œå¹¶å¯¹æ•°å­—ç­¾åä½¿ç”¨æœåŠ¡å™¨çš„å…¬é’¥è§£å¯†ï¼Œå¦‚æœè§£å¯†ç»“æœä¸Hashç»“æœç›¸åŒï¼Œåˆ™ç¡®è®¤ä¸ºæœåŠ¡å™¨å‘å‡ºã€‚</li></ol><p>å¦‚æœä¸€å¼€å§‹å®¢æˆ·ç«¯æ‹¿åˆ°çš„å…¬é’¥å°±æ˜¯å‡çš„è¯ï¼Œé‚£ä¹ˆæœåŠ¡å™¨åæ¥å‘å‡ºçš„ä»»ä½•å†…å®¹å®¢æˆ·ç«¯å‡æ— æ³•è¯†åˆ«ã€‚é—®é¢˜åœ¨äºå®¢æˆ·ç«¯è·å–å…¬é’¥çš„è¿‡ç¨‹ä¾ç„¶æ˜¯ä¸å®‰å…¨çš„ï¼Œä¸ºæ­¤æå‡ºæ•°å­—è¯ä¹¦çš„æ–¹æ³•ï¼Œé€šè¿‡å¯ä¿¡çš„ç¬¬ä¸‰æ–¹è¯ä¹¦é¢å‘æœºæ„ï¼ˆCAï¼‰ä¿è¯æœåŠ¡å™¨çš„å…¬é’¥é€šè¿‡å¯ä¿¡çš„æ–¹å¼ä¼ é€’ï¼š</p><ol><li>æœåŠ¡å™¨å°†è‡ªå·±çš„å…¬é’¥åŠå…¶ä»–ç›¸å…³ä¿¡æ¯å‘é€ç»™CAï¼ŒCAæ ¸å®èº«ä»½åä¸ºå…¶é¢å‘ä¸€ä¸ªæ•°å­—è¯ä¹¦ï¼Œè¯ä¹¦åŒ…æ‹¬æœåŠ¡å™¨å…¬é’¥ï¼Œè¯ä¹¦åŠæ³•æœºæ„ï¼Œæœ‰æ•ˆæœŸç­‰æ•°æ®ã€‚åŒæ—¶ï¼ŒCAç”Ÿæˆä¸€å¯¹å…¬é’¥ç§é’¥ï¼Œä½¿ç”¨ç§é’¥å¯¹æ•°å­—è¯ä¹¦è¿›è¡Œç­¾åï¼Œå¹¶å°†ç­¾åæ·»åŠ åˆ°æ•°å­—è¯ä¹¦ä¸­ï¼Œæ•°å­—è¯ä¹¦ = æœåŠ¡å™¨å…¬é’¥ç­‰ä¿¡æ¯ + è¿™äº›ä¿¡æ¯çš„æ•°å­—ç­¾åï¼›</li><li>å®¢æˆ·ç«¯ç³»ç»Ÿé»˜è®¤å®‰è£…äº†æ ¹è¯ä¹¦ï¼Œæ ¹è¯ä¹¦é‡Œè®°å½•äº†å¯ä»¥ä¿¡èµ–çš„CAæœºæ„ä¿¡æ¯åŠå…¬é’¥ä¿¡æ¯ï¼Œæ ¹è¯ä¹¦é¢„å…ˆå®‰è£…åœ¨ç³»ç»Ÿä¸­æœç»è¢«ç¯¡æ”¹çš„å¯èƒ½ï¼›</li><li>æœåŠ¡å™¨å°†æ•°æ®ï¼Œæ•°å­—ç­¾åï¼Œè‡ªèº«çš„æ•°å­—è¯ä¹¦ä¸€åŒå‘é€ç»™å®¢æˆ·ç«¯ï¼›</li><li>å®¢æˆ·ç«¯æ ¹æ®CAçš„å…¬é’¥å¯¹æ•°å­—è¯ä¹¦ä¸­çš„ç­¾åè§£å¯†ï¼Œå¹¶å¯¹æ•°å­—è¯ä¹¦åšHashè¿ç®—ï¼Œä¸¤è€…ç›¸åŒåˆ™å¯ä»¥ç¡®ä¿æ•°å­—è¯ä¹¦çš„å¯ä¿¡æ€§ï¼Œä»è¯ä¹¦ä¸­æ‹¿åˆ°æœåŠ¡å™¨çš„å…¬é’¥å³å¯è¿›è¡ŒéªŒç­¾ã€‚</li></ol><p><strong>ä¸ºä»€ä¹ˆå…ˆè¿›è¡Œæ‘˜è¦å†è¿›è¡Œç­¾åï¼Ÿ</strong></p><p>åŸæ•°æ®è¿‡å¤§ï¼ŒåŠ å¯†ç®—æ³•è€—æ—¶ã€‚</p><p><strong>æ•°å­—ç­¾åçš„ä½œç”¨</strong></p><p>å¯¹æ•°æ®è¿›è¡Œæ ¡éªŒï¼Œå¹¶ç¡®ä¿æ•°æ®çš„å‘é€è€…ã€‚</p><h3 id="SSL-TLSåè®®"><a href="#SSL-TLSåè®®" class="headerlink" title="SSL/TLSåè®®"></a>SSL/TLSåè®®</h3><p>SSL/TLSåè®®çš„åŸºæœ¬æ€è·¯æ˜¯é‡‡ç”¨<a href="https://en.wikipedia.org/wiki/Public-key_cryptography">å…¬é’¥åŠ å¯†æ³•</a>ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå®¢æˆ·ç«¯å…ˆå‘æœåŠ¡å™¨ç«¯ç´¢è¦å…¬é’¥ï¼Œç„¶åç”¨å…¬é’¥åŠ å¯†ä¿¡æ¯ï¼ŒæœåŠ¡å™¨æ”¶åˆ°å¯†æ–‡åï¼Œç”¨è‡ªå·±çš„ç§é’¥è§£å¯†ã€‚</p><p>ä½†æ˜¯ï¼Œè¿™é‡Œæœ‰ä¸ªé—®é¢˜ï¼šå…¬é’¥åŠ å¯†è®¡ç®—é‡å¤ªå¤§ï¼Œå¦‚ä½•å‡å°‘è€—ç”¨çš„æ—¶é—´ï¼Ÿ</p><p>é‡‡ç”¨<strong>æ··åˆåŠ å¯†</strong>ã€‚æ¯ä¸€æ¬¡å¯¹è¯ï¼Œå®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ç«¯éƒ½ç”Ÿæˆä¸€ä¸ªâ€<strong>å¯¹è¯å¯†é’¥</strong>â€œï¼Œç”¨å®ƒæ¥åŠ å¯†ä¿¡æ¯ã€‚ç”±äºâ€å¯¹è¯å¯†é’¥â€æ˜¯å¯¹ç§°åŠ å¯†ï¼Œæ‰€ä»¥è¿ç®—é€Ÿåº¦éå¸¸å¿«ï¼Œè€ŒæœåŠ¡å™¨å…¬é’¥åªç”¨äºåŠ å¯†â€å¯¹è¯å¯†é’¥â€æœ¬èº«ï¼Œè¿™æ ·å°±å‡å°‘äº†åŠ å¯†è¿ç®—çš„æ¶ˆè€—æ—¶é—´ã€‚</p><p>å› æ­¤ï¼ŒSSL/TLSåè®®çš„åŸºæœ¬è¿‡ç¨‹æ˜¯è¿™æ ·çš„ï¼š</p><ul><li><p>å®¢æˆ·ç«¯å‘æœåŠ¡å™¨ç«¯ç´¢è¦å¹¶éªŒè¯å…¬é’¥ï¼›</p></li><li><p>åŒæ–¹åå•†ç”Ÿæˆâ€å¯¹è¯å¯†é’¥â€ï¼›</p></li><li><p>åŒæ–¹é‡‡ç”¨â€å¯¹è¯å¯†é’¥â€è¿›è¡ŒåŠ å¯†é€šä¿¡ï¼›</p></li></ul><p>ä¸Šé¢è¿‡ç¨‹çš„å‰ä¸¤æ­¥ï¼Œåˆç§°ä¸ºâ€æ¡æ‰‹é˜¶æ®µâ€ï¼ˆSSL/TLSæ¡æ‰‹åœ¨TCPæ¡æ‰‹ä¹‹åï¼‰ã€‚</p><h3 id="SSL-TSLæ¡æ‰‹"><a href="#SSL-TSLæ¡æ‰‹" class="headerlink" title="SSL/TSLæ¡æ‰‹"></a>SSL/TSLæ¡æ‰‹</h3><p>åŸºäºRSAåŠ å¯†çš„æ¡æ‰‹è¿‡ç¨‹ï¼Œä¹Ÿæ˜¯åŸºç¡€çš„SSL/TSLæ¡æ‰‹è¿‡ç¨‹ã€‚</p><p><img src="https://github.com/HerloConnell/BlogPicture/blob/CS-basics/å›¾è§£è®¡ç®—æœºç½‘ç»œç¬”è®°2.png?raw=true" alt=""></p><p><strong>1. å®¢æˆ·ç«¯å‘å‡ºè¯·æ±‚ï¼ˆClientHelloï¼‰</strong></p><p>å®¢æˆ·ç«¯å‘æœåŠ¡å™¨å‘å‡ºåŠ å¯†é€šä¿¡çš„è¯·æ±‚ï¼Œç§°ä¸ºClientHelloè¯·æ±‚ï¼Œå®¢æˆ·ç«¯ä¸»è¦å‘æœåŠ¡å™¨æä¾›ä»¥ä¸‹ä¿¡æ¯ï¼š</p><p class="note note-secondary">  ï¼ˆ1ï¼‰æ”¯æŒçš„åè®®ç‰ˆæœ¬ï¼Œæ¯”å¦‚TLS 1.0ç‰ˆã€‚  <br>  ï¼ˆ2ï¼‰ä¸€ä¸ªå®¢æˆ·ç«¯ç”Ÿæˆçš„éšæœºæ•°Client randomï¼Œç¨åç”¨äºç”Ÿæˆ"å¯¹è¯å¯†é’¥"ã€‚  <br>  ï¼ˆ3ï¼‰æ”¯æŒçš„åŠ å¯†æ–¹æ³•ï¼Œæ¯”å¦‚RSAå…¬é’¥åŠ å¯†ã€‚  <br>  ï¼ˆ4ï¼‰æ”¯æŒçš„å‹ç¼©æ–¹æ³•ã€‚</p><p><strong>2. æœåŠ¡å™¨å›åº”ï¼ˆSeverHelloï¼‰</strong></p><p>æœåŠ¡å™¨çš„å›åº”åŒ…å«ä»¥ä¸‹å†…å®¹ï¼š</p><p class="note note-secondary">  ï¼ˆ1ï¼‰ç¡®è®¤ä½¿ç”¨çš„åŠ å¯†é€šä¿¡åè®®ç‰ˆæœ¬ï¼Œæ¯”å¦‚TLS 1.0ç‰ˆæœ¬ã€‚å¦‚æœæµè§ˆå™¨ä¸æœåŠ¡å™¨æ”¯æŒçš„ç‰ˆæœ¬ä¸ä¸€è‡´ï¼ŒæœåŠ¡å™¨å…³é—­åŠ å¯†é€šä¿¡ã€‚  <br>  ï¼ˆ2ï¼‰ä¸€ä¸ªæœåŠ¡å™¨ç”Ÿæˆçš„éšæœºæ•°Server randomï¼Œç¨åç”¨äºç”Ÿæˆ"å¯¹è¯å¯†é’¥"ã€‚  <br>  ï¼ˆ3ï¼‰ç¡®è®¤ä½¿ç”¨çš„åŠ å¯†æ–¹æ³•ï¼Œæ¯”å¦‚RSAå…¬é’¥åŠ å¯†ã€‚  <br>  ï¼ˆ4ï¼‰æœåŠ¡å™¨è¯ä¹¦ã€‚</p><p><strong>3. å®¢æˆ·ç«¯å›åº”</strong></p><p>å®¢æˆ·ç«¯æ”¶åˆ°æœåŠ¡å™¨å›åº”ä»¥åï¼Œé¦–å…ˆéªŒè¯æœåŠ¡å™¨è¯ä¹¦ã€‚å¦‚æœè¯ä¹¦ä¸æ˜¯å¯ä¿¡æœºæ„é¢å¸ƒã€æˆ–è€…è¯ä¹¦ä¸­çš„åŸŸåä¸å®é™…åŸŸåä¸ä¸€è‡´ã€æˆ–è€…è¯ä¹¦å·²ç»è¿‡æœŸï¼Œå°±ä¼šå‘è®¿é—®è€…æ˜¾ç¤ºä¸€ä¸ªè­¦å‘Šï¼Œç”±å…¶é€‰æ‹©æ˜¯å¦è¿˜è¦ç»§ç»­é€šä¿¡ã€‚</p><p>å¦‚æœè¯ä¹¦æ²¡æœ‰é—®é¢˜ï¼Œå®¢æˆ·ç«¯å°±ä¼šä»è¯ä¹¦ä¸­å–å‡ºæœåŠ¡å™¨çš„å…¬é’¥ã€‚ç„¶åï¼Œå‘æœåŠ¡å™¨å‘é€ä¸‹é¢ä¸‰é¡¹ä¿¡æ¯ã€‚</p><p class="note note-secondary">  ï¼ˆ1ï¼‰ä¸€ä¸ªéšæœºæ•°ã€‚è¯¥éšæœºæ•°ç”¨æœåŠ¡å™¨å…¬é’¥åŠ å¯†ï¼Œé˜²æ­¢è¢«çªƒå¬ã€‚  <br>  ï¼ˆ2ï¼‰ç¼–ç æ”¹å˜é€šçŸ¥ï¼Œè¡¨ç¤ºéšåçš„ä¿¡æ¯éƒ½å°†ç”¨åŒæ–¹å•†å®šçš„åŠ å¯†æ–¹æ³•å’Œå¯†é’¥å‘é€ã€‚  <br>  ï¼ˆ3ï¼‰å®¢æˆ·ç«¯æ¡æ‰‹ç»“æŸé€šçŸ¥ï¼Œè¡¨ç¤ºå®¢æˆ·ç«¯çš„æ¡æ‰‹é˜¶æ®µå·²ç»ç»“æŸã€‚è¿™ä¸€é¡¹åŒæ—¶ä¹Ÿæ˜¯å‰é¢å‘é€çš„æ‰€æœ‰å†…å®¹çš„hashå€¼ï¼Œç”¨æ¥ä¾›æœåŠ¡å™¨æ ¡éªŒã€‚</p><p> æ­¤å¤–ï¼Œå¦‚æœå‰ä¸€æ­¥ï¼ŒæœåŠ¡å™¨è¦æ±‚å®¢æˆ·ç«¯è¯ä¹¦ï¼Œå®¢æˆ·ç«¯ä¼šåœ¨è¿™ä¸€æ­¥å‘é€è¯ä¹¦åŠç›¸å…³ä¿¡æ¯ã€‚</p><p>ä¸Šé¢ç¬¬ä¸€é¡¹çš„éšæœºæ•°ï¼Œæ˜¯æ•´ä¸ªæ¡æ‰‹é˜¶æ®µå‡ºç°çš„ç¬¬ä¸‰ä¸ªéšæœºæ•°ï¼Œåˆç§°â€pre-master keyâ€ã€‚æœ‰äº†å®ƒä»¥åï¼Œå®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨å°±åŒæ—¶æœ‰äº†ä¸‰ä¸ªéšæœºæ•°ï¼Œæ¥ç€åŒæ–¹å°±ç”¨äº‹å…ˆå•†å®šçš„åŠ å¯†æ–¹æ³•ï¼Œå„è‡ªç”Ÿæˆæœ¬æ¬¡ä¼šè¯æ‰€ç”¨çš„åŒä¸€æŠŠâ€ä¼šè¯å¯†é’¥â€ã€‚</p><p>å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œè¯¥è¿‡ç¨‹ä¹‹å‰çš„é˜¶æ®µå‡ä¸ºæ˜æ–‡ä¼ è¾“ï¼›è€Œpre-master keyä½¿ç”¨æœåŠ¡å™¨å…¬é’¥åŠ å¯†ï¼Œä¹‹åå®¢æˆ·ç«¯ä¸æœåŠ¡å™¨ç«¯å‡ç”Ÿæˆä¼šè¯å¯†é’¥ï¼Œæ•°æ®ä¼ è¾“å‡ä¸ºåŠ å¯†ä¼ è¾“ã€‚</p><p><strong>4. æœåŠ¡å™¨çš„æœ€åå›åº”</strong></p><p>æœåŠ¡å™¨æ”¶åˆ°å®¢æˆ·ç«¯çš„ç¬¬ä¸‰ä¸ªéšæœºæ•°pre-master keyä¹‹åï¼Œè®¡ç®—ç”Ÿæˆæœ¬æ¬¡ä¼šè¯æ‰€ç”¨çš„â€ä¼šè¯å¯†é’¥â€ã€‚ç„¶åï¼Œå‘å®¢æˆ·ç«¯æœ€åå‘é€ä¸‹é¢ä¿¡æ¯ã€‚</p><p class="note note-secondary">  ï¼ˆ1ï¼‰ç¼–ç æ”¹å˜é€šçŸ¥ï¼Œè¡¨ç¤ºéšåçš„ä¿¡æ¯éƒ½å°†ç”¨åŒæ–¹å•†å®šçš„åŠ å¯†æ–¹æ³•å’Œå¯†é’¥å‘é€ã€‚  <br>  ï¼ˆ2ï¼‰æœåŠ¡å™¨æ¡æ‰‹ç»“æŸé€šçŸ¥ï¼Œè¡¨ç¤ºæœåŠ¡å™¨çš„æ¡æ‰‹é˜¶æ®µå·²ç»ç»“æŸã€‚è¿™ä¸€é¡¹åŒæ—¶ä¹Ÿæ˜¯å‰é¢å‘é€çš„æ‰€æœ‰å†…å®¹çš„hashå€¼ï¼Œç”¨æ¥ä¾›å®¢æˆ·ç«¯æ ¡éªŒã€‚</p><p>è‡³æ­¤ï¼Œæ•´ä¸ªæ¡æ‰‹é˜¶æ®µå…¨éƒ¨ç»“æŸã€‚æ¥ä¸‹æ¥ï¼Œå®¢æˆ·ç«¯ä¸æœåŠ¡å™¨è¿›å…¥åŠ å¯†é€šä¿¡ï¼Œå°±å®Œå…¨æ˜¯ä½¿ç”¨æ™®é€šçš„HTTPåè®®ï¼Œåªä¸è¿‡ç”¨â€ä¼šè¯å¯†é’¥â€åŠ å¯†å†…å®¹ã€‚</p><p>ä½¿ç”¨ RSAå¯†é’¥åå•†ç®—æ³•çš„æœ€å¤§é—®é¢˜æ˜¯ä¸æ”¯æŒå‰å‘ä¿å¯†ã€‚æ•´ä¸ªæ¡æ‰‹é˜¶æ®µéƒ½ä¸åŠ å¯†ï¼ˆä¹Ÿæ²¡æ³•åŠ å¯†ï¼‰ï¼Œéƒ½æ˜¯æ˜æ–‡çš„ã€‚å¦‚æœæœ‰äººçªƒå¬é€šä¿¡ï¼Œä»–å¯ä»¥çŸ¥é“åŒæ–¹é€‰æ‹©çš„åŠ å¯†æ–¹æ³•ï¼Œä»¥åŠä¸‰ä¸ªéšæœºæ•°ä¸­çš„ä¸¤ä¸ªã€‚æ•´ä¸ªé€šè¯çš„å®‰å…¨ï¼Œåªå–å†³äºç¬¬ä¸‰ä¸ªéšæœºæ•°ï¼ˆPremaster secretï¼‰èƒ½ä¸èƒ½è¢«ç ´è§£ã€‚æ‰€ä»¥ä¸€æ—¦æœåŠ¡ç«¯çš„ç§é’¥æ³„æ¼ äº†ï¼Œè¿‡å»è¢«ç¬¬ä¸‰æ–¹æˆªè·çš„æ‰€æœ‰ TLS é€šè®¯å¯†æ–‡éƒ½ä¼šè¢«ç ´è§£ã€‚æ‰€ä»¥ç›®å‰ä½¿ç”¨è¾ƒå¤šçš„ä¸º<strong>ECDHEåŠ å¯†æ³•</strong>ã€‚</p><h3 id="DHç®—æ³•"><a href="#DHç®—æ³•" class="headerlink" title="DHç®—æ³•"></a>DHç®—æ³•</h3><p><strong>ç¦»æ•£å¯¹æ•°</strong></p><p>å‡å®š a, p å‡æ˜¯ç´ æ•°ï¼Œä¸‹é¢ä¸¤ä¸ªé›†åˆç›¸ç­‰ï¼Œè¯æ˜è¿‡ç¨‹è¯·å‚è€ƒ <a href="http://www.amazon.com/Cryptography-Network-Security-Principles-Practice/dp/0133354695">Cryptography and Network Security</a> ç¬¬å…«ç« ï¼š</p><div class="code-wrapper"><pre><code class="hljs no">&#123; a^1 mod p, a^2 mod p, ..., a^(p-1) mod p &#125; = &#123;1, 2, ... , p-1 &#125;   &#123;&#125; è¡¨ç¤ºé›†åˆ</code></pre></div><p>ä¸Šè¿°å¼å­å¯æ¦‚æ‹¬æˆä»¥ä¸‹ä¸‰ç‚¹ï¼Œå¯¹äº 1 &lt;= x,y &lt;= p - 1ï¼Œæœ‰ï¼š</p><ul><li>a^x mod p ä¸€å®šå±äº {1, 2, â€¦, p -1 }</li><li>å¦‚æœ x != yï¼Œåˆ™ a^x mod p != a^y mod p</li><li>å¯¹äº 1 &lt;= b &lt;= p - 1ï¼Œä¸€å®šå­˜åœ¨å”¯ä¸€çš„ 1 &lt;= x &lt;= p-1ï¼Œä½¿å¾— b = a^x mod p</li></ul><p>ç¬¬ä¸‰ç‚¹åœ¨æ±‚è§£ä¸Šæœ‰è¿™ä¹ˆä¸€ä¸ªç‰¹ç‚¹ï¼šå·²çŸ¥ x æ±‚ b éå¸¸å®¹æ˜“ï¼Œå·²çŸ¥ b æ±‚ x éå¸¸å›°éš¾ï¼Œç‰¹åˆ«å½“ p å¾ˆå¤§æ—¶ï¼Œæ±‚è§£çš„å¤æ‚åº¦éå¸¸é«˜ï¼Œæ‰€ä»¥å®ƒåˆè¢«ç§°ä¸ºç¦»æ•£å¯¹æ•°é—®é¢˜ (<a href="https://en.wikipedia.org/wiki/Discrete_logarithm">Discrete logarithm</a>)ï¼Œå®ƒæ˜¯ DH ç®—æ³•èƒ½å¤Ÿå®‰å…¨äº¤æ¢å¯†é’¥çš„åŸºç¡€</p><p><strong>æ±‚æ¨¡å…¬å¼</strong></p><p>å‡è®¾ q ä¸ºç´ æ•°ï¼Œå¯¹äºæ­£æ•´æ•° a,x,yï¼Œæœ‰ï¼š</p><div class="code-wrapper"><pre><code class="hljs no">(a^x mod p)^y mod p = a^(xy) mod p</code></pre></div><p>è¯æ˜å¦‚ä¸‹ï¼š</p><div class="code-wrapper"><pre><code class="hljs no">ä»¤ a^x = mp + nï¼Œ å…¶ä¸­ m, n ä¸ºè‡ªç„¶æ•°ï¼Œ 0 &lt;= n &lt; pï¼Œåˆ™æœ‰C = (a^x mod p)^y mod p  = ((mp + n) mod p)^y mod p  = n^y mod p  = (mp +n)^y mod p  = a^(xy) mod p</code></pre></div><p><strong>Deffie-Hellman ç®—æ³•</strong></p><ol><li>é¦–å…ˆ A, B å…±åŒé€‰å– p å’Œ a ä¸¤ä¸ªç´ æ•°ï¼Œp å’Œ a å‡å…¬å¼€ï¼›</li><li>ä¹‹å A é€‰æ‹©ä¸€ä¸ªè‡ªç„¶æ•° Xa &lt; pï¼Œè®¡ç®—å‡º Ya = a^Xa mod pï¼ŒXa ä¿å¯†ï¼ŒYa å…¬å¼€ï¼›</li><li>åŒç†ï¼ŒB é€‰æ‹© Xb &lt; p å¹¶è®¡ç®—å‡º Yb = a^Xb mod pï¼Œå…¶ä¸­ Xb ä¿å¯†ï¼ŒYb å…¬å¼€ï¼›</li><li>A ç”¨ Yb å’Œ Xa è®¡ç®—å‡ºå¯†é’¥ K = Yb^Xa mod pï¼Œè€Œ B ç”¨ Ya å’Œ Xb è®¡ç®—å¯†é’¥ K = Ya^Xb mod pã€‚</li></ol><p>æµç¨‹å¦‚ä¸‹ï¼š</p><div class="code-wrapper"><pre><code class="hljs no">+-------------------------------------------------------------------+|                    Global Pulic Elements                          ||                                                                   ||       p                               prime number                ||       a                               prime number, a &lt; p         |+-------------------------------------------------------------------++-------------------------------------------------------------------+|                    User A Key Generation                          ||                                                                   ||       Select private Xa               Xa &lt; p                      ||       Calculate public Ya             Ya = a^Xa mod p             |+-------------------------------------------------------------------++-------------------------------------------------------------------+|                    User B Key Generation                          ||                                                                   ||       Select private Xb               Xb &lt; p                      ||       Calculate public Yb             Yb = a^Xb mod p             |+-------------------------------------------------------------------++-------------------------------------------------------------------+|               Calculation of Secret Key by User A                 ||                                                                   ||       Secret Key K                    K = Yb^Xa mod p             |+-------------------------------------------------------------------++-------------------------------------------------------------------+|               Calculation of Secret Key by User B                 ||                                                                   ||       Secret Key K                    K = Ya^Xb mod p             |+-------------------------------------------------------------------+</code></pre></div><p>ä¸‹é¢è¯æ˜ï¼ŒA å’Œ B è®¡ç®—å‡ºæ¥çš„å¯†é’¥ K ç›¸åŒã€‚</p><div class="code-wrapper"><pre><code class="hljs no">K = Yb^Xa mod p  = (a^Xb mod p)^Xa mod p  = a^(Xa * Xb) mod p          æ ¹æ®ä¸Šè¿°æ±‚æ¨¡å…¬å¼  = (a^Xa mod p)^Xb mod p  = Ya^Xb mod p</code></pre></div><p>ä¸Šé¢ä¸€å…±å‡ºç°äº† a, p, Xa, Ya, Xb, Yb, K å…± 7 ä¸ªæ•°ï¼Œå…¶ä¸­ï¼š</p><ul><li>å…¬å¼€çš„æ•°ï¼ša, p, Ya, Yb</li><li>éå…¬å¼€æ•°ï¼šXa, Xb, K</li></ul><p>é€šå¸¸æƒ…å†µä¸‹ï¼Œa ä¸€èˆ¬ä¸º 2 æˆ– 5ï¼Œè€Œ p çš„å–å€¼éå¸¸å¤§ï¼Œè‡³å°‘å‡ ç™¾ä½ï¼ŒXa å’Œ Xb çš„å–å€¼ä¹Ÿéå¸¸å¤§ï¼Œå…¶å¤æ‚åº¦è‡³å°‘ä¸º <a href="https://en.wikipedia.org/wiki/Pollard&#39;s_rho_algorithm_for_logarithms">O(p^0.5)</a>ã€‚å¯¹äºæ”»å‡»è€…æ¥è¯´ï¼Œå·²çŸ¥ Yaï¼ŒXa çš„æ±‚è§£éå¸¸å›°éš¾ï¼ŒåŒç† Xb çš„æ±‚è§£ä¹Ÿå¾ˆå›°éš¾ï¼Œæ‰€ä»¥æ”»å‡»è€…éš¾ä»¥æ±‚å‡º Kï¼Œæ‰€ä»¥ DH èƒ½å¤Ÿä¿è¯é€šä¿¡åŒæ–¹åœ¨<strong>é€æ˜</strong>çš„ä¿¡é“ä¸­å®‰å…¨çš„äº¤æ¢å¯†é’¥ã€‚</p><p>DH ç®—æ³•ä¸»è¦å®ç°æ–¹æ³•ä¸º<strong>DHE ç®—æ³•</strong>ï¼ŒDHE ç®—æ³•è®©åŒæ–¹çš„ç§é’¥åœ¨æ¯æ¬¡å¯†é’¥äº¤æ¢é€šä¿¡æ—¶ï¼Œéƒ½æ˜¯éšæœºç”Ÿæˆçš„ã€ä¸´æ—¶çš„ï¼ŒE å…¨ç§°æ˜¯ ephemeralï¼ˆä¸´æ—¶æ€§çš„ï¼‰ã€‚è¿™æ ·å°±ä¿è¯äº† <strong>å‰å‘å®‰å…¨</strong>ï¼Œå³ä½¿æ›¾ç»çš„é€šä¿¡è¿‡ç¨‹è¢«ç ´è§£ï¼Œä¸ä¼šå½±å“ç°åœ¨çš„é€šä¿¡çš„å®‰å…¨æ€§ã€‚</p><h2 id="HTTP-2"><a href="#HTTP-2" class="headerlink" title="HTTP/2"></a>HTTP/2</h2><p>2015å¹´ï¼ŒHTTP/2 å‘å¸ƒã€‚å®ƒä¸å« HTTP/2.0ï¼Œæ˜¯å› ä¸ºæ ‡å‡†å§”å‘˜ä¼šä¸æ‰“ç®—å†å‘å¸ƒå­ç‰ˆæœ¬äº†ï¼Œä¸‹ä¸€ä¸ªæ–°ç‰ˆæœ¬å°†æ˜¯ HTTP/3ã€‚HTTP/2å¿…é¡»åœ¨HTTPS ç¯å¢ƒæ‰ä¼šç”Ÿæ•ˆã€‚</p><p class="note note-primary">  <b>äºŒè¿›åˆ¶åè®®</b></p> <p>HTTP/1.1 ç‰ˆçš„å¤´ä¿¡æ¯è‚¯å®šæ˜¯æ–‡æœ¬ï¼ˆASCIIç¼–ç ï¼‰ï¼Œæ•°æ®ä½“å¯ä»¥æ˜¯æ–‡æœ¬ï¼Œä¹Ÿå¯ä»¥æ˜¯äºŒè¿›åˆ¶ã€‚HTTP/2 åˆ™æ˜¯ä¸€ä¸ªå½»åº•çš„äºŒè¿›åˆ¶åè®®ï¼Œå¤´ä¿¡æ¯å’Œæ•°æ®ä½“éƒ½æ˜¯äºŒè¿›åˆ¶ï¼Œå¹¶ä¸”ç»Ÿç§°ä¸ºâ€å¸§â€ï¼ˆframeï¼‰ï¼šå¤´ä¿¡æ¯å¸§å’Œæ•°æ®å¸§ã€‚</p><p>äºŒè¿›åˆ¶åè®®çš„ä¸€ä¸ªå¥½å¤„æ˜¯ï¼Œå¯ä»¥å®šä¹‰é¢å¤–çš„å¸§ã€‚HTTP/2 å®šä¹‰äº†è¿‘åç§å¸§ï¼Œä¸ºå°†æ¥çš„é«˜çº§åº”ç”¨æ‰“å¥½äº†åŸºç¡€ã€‚å¦‚æœä½¿ç”¨æ–‡æœ¬å®ç°è¿™ç§åŠŸèƒ½ï¼Œè§£ææ•°æ®å°†ä¼šå˜å¾—éå¸¸éº»çƒ¦ï¼ŒäºŒè¿›åˆ¶è§£æåˆ™æ–¹ä¾¿å¾—å¤šã€‚</p><p class="note note-primary">  <b>å¤šå·¥</b></p> <p>HTTP/2 å¤ç”¨TCPè¿æ¥ï¼Œåœ¨ä¸€ä¸ªè¿æ¥é‡Œï¼Œå®¢æˆ·ç«¯å’Œæµè§ˆå™¨éƒ½å¯ä»¥åŒæ—¶å‘é€å¤šä¸ªè¯·æ±‚æˆ–å›åº”ï¼Œè€Œä¸”ä¸ç”¨æŒ‰ç…§é¡ºåºä¸€ä¸€å¯¹åº”ï¼Œè¿™æ ·å°±é¿å…äº†â€é˜Ÿå¤´å µå¡â€ã€‚</p><p>ä¸¾ä¾‹æ¥è¯´ï¼Œåœ¨ä¸€ä¸ªTCPè¿æ¥é‡Œé¢ï¼ŒæœåŠ¡å™¨åŒæ—¶æ”¶åˆ°äº†Aè¯·æ±‚å’ŒBè¯·æ±‚ï¼Œäºæ˜¯å…ˆå›åº”Aè¯·æ±‚ï¼Œç»“æœå‘ç°å¤„ç†è¿‡ç¨‹éå¸¸è€—æ—¶ï¼Œäºæ˜¯å°±å‘é€Aè¯·æ±‚å·²ç»å¤„ç†å¥½çš„éƒ¨åˆ†ï¼Œ æ¥ç€å›åº”Bè¯·æ±‚ï¼Œå®Œæˆåï¼Œå†å‘é€Aè¯·æ±‚å‰©ä¸‹çš„éƒ¨åˆ†ã€‚</p><p>è¿™æ ·åŒå‘çš„ã€å®æ—¶çš„é€šä¿¡ï¼Œå°±å«åšå¤šå·¥ï¼ˆMultiplexingï¼‰ã€‚</p><p class="note note-primary">  <b>æ•°æ®æµ</b></p> <p>å› ä¸º HTTP/2 çš„æ•°æ®åŒ…æ˜¯ä¸æŒ‰é¡ºåºå‘é€çš„ï¼ŒåŒä¸€ä¸ªè¿æ¥é‡Œé¢è¿ç»­çš„æ•°æ®åŒ…ï¼Œå¯èƒ½å±äºä¸åŒçš„å›åº”ã€‚å› æ­¤ï¼Œå¿…é¡»è¦å¯¹æ•°æ®åŒ…åšæ ‡è®°ï¼ŒæŒ‡å‡ºå®ƒå±äºå“ªä¸ªå›åº”ã€‚</p><p>HTTP/2 å°†æ¯ä¸ªè¯·æ±‚æˆ–å›åº”çš„æ‰€æœ‰æ•°æ®åŒ…ï¼Œç§°ä¸ºä¸€ä¸ªæ•°æ®æµï¼ˆstreamï¼‰ã€‚æ¯ä¸ªæ•°æ®æµéƒ½æœ‰ä¸€ä¸ªç‹¬ä¸€æ— äºŒçš„ç¼–å·ã€‚æ•°æ®åŒ…å‘é€çš„æ—¶å€™ï¼Œéƒ½å¿…é¡»æ ‡è®°æ•°æ®æµIDï¼Œç”¨æ¥åŒºåˆ†å®ƒå±äºå“ªä¸ªæ•°æ®æµã€‚å¦å¤–è¿˜è§„å®šï¼Œå®¢æˆ·ç«¯å‘å‡ºçš„æ•°æ®æµï¼ŒIDä¸€å¾‹ä¸ºå¥‡æ•°ï¼ŒæœåŠ¡å™¨å‘å‡ºçš„ï¼ŒIDä¸ºå¶æ•°ã€‚</p><p>æ•°æ®æµå‘é€åˆ°ä¸€åŠçš„æ—¶å€™ï¼Œå®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨éƒ½å¯ä»¥å‘é€ä¿¡å·ï¼ˆ<code>RST_STREAM</code>å¸§ï¼‰ï¼Œå–æ¶ˆè¿™ä¸ªæ•°æ®æµã€‚1.1ç‰ˆå–æ¶ˆæ•°æ®æµçš„å”¯ä¸€æ–¹æ³•ï¼Œå°±æ˜¯å…³é—­TCPè¿æ¥ã€‚è¿™å°±æ˜¯è¯´ï¼ŒHTTP/2 å¯ä»¥å–æ¶ˆæŸä¸€æ¬¡è¯·æ±‚ï¼ŒåŒæ—¶ä¿è¯TCPè¿æ¥è¿˜æ‰“å¼€ç€ï¼Œå¯ä»¥è¢«å…¶ä»–è¯·æ±‚ä½¿ç”¨ã€‚</p><p>å®¢æˆ·ç«¯è¿˜å¯ä»¥æŒ‡å®šæ•°æ®æµçš„ä¼˜å…ˆçº§ã€‚ä¼˜å…ˆçº§è¶Šé«˜ï¼ŒæœåŠ¡å™¨å°±ä¼šè¶Šæ—©å›åº”ã€‚</p><p class="note note-primary">  <b>å¤´ä¿¡æ¯å‹ç¼©</b></p> <p>HTTP åè®®ä¸å¸¦æœ‰çŠ¶æ€ï¼Œæ¯æ¬¡è¯·æ±‚éƒ½å¿…é¡»é™„ä¸Šæ‰€æœ‰ä¿¡æ¯ã€‚æ‰€ä»¥ï¼Œè¯·æ±‚çš„å¾ˆå¤šå­—æ®µéƒ½æ˜¯é‡å¤çš„ï¼Œæ¯”å¦‚<code>Cookie</code>å’Œ<code>User Agent</code>ï¼Œä¸€æ¨¡ä¸€æ ·çš„å†…å®¹ï¼Œæ¯æ¬¡è¯·æ±‚éƒ½å¿…é¡»é™„å¸¦ï¼Œè¿™ä¼šæµªè´¹å¾ˆå¤šå¸¦å®½ï¼Œä¹Ÿå½±å“é€Ÿåº¦ã€‚</p><p>HTTP/2 å¯¹è¿™ä¸€ç‚¹åšäº†ä¼˜åŒ–ï¼Œå¼•å…¥äº†å¤´ä¿¡æ¯å‹ç¼©æœºåˆ¶ï¼ˆheader compressionï¼‰ã€‚ä¸€æ–¹é¢ï¼Œå¤´ä¿¡æ¯ä½¿ç”¨<code>gzip</code>æˆ–<code>compress</code>å‹ç¼©åå†å‘é€ï¼›å¦ä¸€æ–¹é¢ï¼Œå®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨åŒæ—¶ç»´æŠ¤ä¸€å¼ å¤´ä¿¡æ¯è¡¨ï¼Œæ‰€æœ‰å­—æ®µéƒ½ä¼šå­˜å…¥è¿™ä¸ªè¡¨ï¼Œç”Ÿæˆä¸€ä¸ªç´¢å¼•å·ï¼Œä»¥åå°±ä¸å‘é€åŒæ ·å­—æ®µäº†ï¼Œåªå‘é€ç´¢å¼•å·ï¼Œè¿™æ ·å°±æé«˜é€Ÿåº¦äº†ã€‚</p><p class="note note-primary">  <b>æœåŠ¡å™¨æ¨é€</b></p> <p>HTTP/2 å…è®¸æœåŠ¡å™¨æœªç»è¯·æ±‚ï¼Œä¸»åŠ¨å‘å®¢æˆ·ç«¯å‘é€èµ„æºï¼Œè¿™å«åšæœåŠ¡å™¨æ¨é€ï¼ˆserver pushï¼‰ã€‚</p><p>å¸¸è§åœºæ™¯æ˜¯å®¢æˆ·ç«¯è¯·æ±‚ä¸€ä¸ªç½‘é¡µï¼Œè¿™ä¸ªç½‘é¡µé‡Œé¢åŒ…å«å¾ˆå¤šé™æ€èµ„æºã€‚æ­£å¸¸æƒ…å†µä¸‹ï¼Œå®¢æˆ·ç«¯å¿…é¡»æ”¶åˆ°ç½‘é¡µåï¼Œè§£æHTMLæºç ï¼Œå‘ç°æœ‰é™æ€èµ„æºï¼Œå†å‘å‡ºé™æ€èµ„æºè¯·æ±‚ã€‚å…¶å®ï¼ŒæœåŠ¡å™¨å¯ä»¥é¢„æœŸåˆ°å®¢æˆ·ç«¯è¯·æ±‚ç½‘é¡µåï¼Œå¾ˆå¯èƒ½ä¼šå†è¯·æ±‚é™æ€èµ„æºï¼Œæ‰€ä»¥å°±ä¸»åŠ¨æŠŠè¿™äº›é™æ€èµ„æºéšç€ç½‘é¡µä¸€èµ·å‘ç»™å®¢æˆ·ç«¯äº†ã€‚</p><h2 id="å‚è€ƒèµ„æ–™-1"><a href="#å‚è€ƒèµ„æ–™-1" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h2><p><a href="https://www.jianshu.com/p/9453579154e3">creepycool.User-Agentæ ¼å¼å«ä¹‰ä¸ç¤ºä¾‹</a></p><p><a href="https://www.jianshu.com/p/c5cf6a1967d1">ç‹—å­æ¸£æ¸£.HTTPè¯·æ±‚å¤´ä¹‹User-Agent</a></p><p><a href="https://www.ruanyifeng.com/blog/2013/06/rsa_algorithm_part_one.html">é˜®ä¸€å³°.RSAç®—æ³•åŸç†ï¼ˆä¸€ï¼‰</a></p><p><a href="https://www.ruanyifeng.com/blog/2014/02/ssl_tls.html">é˜®ä¸€å³°.SSL/TLSåè®®è¿è¡Œæœºåˆ¶çš„æ¦‚è¿°</a></p><p><a href="https://www.ruanyifeng.com/blog/2014/09/illustration-ssl.html">é˜®ä¸€å³°.å›¾è§£SSL/TLSåè®®</a></p><p><a href="https://juejin.cn/post/6895624327896432654#heading-9">æ´›ç¦¹Keith.TLS è¯¦è§£æ¡æ‰‹æµç¨‹</a></p><p><a href="https://mp.weixin.qq.com/s/bUy220-ect00N4gnO0697A">å°æ—coding.å›¾è§£ HTTP å¸¸è§çš„é¢è¯•é¢˜</a></p><p><a href="https://www.ruanyifeng.com/blog/2011/08/what_is_a_digital_signature.html">é˜®ä¸€å³°.æ•°å­—ç­¾åæ˜¯ä»€ä¹ˆ</a></p><p><a href="http://www.ruanyifeng.com/blog/2006/12/notes_on_cryptography.html">é˜®ä¸€å³°.å¯†ç å­¦ç¬”è®°</a></p><p><a href="https://segmentfault.com/a/1190000024523772">ç¼–ç¨‹æŒ‡åŒ—.åŠ å¯†ã€æ•°å­—ç­¾åå’Œæ•°å­—è¯ä¹¦</a></p><p><a href="https://www.bilibili.com/video/BV18N411X7ty?from=search&amp;seid=14278761812457535723">ä½³æœµ.æ•°å­—ç­¾å åŠ æ•°å­—è¯ä¹¦ åŸç†</a></p><p><a href="http://wsfdl.com/algorithm/2016/02/04/ç†è§£Diffie-Hellmanå¯†é’¥äº¤æ¢ç®—æ³•.html">koala bear.ç†è§£ Deffie-Hellman å¯†é’¥äº¤æ¢ç®—æ³•</a></p><p><a href="https://www.ruanyifeng.com/blog/2016/08/http.html">é˜®ä¸€å³°.HTTPåè®®å…¥é—¨</a></p><h1 id="TCPç¯‡"><a href="#TCPç¯‡" class="headerlink" title="TCPç¯‡"></a>TCPç¯‡</h1><p>TCPæ˜¯<code>é¢å‘è¿æ¥</code>çš„ã€<code>å¯é </code>çš„ã€<code>åŸºäºå­—èŠ‚æµ</code>çš„ä¼ è¾“å±‚é€šä¿¡åè®®ã€‚</p><h2 id="TCPå¤´éƒ¨"><a href="#TCPå¤´éƒ¨" class="headerlink" title="TCPå¤´éƒ¨"></a>TCPå¤´éƒ¨</h2><p>åœ¨ä»‹ç»ä¸‰æ¬¡æ¡æ‰‹ï¼Œå››æ¬¡æŒ¥æ‰‹çš„è¿‡ç¨‹ä¹‹å‰ï¼Œéœ€è¦äº†è§£TCPå¤´éƒ¨çš„ä¸€äº›çŸ¥è¯†</p><p><img src="https://github.com/HerloConnell/BlogPicture/blob/CS-basics/å›¾è§£è®¡ç®—æœºç½‘ç»œç¬”è®°4.png?raw=true" alt=""></p><ul><li><code>æºç«¯å£</code>å’Œç›®çš„ç«¯å£ï¼šç¡®å®šä¸»æœºä¸­çš„è¿›ç¨‹ï¼›</li><li>åºå·(seq)ï¼šæŠ¥æ–‡æ®µä¸­çš„çš„ç¬¬ä¸€ä¸ªæ•°æ®å­—èŠ‚åœ¨æ•°æ®æµä¸­çš„åºå·ï¼Œä¸»è¦ç”¨æ¥è§£å†³ç½‘ç»œæŠ¥ä¹±åºçš„é—®é¢˜ï¼›</li><li>ç¡®è®¤å·(ack_seq)ï¼šæ‰€æœŸæœ›æ”¶åˆ°çš„ä¸‹ä¸€ä¸ªæ•°æ®åŒ…çš„åºå·ï¼›</li><li>ACKï¼š1æœ‰æ•ˆï¼Œè¡¨ç¤ºå·²ç»æ”¶åˆ°æ•°æ®åŒ…</li><li>RSTï¼š1æœ‰æ•ˆï¼Œè¿æ¥å¤ä½è¯·æ±‚</li><li>SYNï¼š1æœ‰æ•ˆï¼Œè¡¨ç¤ºç”³è¯·ä¸æ¥æ”¶æ–¹å»ºç«‹è¿æ¥</li><li>FINï¼š1æœ‰æ•ˆï¼Œè¡¨ç¤ºç”³è¯·ä¸æ¥æ”¶æ–¹æ–­å¼€è¿æ¥</li></ul><h2 id="TCPä¸‰æ¬¡æ¡æ‰‹"><a href="#TCPä¸‰æ¬¡æ¡æ‰‹" class="headerlink" title="TCPä¸‰æ¬¡æ¡æ‰‹"></a>TCPä¸‰æ¬¡æ¡æ‰‹</h2><p>ç½‘ç»œä¸­Aä¸Bè¦å»ºç«‹TCPè¿æ¥ï¼Œå¯ä»¥åˆ†ä¸ºä»¥ä¸‹å››æ­¥ï¼š</p><div class="code-wrapper"><pre><code class="hljs no">ï¼ˆ1ï¼‰Aè¯·æ±‚å‘Bå‘é€æ¶ˆæ¯ï¼ˆ2ï¼‰Bå‘Aè¡¨ç¤ºåŒæ„ï¼ˆ3ï¼‰Bè¯·æ±‚å‘Aå‘é€æ¶ˆæ¯ï¼ˆ4ï¼‰Aå‘Bè¡¨ç¤ºåŒæ„</code></pre></div><p>å¯ä»¥å‘ç°ï¼Œç”±äº(2)(3)è¿‡ç¨‹å‡ä¸ºBå‘Aå‘é€æ¶ˆæ¯ï¼Œæ‰€ä»¥åˆä¸ºä¸€æ¬¡æ¡æ‰‹ï¼Œå®é™…ä¸ŠTCPå»ºç«‹è¿æ¥åªéœ€è¦ä¸‰æ¬¡æ¡æ‰‹å³å¯ã€‚</p><p>æ¥ä¸‹æ¥ä»‹ç»ä¸‰æ¬¡æ¡æ‰‹çš„å…·ä½“è¿‡ç¨‹</p><p><img src="https://github.com/HerloConnell/BlogPicture/blob/CS-basics/å›¾è§£è®¡ç®—æœºç½‘ç»œç¬”è®°5.png?raw=true" alt=""></p><p>ï¼ˆ1ï¼‰æœåŠ¡å™¨è¿›ç¨‹åˆ›å»ºä¼ è¾“æ§åˆ¶å—TCBï¼Œå‡†å¤‡æ¥å—è¿æ¥è¯·æ±‚ï¼Œè¿›å…¥LISTENï¼ˆç›‘å¬ï¼‰çŠ¶æ€ï¼›</p><p>ï¼ˆ2ï¼‰å®¢æˆ·ç«¯è¿›ç¨‹åˆ›å»ºä¼ è¾“æ§åˆ¶å—TCBï¼Œå‘é€SYN=1ï¼Œseqåˆå§‹åŒ–ä¸ºéšæœºå€¼Xçš„è¿æ¥è¯·æ±‚æŠ¥æ–‡æ®µï¼Œä¹‹åè¿›å…¥SYN_SENDï¼ˆåŒæ­¥å·²å‘é€ï¼‰çŠ¶æ€ï¼›<br>ï¼ˆ3ï¼‰æ”¶åˆ°è¿æ¥è¯·æ±‚åï¼ŒæœåŠ¡å™¨è¿›ç¨‹å‘å®¢æˆ·ç«¯è¿›ç¨‹å‘é€ä¸€ä¸ªå“åº”+è¯·æ±‚æŠ¥æ–‡æ®µï¼ŒACK=1ï¼ŒSYN=1ï¼Œack_seq=X+1ï¼Œseqåˆå§‹åŒ–ä¸ºéšæœºå€¼Yï¼Œè¿›å…¥SYN_RCVDï¼ˆåŒæ­¥æ”¶åˆ°ï¼‰çŠ¶æ€ï¼›<br>ï¼ˆ3ï¼‰å®¢æˆ·ç«¯è¿›ç¨‹å“åº”æœåŠ¡å™¨è¿›ç¨‹çš„è¿æ¥è¯·æ±‚ï¼Œå‘Bå‘é€ä¸€ä¸ªACK=1çš„æŠ¥æ–‡æ®µï¼Œç½®seq=X+ç¬¬ä¸€æ¬¡æ¡æ‰‹æŠ¥æ–‡é•¿åº¦1ï¼Œack_seq=Yï¼Œä¹‹åå®¢æˆ·ç«¯è¿›ç¨‹å®¢æˆ·ç«¯è¿›ç¨‹è¿›å…¥ESTABLISHEDï¼ˆå·²å»ºç«‹è¿æ¥ï¼‰çŠ¶æ€ï¼›<br>ï¼ˆ4ï¼‰æœåŠ¡å™¨è¿›ç¨‹æ”¶åˆ°å®¢æˆ·ç«¯è¿›ç¨‹å“åº”ååŒæ ·è¿›å…¥ESTABLISHEDï¼ˆå·²å»ºç«‹è¿æ¥ï¼‰çŠ¶æ€ã€‚</p><p class="note note-primary">  <b>åŠè¿æ¥é˜Ÿåˆ—ä¸å…¨è¿æ¥é˜Ÿåˆ—</b></p><p>æœåŠ¡å™¨ç¬¬ä¸€æ¬¡æ”¶åˆ°å®¢æˆ·ç«¯çš„ SYNä¹‹åï¼Œå°±ä¼šå¤„äº SYN_RCVDçŠ¶æ€ï¼Œæ­¤æ—¶åŒæ–¹è¿˜æ²¡æœ‰å®Œå…¨å»ºç«‹è¿æ¥ã€‚æœåŠ¡å™¨ä¼šæŠŠè¿™ç§çŠ¶æ€ä¸‹çš„è¯·æ±‚è¿æ¥æ”¾åœ¨ä¸€ä¸ªé˜Ÿåˆ—é‡Œï¼Œæˆ‘ä»¬æŠŠè¿™ç§é˜Ÿåˆ—ç§°ä¹‹ä¸ºåŠè¿æ¥é˜Ÿåˆ—ã€‚</p><p>å·²ç»å®Œæˆä¸‰æ¬¡æ¡æ‰‹ï¼Œå»ºç«‹èµ·è¿æ¥çš„å°±ä¼šæ”¾åœ¨å…¨è¿æ¥é˜Ÿåˆ—ä¸­ã€‚</p><p>å¦‚æœåŠè¿æ¥é˜Ÿåˆ—æˆ–å…¨è¿æ¥é˜Ÿåˆ—æ»¡äº†å°±æœ‰å¯èƒ½ä¼šå‡ºç°ä¸¢åŒ…ç°è±¡ã€‚</p><p class="note note-primary">  <b>ä¸‰æ¬¡æ¡æ‰‹å¯ä»¥æºå¸¦æ•°æ®å—</b></p><p>ç¬¬ä¸€æ¬¡ã€ç¬¬äºŒæ¬¡æ¡æ‰‹ä¸å¯ä»¥æºå¸¦æ•°æ®ï¼Œè€Œç¬¬ä¸‰æ¬¡æ¡æ‰‹æ˜¯å¯ä»¥æºå¸¦æ•°æ®çš„ã€‚</p><p>å‡å¦‚ç¬¬ä¸€æ¬¡æ¡æ‰‹å¯ä»¥æºå¸¦æ•°æ®çš„è¯ï¼Œå¦‚æœæœ‰äººè¦æ¶æ„æ”»å‡»æœåŠ¡å™¨ï¼Œåœ¨ç¬¬ä¸€æ¬¡æ¡æ‰‹ä¸­çš„ SYN æŠ¥æ–‡ä¸­æ”¾å…¥å¤§é‡çš„æ•°æ®ï¼Œç–¯ç‹‚é‡å¤å‘ SYN æŠ¥æ–‡ï¼Œè¿™ä¼šè®©æœåŠ¡å™¨èŠ±è´¹å¤§é‡çš„å†…å­˜ç©ºé—´æ¥ç¼“å­˜è¿™äº›æŠ¥æ–‡ã€‚</p><p>å¯¹äºç¬¬ä¸‰æ¬¡æ¡æ‰‹ï¼Œæ­¤æ—¶å®¢æˆ·ç«¯å·²ç»å¤„äºè¿æ¥çŠ¶æ€ï¼Œä»–å·²ç»çŸ¥é“æœåŠ¡å™¨çš„æ¥æ”¶ã€å‘é€èƒ½åŠ›æ˜¯æ­£å¸¸çš„äº†ï¼Œæ‰€ä»¥å¯ä»¥æºå¸¦æ•°æ®æ˜¯æƒ…ç†ä¹‹ä¸­ã€‚</p><p class="note note-primary">  <b>å¦‚æœä¸‰æ¬¡æ¡æ‰‹æ—¶æ¯æ¬¡æ¡æ‰‹ä¿¡æ¯å¯¹æ–¹æ²¡æœ‰æ”¶åˆ°</b></p><p>è‹¥ç¬¬ä¸€æ¬¡æ¡æ‰‹æœåŠ¡å™¨æœªæ¥æ”¶åˆ°å®¢æˆ·ç«¯è¯·æ±‚å»ºç«‹è¿æ¥çš„æ•°æ®åŒ…ï¼Œå®¢æˆ·ç«¯ç”±äºåœ¨ä¸€æ®µæ—¶é—´å†…æ²¡æœ‰æ”¶åˆ°æœåŠ¡å™¨å‘æ¥çš„ç¡®è®¤æŠ¥æ–‡ï¼Œ å› æ­¤ä¼šé‡æ–°å‘é€ SYN æŠ¥æ–‡ï¼Œè‹¥ä»ç„¶æ²¡æœ‰å›åº”ï¼Œåˆ™é‡å¤ä¸Šè¿°è¿‡ç¨‹ç›´åˆ°å‘é€æ¬¡æ•°è¶…è¿‡æœ€å¤§é‡ä¼ æ¬¡æ•°é™åˆ¶åï¼Œå»ºç«‹è¿æ¥çš„ç³»ç»Ÿè°ƒç”¨ä¼šè¿”å› -1ã€‚</p><p>è‹¥ç¬¬äºŒæ¬¡æ¡æ‰‹å®¢æˆ·ç«¯æœªæ¥æ”¶åˆ°æœåŠ¡å™¨å›åº”çš„ ACK æŠ¥æ–‡æ—¶ï¼Œå®¢æˆ·ç«¯ä¼šé‡‡å–ç¬¬ä¸€æ¬¡æ¡æ‰‹å¤±è´¥æ—¶çš„åŠ¨ä½œï¼Œè€ŒæœåŠ¡å™¨ç«¯æ­¤æ—¶å°†é˜»å¡åœ¨ accept() ç³»ç»Ÿè°ƒç”¨å¤„ç­‰å¾… client å†æ¬¡å‘é€ ACK æŠ¥æ–‡ã€‚</p><p>è‹¥ç¬¬ä¸‰æ¬¡æ¡æ‰‹æœåŠ¡å™¨æœªæ¥æ”¶åˆ°å®¢æˆ·ç«¯å‘é€è¿‡æ¥çš„ ACK æŠ¥æ–‡ï¼ŒæœåŠ¡å™¨ç«¯åŒæ ·ä¼šé‡‡å–ç±»ä¼¼äºå®¢æˆ·ç«¯çš„è¶…æ—¶é‡ä¼ æœºåˆ¶ï¼Œè‹¥é‡ä¼ æ¬¡æ•°è¶…è¿‡é™åˆ¶åä»ç„¶æ²¡æœ‰å›åº”ï¼Œåˆ™ accep() ç³»ç»Ÿè°ƒç”¨è¿”å› -1ï¼ŒæœåŠ¡å™¨ç«¯è¿æ¥å»ºç«‹å¤±è´¥ã€‚ä½†æ­¤æ—¶å®¢æˆ·ç«¯è®¤ä¸ºè‡ªå·±å·²ç»è¿æ¥æˆåŠŸäº†ï¼Œå› æ­¤å¼€å§‹å‘æœåŠ¡å™¨ç«¯å‘é€æ•°æ®ï¼Œä½†æ˜¯æœåŠ¡å™¨ç«¯çš„ accept() ç³»ç»Ÿè°ƒç”¨å·²è¿”å›ï¼Œæ­¤æ—¶æ²¡æœ‰åœ¨ç›‘å¬çŠ¶æ€ã€‚å› æ­¤æœåŠ¡å™¨ç«¯æ¥æ”¶åˆ°æ¥è‡ªå®¢æˆ·ç«¯å‘é€æ¥çš„æ•°æ®æ—¶ä¼šå‘é€ RST æŠ¥æ–‡ç»™ å®¢æˆ·ç«¯ï¼Œæ¶ˆé™¤å®¢æˆ·ç«¯å•æ–¹é¢å»ºç«‹è¿æ¥çš„çŠ¶æ€ã€‚</p><p class="note note-primary">  <b>ä¸ºä»€ä¹ˆä¸å¯ä»¥ä¸¤æ¬¡æ¡æ‰‹</b></p><p>ä¸‰æ¬¡æ¡æ‰‹çš„ä¸»è¦ç›®çš„æ˜¯<strong>ç¡®è®¤åŒæ–¹çš„æ”¶å‘èƒ½åŠ›</strong>ã€‚è‹¥é‡‡ç”¨ä¸¤æ¬¡æ¡æ‰‹ï¼Œå®¢æˆ·ç«¯èƒ½å¾—å‡ºç»“è®ºï¼šæœåŠ¡ç«¯çš„æ¥æ”¶ã€å‘é€èƒ½åŠ›ï¼Œå®¢æˆ·ç«¯çš„æ¥æ”¶ã€å‘é€èƒ½åŠ›æ˜¯æ­£å¸¸çš„ã€‚ä½†æ­¤æ—¶æœåŠ¡å™¨å¹¶ä¸èƒ½ç¡®è®¤å®¢æˆ·ç«¯çš„æ¥æ”¶èƒ½åŠ›æ˜¯å¦æ­£å¸¸ã€‚</p><p>å¦‚æœå®¢æˆ·ç«¯æœªæ¥æ”¶åˆ°ç¬¬äºŒæ¬¡æ¡æ‰‹çš„åŒ…ï¼Œæˆ–æ˜¯å®¢æˆ·ç«¯æ”¶åˆ°è¯¥åŒ…ä¹‹å‰å·²ä¸æƒ³å»ºç«‹TCPè¿æ¥ï¼Œè€ŒæœåŠ¡å™¨å¹¶ä¸çŸ¥æƒ…ï¼Œå¦‚æœæ²¡æœ‰ç¬¬ä¸‰æ¬¡æ¡æ‰‹å‘Šè¯‰æœåŠ¡å™¨ï¼ŒæœåŠ¡å™¨ç«¯çš„ç«¯å£å°±ä¼šä¸€ç›´å¼€ç€ï¼Œè‹¥å®¢æˆ·ç«¯å› è¶…æ—¶é‡æ–°å‘å‡ºè¯·æ±‚æ—¶ï¼ŒæœåŠ¡å™¨å°±ä¼šé‡æ–°å¼€å¯ä¸€ä¸ªç«¯å£è¿æ¥ã€‚è¿™æ ·çš„ç«¯å£è¶Šæ¥è¶Šå¤šï¼Œå°±ä¼šé€ æˆæœåŠ¡å™¨å¼€é”€çš„æµªè´¹ã€‚</p><p class="note note-primary">  <b>å¦‚å»ºç«‹è¿æ¥åå®¢æˆ·ç«¯å‡ºç°æ•…éšœ</b></p><p>TCPè¿˜è®¾æœ‰ä¸€ä¸ªä¿æ´»è®¡æ—¶å™¨ï¼Œæ˜¾ç„¶ï¼Œå®¢æˆ·ç«¯å¦‚æœå‡ºç°æ•…éšœï¼ŒæœåŠ¡å™¨ä¸èƒ½ä¸€ç›´ç­‰ä¸‹å»ï¼Œç™½ç™½æµªè´¹èµ„æºã€‚æœåŠ¡å™¨æ¯æ”¶åˆ°ä¸€æ¬¡å®¢æˆ·ç«¯çš„è¯·æ±‚åéƒ½ä¼šé‡æ–°å¤ä½è¿™ä¸ªè®¡æ—¶å™¨ï¼Œæ—¶é—´é€šå¸¸æ˜¯è®¾ç½®ä¸º2å°æ—¶ï¼Œè‹¥ä¸¤å°æ—¶è¿˜æ²¡æœ‰æ”¶åˆ°å®¢æˆ·ç«¯çš„ä»»ä½•æ•°æ®ï¼ŒæœåŠ¡å™¨å°±ä¼šå‘é€ä¸€ä¸ªæ¢æµ‹æŠ¥æ–‡æ®µï¼Œä»¥åæ¯éš”75ç§’å‘é€ä¸€æ¬¡ã€‚è‹¥ä¸€è¿å‘é€10ä¸ªæ¢æµ‹æŠ¥æ–‡ä»ç„¶æ²¡ååº”ï¼ŒæœåŠ¡å™¨å°±è®¤ä¸ºå®¢æˆ·ç«¯å‡ºäº†æ•…éšœï¼Œæ¥ç€å°±å…³é—­è¿æ¥ã€‚</p><h2 id="TCPå››æ¬¡æŒ¥æ‰‹"><a href="#TCPå››æ¬¡æŒ¥æ‰‹" class="headerlink" title="TCPå››æ¬¡æŒ¥æ‰‹"></a>TCPå››æ¬¡æŒ¥æ‰‹</h2><p><img src="https://github.com/HerloConnell/BlogPicture/blob/CS-basics/å›¾è§£è®¡ç®—æœºç½‘ç»œç¬”è®°6.png?raw=true" alt=""></p><p>æŒ¥æ‰‹è¿‡ç¨‹ï¼ŒAä¸Bæ–­å¼€è¿æ¥ä¹‹åï¼ŒBå¯èƒ½è¿˜ä¼šæœ‰éœ€è¦å‘ä¸ªAçš„æ•°æ®ï¼Œä¸èƒ½ç«‹åˆ»æ–­å¼€è¿æ¥ï¼Œéœ€è¦æœ‰ä¸€ä¸ªCLOSE_WAITçš„è¿‡ç¨‹ï¼Œä¸èƒ½åˆä¸ºä¸‰æ¬¡ã€‚</p><p>ï¼ˆ1ï¼‰Aå°†FINç½®ä¸º1ï¼ŒACKç½®ä¸º1ï¼Œseqè®¾ç½®ä¸ºX=ä¸Šä¸€æ¬¡å¯¹æ–¹ä¼ é€è¿‡æ¥çš„ack_seqï¼Œack_seqè®¾ç½®ä¸ºY=ä¸ºä¸Šä¸€æ¬¡å¯¹æ–¹ä¼ è¿‡æ¥çš„seq+1ã€‚å°†æ•°æ®å‘é€è‡³Bï¼Œç„¶åAè¿›å…¥FIN_WAIT_1çŠ¶æ€ï¼›<br>ï¼ˆ2ï¼‰Bæ”¶åˆ°äº†Aå‘é€çš„FINæŠ¥æ–‡æ®µï¼Œå‘Aå›å¤ï¼Œå°†ACKç½®ä¸º1ï¼Œseqè®¾ç½®ä¸ºYï¼Œack_seqè®¾ç½®ä¸ºX+1ã€‚ç„¶åBè¿›å…¥CLOSE_WAITçŠ¶æ€ï¼ŒAæ”¶åˆ°Bçš„å›å¤åï¼Œè¿›å…¥FIN_WAIT_2çŠ¶æ€ï¼›<br>ï¼ˆ3ï¼‰Bå†æ¬¡å‘Aå‘é€æŠ¥æ–‡ï¼ŒFINç½®ä¸º1ï¼ŒACKç½®ä¸º1ï¼Œseqè®¾ç½®ä¸ºYï¼Œack_seqè®¾ç½®ä¸ºX+1ï¼Œç„¶åBè¿›å…¥LAST_ACKçŠ¶æ€ï¼ŒAæ”¶åˆ°Bçš„æŠ¥æ–‡åï¼Œè¿›å…¥TIME_WAITçŠ¶æ€ï¼›<br>ï¼ˆ4ï¼‰Aæ”¶åˆ°Bå‘é€çš„FINæŠ¥æ–‡æ®µï¼Œå‘Bå›å¤ï¼ŒACKç½®ä¸º1ï¼Œseqè®¾ç½®ä¸ºX+1ï¼Œack_seqè®¾ç½®ä¸ºY+1ã€‚ç„¶åAè¿›å…¥TIME_WAITçŠ¶æ€ï¼ŒBåœ¨æ”¶åˆ°æŠ¥æ–‡åè¿›å…¥CLOSEDçŠ¶æ€ã€‚Aåœ¨å‘é€å®ŒæŠ¥æ–‡ç­‰å¾…äº†2MSLæ—¶é—´åè¿›å…¥CLOSEDçŠ¶æ€ã€‚</p><p class="note note-primary">  <b>ä¸ºä»€ä¹ˆ TIME_WAIT çŠ¶æ€è¦ç­‰å¾… 2MSL ä¹‹åæ‰å…³é—­è¿æ¥</b></p><p>2MSLè¡¨ç¤ºä¸¤ä¸ªMSLçš„æ—¶é•¿ï¼ŒMSLå…¨ç§°ä¸ºMaximum Segment Lifeï¼Œè¡¨ç¤ºTCP Segment ç”Ÿå­˜æ—¶é—´çš„é™åˆ¶ã€‚</p><p>è‹¥æœåŠ¡å™¨åœ¨ 1 MSL å†…æ²¡æœ‰æ”¶åˆ°å®¢æˆ·ç«¯å‘å‡ºçš„ ACK ç¡®è®¤æŠ¥æ–‡ï¼Œå†æ¬¡å‘å®¢æˆ·ç«¯å‘å‡º FIN æŠ¥æ–‡ã€‚å¦‚æœå®¢æˆ·ç«¯åœ¨ 2 MSL å†…æ”¶åˆ°äº†æœåŠ¡å™¨å†æ¬¡å‘æ¥çš„ FIN æŠ¥æ–‡ï¼Œè¯´æ˜æœåŠ¡å™¨å¹¶æ²¡æœ‰æ”¶åˆ°å®¢æˆ·ç«¯å‘å‡ºçš„ ACK ç¡®è®¤æŠ¥æ–‡ã€‚å®¢æˆ·ç«¯å°†å†æ¬¡å‘æœåŠ¡å™¨å‘å‡º ACK ç¡®è®¤æŠ¥æ–‡ï¼Œå¹¶é‡æ–°å¼€å§‹ 2 MSL çš„è®¡æ—¶ã€‚</p><p>è‹¥æœåŠ¡ç«¯å°†é‡å‘ FIN æŠ¥æ–‡æ—¶å®¢æˆ·ç«¯å¹¶æ²¡æœ‰ç»´æŒ TIME-WAIT çŠ¶æ€è€Œç›´æ¥å…³é—­ï¼Œå½“æ”¶åˆ°æœåŠ¡ç«¯é‡æ–°å‘é€çš„ FIN åŒ…æ—¶ï¼Œå®¢æˆ·ç«¯å°±ä¼šç”¨ RST åŒ…æ¥å“åº”æœåŠ¡ç«¯ï¼Œè¿™å°†ä¼šä½¿å¾—å¯¹æ–¹è®¤ä¸ºæ˜¯æœ‰é”™è¯¯å‘ç”Ÿï¼Œç„¶è€Œå…¶å®åªæ˜¯æ­£å¸¸çš„å…³é—­è¿æ¥è¿‡ç¨‹ï¼Œå¹¶æ²¡æœ‰å‡ºç°å¼‚å¸¸æƒ…å†µã€‚</p><p>æ­¤å¤–ï¼Œå¦‚æœå®¢æˆ·ç«¯åœ¨æ”¶åˆ°æœåŠ¡ç«¯çš„ FIN æŠ¥æ–‡åç«‹å³å…³é—­è¿æ¥ï¼Œæ­¤æ—¶æœåŠ¡ç«¯ç›¸åº”çš„ç«¯å£å¹¶æ²¡æœ‰å…³é—­ï¼Œè‹¥å®¢æˆ·ç«¯åœ¨ç›¸åŒçš„ç«¯å£ç«‹å³å»ºç«‹æ–°çš„è¿æ¥ï¼Œåˆ™æœ‰å¯èƒ½æ¥æ”¶åˆ°ä¸Šä¸€æ¬¡è¿æ¥ä¸­æ®‹ç•™çš„æ•°æ®åŒ…ï¼Œå¯èƒ½ä¼šå¯¼è‡´ä¸å¯é¢„æ–™çš„å¼‚å¸¸å‡ºç°ã€‚</p><p class="note note-primary">  <b>TIME_WAIT çŠ¶æ€å¯¼è‡´çš„é—®é¢˜</b></p><p>è€ƒè™‘é«˜å¹¶å‘çŸ­è¿æ¥çš„ä¸šåŠ¡åœºæ™¯ï¼Œåœ¨é«˜å¹¶å‘çŸ­è¿æ¥çš„ TCP æœåŠ¡å™¨ä¸Šï¼Œå½“æœåŠ¡å™¨å¤„ç†å®Œè¯·æ±‚åä¸»åŠ¨è¯·æ±‚å…³é—­è¿æ¥ï¼Œè¿™æ ·æœåŠ¡å™¨ä¸Šä¼šæœ‰å¤§é‡çš„è¿æ¥å¤„äº TIME_WAIT çŠ¶æ€ï¼ŒæœåŠ¡å™¨ç»´æŠ¤æ¯ä¸€ä¸ªè¿æ¥éœ€è¦ä¸€ä¸ª socketï¼Œä¹Ÿå°±æ˜¯æ¯ä¸ªè¿æ¥ä¼šå ç”¨ä¸€ä¸ªæ–‡ä»¶æè¿°ç¬¦ï¼Œè€Œæ–‡ä»¶æè¿°ç¬¦çš„ä½¿ç”¨æ˜¯æœ‰ä¸Šé™çš„ï¼Œå¦‚æœæŒç»­é«˜å¹¶å‘ï¼Œä¼šå¯¼è‡´ä¸€äº›æ­£å¸¸çš„è¿æ¥å¤±è´¥ã€‚</p><p>æœåŠ¡å™¨å¯ä»¥è®¾ç½® SO_REUSEADDR å¥—æ¥å­—é€‰é¡¹æ¥é€šçŸ¥å†…æ ¸ï¼Œå¦‚æœç«¯å£è¢«å ç”¨ï¼Œä½† TCP è¿æ¥ä½äº TIME_WAIT çŠ¶æ€æ—¶å¯ä»¥é‡ç”¨ç«¯å£ã€‚å¦‚æœæœåŠ¡å™¨ç¨‹åºåœæ­¢åæƒ³ç«‹å³é‡å¯ï¼Œè€Œæ–°çš„å¥—æ¥å­—ä¾æ—§å¸Œæœ›ä½¿ç”¨åŒä¸€ç«¯å£ï¼Œæ­¤æ—¶ SO_REUSEADDR é€‰é¡¹å°±å¯ä»¥é¿å… TIME-WAIT çŠ¶æ€ã€‚</p><p>ä¹Ÿå¯ä»¥é‡‡ç”¨é•¿è¿æ¥çš„æ–¹å¼å‡å°‘ TCP çš„è¿æ¥ä¸æ–­å¼€ï¼Œåœ¨é•¿è¿æ¥çš„ä¸šåŠ¡ä¸­å¾€å¾€ä¸éœ€è¦è€ƒè™‘ TIME-WAIT çŠ¶æ€ï¼Œä½†å…¶å®åœ¨é•¿è¿æ¥çš„ä¸šåŠ¡ä¸­å¹¶å‘é‡ä¸€èˆ¬ä¸ä¼šå¤ªé«˜ã€‚</p><h2 id="å‚è€ƒèµ„æ–™-2"><a href="#å‚è€ƒèµ„æ–™-2" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h2><p><a href="https://blog.jiar.me/2017/08/11/TCPä¸‰æ¬¡æ¡æ‰‹ç®€ä»‹/">Jiar.TCPä¸‰æ¬¡æ¡æ‰‹ç®€ä»‹</a></p><p><a href="https://blog.jiar.me/2017/08/24/TCPå››æ¬¡æŒ¥æ‰‹ç®€ä»‹/">Jiar.TCPå››æ¬¡æŒ¥æ‰‹ç®€ä»‹</a></p><p><a href="https://blog.csdn.net/qzcsu/article/details/72861891">å°ä¹¦go.TCPçš„ä¸‰æ¬¡æ¡æ‰‹ä¸å››æ¬¡æŒ¥æ‰‹</a></p><p><a href="https://leetcode-cn.com/leetbook/read/networks-interview-highlights/ek40dd/">Leetcode.è®¡ç®—æœºç½‘ç»œé¢è¯•-ä¼ è¾“å±‚</a></p><p><a href="https://zhuanlan.zhihu.com/p/53374516">Stefno.ä¸‰æ¬¡æ¡æ‰‹ï¼Œå››æ¬¡æŒ¥æ‰‹</a></p><h1 id="ç½‘ç»œå®‰å…¨ç¯‡"><a href="#ç½‘ç»œå®‰å…¨ç¯‡" class="headerlink" title="ç½‘ç»œå®‰å…¨ç¯‡"></a>ç½‘ç»œå®‰å…¨ç¯‡</h1><h2 id="å®‰å…¨æ”»å‡»åˆ†ç±»"><a href="#å®‰å…¨æ”»å‡»åˆ†ç±»" class="headerlink" title="å®‰å…¨æ”»å‡»åˆ†ç±»"></a>å®‰å…¨æ”»å‡»åˆ†ç±»</h2><p><span class="label label-primary">è¢«åŠ¨æ”»å‡»</span>ï¼šæ”»å‡»è€…çªƒå¬ç›‘å¬æ•°æ®ä¼ è¾“ï¼Œä»è€Œè·å–åˆ°ä¼ è¾“çš„æ•°æ®ä¿¡æ¯ã€‚ä¸»è¦æœ‰ï¼šæ¶ˆæ¯å†…å®¹æ³„éœ²æ”»å‡»å’Œæµé‡åˆ†ææ”»å‡»ã€‚ç”±äºå¹¶æ²¡æœ‰ä¿®æ”¹æ•°æ®ï¼Œè¿™ç§æ”»å‡»æ˜¯å¾ˆéš¾è¢«æ£€æµ‹åˆ°çš„ã€‚</p><p><span class="label label-primary">ä¸»åŠ¨æ”»å‡»</span>ï¼šæ”»å‡»è€…ä¿®æ”¹ä¼ è¾“çš„æ•°æ®æµæˆ–è€…æ•…æ„æ·»åŠ é”™è¯¯çš„æ•°æ®æµï¼Œå¦‚å‡å†’ç”¨æˆ·èº«ä»½ä»è€Œå¾—åˆ°ä¸€äº›æƒé™ï¼Œè¿›è¡Œæƒé™æ”»å‡»ï¼Œé™¤æ­¤ä¹‹å¤–ï¼Œè¿˜æœ‰é‡æ”¾ã€æ”¹å†™å’Œæ‹’ç»æœåŠ¡ç­‰ã€‚</p><h2 id="ARPæ”»å‡»"><a href="#ARPæ”»å‡»" class="headerlink" title="ARPæ”»å‡»"></a>ARPæ”»å‡»</h2><p><strong>ARP æ˜¯ä¸€ç§éå¸¸ä¸å®‰å…¨çš„åè®®</strong>ï¼Œå±€åŸŸç½‘ä¸Šçš„ä»»ä½•ä¸€å°ä¸»æœºå¦‚æœæ¥æ”¶åˆ°ä¸€ä¸ª ARP åº”ç­”æŠ¥æ–‡ï¼Œå¹¶ä¸ä¼šå»æ£€æµ‹è¿™ä¸ªæŠ¥æ–‡çš„çœŸå®æ€§ï¼Œè€Œæ˜¯ç›´æ¥è®°å…¥è‡ªå·±çš„ ARP ç¼“å­˜è¡¨ä¸­ï¼Œå½“ ARP è¡¨ä¸­çš„æŸä¸€è®°å½•é•¿æ—¶é—´ä¸é€‚ä½¿ç”¨ï¼Œå°±ä¼šè¢«åˆ é™¤ã€‚ARP æ”»å‡»å°±æ˜¯åˆ©ç”¨äº†è¿™ä¸€ç‚¹ï¼Œæ”»å‡»è€…ç–¯ç‹‚å‘é€ ARP æŠ¥æ–‡ï¼Œæº IP åœ°å€ä¸ºè¢«æ”»å‡»è€…çš„ IP åœ°å€ï¼Œè€Œæº MAC åœ°å€ä¸ºæ”»å‡»è€…çš„ MAC åœ°å€ã€‚é€šè¿‡ä¸æ–­å‘é€è¿™äº›ä¼ªé€ çš„ ARP æŠ¥æ–‡ï¼Œç½‘ç»œå†…éƒ¨çš„ä¸»æœºå’Œç½‘å…³çš„ ARP è¡¨ä¸­è¢«æ”»å‡»è€…çš„ IP åœ°å€å¯¹åº”æ”»å‡»è€…çš„ MAC åœ°å€ã€‚æ‰€æœ‰å‘é€ç»™è¢«æ”»å‡»è€…çš„ä¿¡æ¯éƒ½ä¼šå‘é€åˆ°æ”»å‡»è€…çš„ä¸»æœºä¸Šï¼Œä»è€Œäº§ç”Ÿ ARP æ¬ºéª—ã€‚ARP æ¬ºéª—åˆ†ä¸ºä»¥ä¸‹å‡ ç§ï¼š</p><ul><li><strong>æ´ªæ³›æ”»å‡»</strong></li></ul><p>æ”»å‡»è€…æ¶æ„å‘å±€åŸŸç½‘ä¸­çš„ç½‘å…³ã€è·¯ç”±å™¨å’Œäº¤æ¢æœºç­‰å‘é€å¤§é‡ ARP æŠ¥æ–‡ï¼Œè®¾å¤‡ CPU å¿™äºå¤„ç† ARP åè®®ï¼Œéš¾ä»¥å“åº”æ­£å¸¸çš„æœåŠ¡è¯·æ±‚ã€‚è¡¨ç°é€šå¸¸ä¸ºï¼šç½‘ç»œä¸­æ–­æˆ–è€…ç½‘é€Ÿå¾ˆæ…¢ã€‚</p><ul><li><strong>æ¬ºéª—ä¸»æœº</strong></li></ul><p>ä¹Ÿå«ä»¿å†’ç½‘å…³æ”»å‡»ï¼Œæ”»å‡»è€…é€šè¿‡ ARP æ¬ºéª—ä½¿å¾—è¢«æ”»å‡»è€… ARP è¡¨ä¸­ç½‘å…³å¯¹åº”çš„ MAC åœ°å€ä¸ºæ”»å‡»è€…çš„ MACã€‚è¿™æ ·ä¸€æ¥è¢«æ”»å‡»è€…è¦é€šè¿‡ç½‘å…³å‘é€å‡ºå»çš„æ•°æ®æµå°±ä¼šå‘å¾€æ”»å‡»è€…è¿™é‡Œï¼Œé€ æˆç”¨æˆ·æ•°æ®å¤–æ³„ã€‚</p><ul><li><strong>æ¬ºéª—ç½‘å…³</strong></li></ul><p>å’Œæ¬ºéª—ä¸»æœºçš„æ”»å‡»æ–¹å¼ç±»ä¼¼ï¼Œä¸è¿‡æ¬ºéª—å¯¹è±¡æ˜¯å±€åŸŸç½‘çš„ç½‘å…³ã€‚å½“å±€åŸŸç½‘ä¸­çš„ä¸»æœºå‘ç½‘å…³å‘é€æ•°æ®æ—¶ï¼Œç½‘å…³ä¼šæŠŠæ•°æ®å‘é€ç»™æ”»å‡»è€…ï¼Œè¯¥æ”»å‡»æ–¹å¼åŒæ ·ä¼šé€ æˆç”¨æˆ·æ•°æ®å¤–æ³„ã€‚</p><ul><li><strong>ä¸­é—´äººæ”»å‡»</strong></li></ul><p>æ”»å‡»è€…åŒæ—¶æ¬ºéª—ç½‘å…³å’Œä¸»æœºï¼Œå±€åŸŸç½‘çš„ç½‘å…³å’Œä¸»æœºå‘é€çš„æ•°æ®æœ€åéƒ½ä¼šåˆ°è¾¾æ”»å‡»è€…è¿™è¾¹ã€‚è¿™æ ·ï¼Œç½‘å…³å’Œç”¨æˆ·çš„æ•°æ®å°±ä¼šæ³„éœ²ã€‚</p><ul><li><strong>IP åœ°å€å†²çª</strong></li></ul><p>æ”»å‡»è€…å¯¹å±€åŸŸç½‘ä¸­çš„ä¸»æœºè¿›è¡Œæ‰«æï¼Œç„¶åæ ¹æ®ç‰©ç†ä¸»æœºçš„ MAC åœ°å€è¿›è¡Œæ”»å‡»ï¼Œå¯¼è‡´å±€åŸŸç½‘å†…çš„ä¸»æœºäº§ç”Ÿ IP å†²çªï¼Œä½¿å¾—ç”¨æˆ·çš„ç½‘ç»œæ— æ³•æ­£å¸¸ä½¿ç”¨ã€‚</p><h2 id="DDoSæ”»å‡»"><a href="#DDoSæ”»å‡»" class="headerlink" title="DDoSæ”»å‡»"></a>DDoSæ”»å‡»</h2><p>DDoS å…¨ç§° Distributed Denial of Serviceï¼Œåˆ†å¸ƒå¼æ‹’ç»æœåŠ¡ã€‚ä¸€èˆ¬æ¥è¯´æ˜¯æŒ‡æ”»å‡»è€…åˆ©ç”¨ä¸åŒä½ç½®ä¸Šçš„â€œè‚‰é¸¡â€å¯¹ç›®æ ‡ç½‘ç«™åœ¨è¾ƒçŸ­çš„æ—¶é—´å†…å‘èµ·å¤§é‡è¯·æ±‚ï¼Œå¤§è§„æ¨¡æ¶ˆè€—ç›®æ ‡ç½‘ç«™çš„ä¸»æœºèµ„æºï¼Œè®©å®ƒæ— æ³•æ­£å¸¸æœåŠ¡ã€‚å’Œå•ä¸€çš„ DoS æ”»å‡»ç›¸æ¯”ï¼ŒDDoS æ˜¯å€ŸåŠ©æ•°ç™¾å°æˆ–è€…æ•°åƒå°å·²è¢«å…¥ä¾µå¹¶æ·»åŠ äº†æ”»å‡»è¿›ç¨‹çš„ä¸»æœºç»„æˆâ€œåƒµå°¸ç½‘ç»œâ€ï¼Œä¸€èµ·å‘èµ·ç½‘ç»œæ”»å‡»ã€‚</p><p>DDOS ä¸æ˜¯ä¸€ç§æ”»å‡»ï¼Œè€Œæ˜¯ä¸€å¤§ç±»æ”»å‡»çš„æ€»ç§°ã€‚å®ƒæœ‰å‡ åç§ç±»å‹ï¼Œæ–°çš„æ”»å‡»æ–¹æ³•è¿˜åœ¨ä¸æ–­å‘æ˜å‡ºæ¥ã€‚</p><p class="note note-primary">  <b>SYN Flood</b></p><p>è¿™æ˜¯ä¸€ç§åˆ©ç”¨TCPåè®®ç¼ºé™·ï¼Œå‘é€å¤§é‡ä¼ªé€ çš„TCPè¿æ¥è¯·æ±‚ï¼Œä»è€Œä½¿å¾—è¢«æ”»å‡»æ–¹èµ„æºè€—å°½ï¼ˆCPUæ»¡è´Ÿè·æˆ–å†…å­˜ä¸è¶³ï¼‰çš„æ”»å‡»æ–¹å¼ã€‚</p><p>å»ºç«‹TCPè¿æ¥ï¼Œéœ€è¦ä¸‰æ¬¡æ¡æ‰‹ï¼šå®¢æˆ·ç«¯å‘é€SYNæŠ¥æ–‡ï¼ŒæœåŠ¡ç«¯æ”¶åˆ°è¯·æ±‚å¹¶è¿”å›æŠ¥æ–‡è¡¨ç¤ºæ¥å—ï¼Œå®¢æˆ·ç«¯ä¹Ÿè¿”å›ç¡®è®¤ï¼Œå®Œæˆè¿æ¥ã€‚å¦‚æœå®¢æˆ·ç«¯å‘æœåŠ¡å™¨å‘é€æŠ¥æ–‡åæ­»æœºæˆ–æ‰çº¿ï¼ŒæœåŠ¡å™¨åœ¨å‘å‡ºåº”ç­”æŠ¥æ–‡åå°±æ— æ³•æ”¶åˆ°å®¢æˆ·ç«¯çš„ç¡®è®¤æŠ¥æ–‡ï¼Œè¿™æ—¶æœåŠ¡å™¨ç«¯ä¸€èˆ¬ä¼šé‡è¯•å¹¶ç­‰å¾…ä¸€æ®µæ—¶é—´åå†ä¸¢å¼ƒè¿™ä¸ªæœªå®Œæˆçš„è¿æ¥ã€‚Linuxä¸‹é»˜è®¤ä¼šè¿›è¡Œ5æ¬¡é‡å‘ SYN-ACK åŒ…ï¼Œ5æ¬¡çš„é‡è¯•æ—¶é—´é—´éš”ä¸º1s, 2s, 4s, 8s, 16s, æ€»å…±31s, ç§°ä¸º<code>æŒ‡æ•°é€€é¿</code>ï¼Œç¬¬5æ¬¡å‘å‡ºåè¿˜è¦ç­‰32sæ‰çŸ¥é“ç¬¬5æ¬¡ä¹Ÿè¶…æ—¶äº†ï¼Œæ‰€ä»¥ï¼Œæ€»å…±éœ€è¦63s, TCP æ‰ä¼šæŠŠæ–­å¼€è¿™ä¸ªè¿æ¥ã€‚ç”±äº SYN è¶…æ—¶éœ€è¦63ç§’ï¼Œå°±ç»™æ”»å‡»è€…ä¸€ä¸ªæ”»å‡»æœåŠ¡å™¨çš„æœºä¼šï¼Œæ”»å‡»è€…åœ¨çŸ­æ—¶é—´å†…å‘é€å¤§é‡çš„SYNåŒ…ç»™Serverï¼ŒæœåŠ¡å™¨ç«¯ä¸ºäº†ç»´æŠ¤æ•°ä»¥ä¸‡è®¡çš„åŠè¿æ¥è€Œæ¶ˆè€—éå¸¸å¤šçš„èµ„æºï¼Œæœ€åServerçš„SYNé˜Ÿåˆ—è¢«è€—å°½æˆ–å¯ç”¨ç«¯å£è¢«å…¨éƒ¨å ç”¨ç­‰ã€‚</p><p><strong>é˜²èŒƒSYN Floodçš„æ–¹æ³•</strong></p><ul><li><strong>Syn CacheæŠ€æœ¯</strong></li></ul><p>è¿™ç§æŠ€æœ¯æ˜¯åœ¨æ”¶åˆ°SYNæ•°æ®æŠ¥æ–‡æ—¶ä¸æ€¥äºå»åˆ†é…TCBï¼Œè€Œæ˜¯å…ˆå›åº”ä¸€ä¸ªSYN ACKæŠ¥æ–‡ï¼Œå¹¶åœ¨ä¸€ä¸ªä¸“ç”¨HASHè¡¨ï¼ˆCacheï¼‰ä¸­ä¿å­˜è¿™ç§åŠå¼€è¿æ¥ä¿¡æ¯ï¼Œç›´åˆ°æ”¶åˆ°æ­£ç¡®çš„å›åº”ACKæŠ¥æ–‡å†åˆ†é…TCBã€‚åœ¨FreeBSDç³»ç»Ÿä¸­è¿™ç§ Cacheæ¯ä¸ªåŠå¼€è¿æ¥åªéœ€ä½¿ç”¨160å­—èŠ‚ï¼Œè¿œå°äºTCBæ‰€éœ€çš„736ä¸ªå­—èŠ‚ã€‚åœ¨å‘é€çš„SYN ACKä¸­éœ€è¦ä½¿ç”¨ä¸€ä¸ªå·±æ–¹çš„Sequence Numberï¼Œè¿™ä¸ªæ•°å­—ä¸èƒ½è¢«å¯¹æ–¹çŒœåˆ°ï¼Œå¦åˆ™å¯¹äºæŸäº›ç¨å¾®æ™ºèƒ½ä¸€ç‚¹çš„Syn Floodæ”»å‡»è½¯ä»¶æ¥è¯´ï¼Œå®ƒä»¬åœ¨å‘é€SynæŠ¥æ–‡åä¼šå‘é€ä¸€ä¸ªACKæŠ¥æ–‡ï¼Œå¦‚æœå·±æ–¹çš„Sequence Numberè¢«å¯¹æ–¹çŒœæµ‹åˆ°ï¼Œåˆ™ä¼šè¢«å…¶å»ºç«‹èµ·çœŸæ­£çš„è¿æ¥ã€‚å› æ­¤ä¸€èˆ¬é‡‡ç”¨ä¸€äº›åŠ å¯†ç®—æ³•ç”Ÿæˆéš¾äºé¢„æµ‹çš„Sequence Numberã€‚</p><ul><li><strong>Syn CookieæŠ€æœ¯</strong></li></ul><p>Syn Cacheè™½ç„¶ä¸åˆ†é…TCBï¼Œä½†æ˜¯ä¸ºäº†åˆ¤æ–­åç»­å¯¹æ–¹å‘æ¥çš„ACKæŠ¥æ–‡ä¸­çš„Sequence Numberçš„æ­£ç¡®æ€§ï¼Œè¿˜æ˜¯éœ€è¦ä½¿ç”¨ä¸€äº›ç©ºé—´å»ä¿å­˜å·±æ–¹ç”Ÿæˆçš„Sequence Numberç­‰ä¿¡æ¯ï¼Œä¹Ÿé€ æˆäº†ä¸€äº›èµ„æºçš„æµªè´¹ã€‚</p><p>Syn CookieæŠ€æœ¯åˆ™å®Œå…¨ä¸ä½¿ç”¨ä»»ä½•å­˜å‚¨èµ„æºï¼Œè¿™ç§æ–¹æ³•æ¯”è¾ƒå·§å¦™ï¼Œå®ƒä½¿ç”¨ä¸€ç§ç‰¹æ®Šçš„ç®—æ³•ç”ŸæˆSequence Numberï¼Œè¿™ç§ç®—æ³•è€ƒè™‘åˆ°äº†å¯¹æ–¹çš„IPã€ç«¯å£ã€å·±æ–¹IPã€ç«¯å£çš„å›ºå®šä¿¡æ¯ï¼Œä»¥åŠå¯¹æ–¹æ— æ³•çŸ¥é“è€Œå·±æ–¹æ¯”è¾ƒå›ºå®šçš„ä¸€äº›ä¿¡æ¯ï¼Œå¦‚MSS(Maximum Segment Sizeï¼Œæœ€å¤§æŠ¥æ–‡æ®µå¤§å°ï¼ŒæŒ‡çš„æ˜¯TCPæŠ¥æ–‡çš„æœ€å¤§æ•°æ®æŠ¥é•¿åº¦ï¼Œå…¶ä¸­ä¸åŒ…æ‹¬TCPé¦–éƒ¨é•¿åº¦ã€‚)ã€æ—¶é—´ç­‰ï¼Œåœ¨æ”¶åˆ°å¯¹æ–¹ çš„ACKæŠ¥æ–‡åï¼Œé‡æ–°è®¡ç®—ä¸€éï¼Œçœ‹å…¶æ˜¯å¦ä¸å¯¹æ–¹å›åº”æŠ¥æ–‡ä¸­çš„ï¼ˆSequence Number-1ï¼‰ç›¸åŒï¼Œä»è€Œå†³å®šæ˜¯å¦åˆ†é…TCBèµ„æºã€‚</p><ul><li><strong>Syn Proxyé˜²ç«å¢™</strong></li></ul><p>Syn CacheæŠ€æœ¯å’ŒSyn CookieæŠ€æœ¯æ€»çš„æ¥è¯´æ˜¯ä¸€ç§ä¸»æœºä¿æŠ¤æŠ€æœ¯ï¼Œéœ€è¦ç³»ç»Ÿçš„TCP/IPåè®®æ ˆçš„æ”¯æŒï¼Œè€Œç›®å‰å¹¶éæ‰€æœ‰çš„æ“ä½œç³»ç»Ÿæ”¯æŒè¿™äº›æŠ€æœ¯ã€‚å› æ­¤å¾ˆå¤šé˜²ç«å¢™ä¸­éƒ½æä¾›ä¸€ç§SYNä»£ç†çš„åŠŸèƒ½ï¼Œå…¶ä¸»è¦åŸç†æ˜¯å¯¹è¯•å›¾ç©¿è¶Šçš„SYNè¯·æ±‚è¿›è¡ŒéªŒè¯åæ‰æ”¾è¡Œï¼š</p><p><img src="https://github.com/HerloConnell/BlogPicture/blob/CS-basics/å›¾è§£è®¡ç®—æœºç½‘ç»œç¬”è®°7.gif?raw=true" alt=""></p><p>é˜²ç«å¢™åœ¨ç¡®è®¤äº†è¿æ¥çš„æœ‰æ•ˆæ€§åï¼Œæ‰å‘å†…éƒ¨çš„æœåŠ¡å™¨ï¼ˆListenerï¼‰å‘èµ·SYNè¯·æ±‚ï¼Œåœ¨å³å›¾ä¸­ï¼Œæ‰€æœ‰çš„æ— æ•ˆè¿æ¥å‡æ— æ³•åˆ°è¾¾å†…éƒ¨çš„æœåŠ¡å™¨ã€‚è€Œé˜²ç«å¢™é‡‡ç”¨çš„éªŒè¯è¿æ¥æœ‰æ•ˆæ€§çš„æ–¹æ³•åˆ™å¯ä»¥æ˜¯Syn Cookieç­‰å…¶ä»–æŠ€æœ¯ã€‚</p> <p class="note note-primary">  <b>CC æ”»å‡»</b></p><p>CCæ”»å‡»æ˜¯ç›®å‰åº”ç”¨å±‚æ”»å‡»çš„ä¸»è¦æ‰‹æ®µä¹‹ä¸€ï¼Œæ”»å‡»è€…æ¨¡æ‹Ÿå¤šä¸ªæ­£å¸¸ç”¨æˆ·é€æ¥å¤§é‡æ­£å¸¸çš„è¯·æ±‚ï¼Œè¶…å‡ºæœåŠ¡å™¨çš„æœ€å¤§æ‰¿å—é‡ï¼Œå¯¼è‡´å®•æœºã€‚</p><p><strong>é˜²èŒƒ CC æ”»å‡»çš„æ–¹æ³•</strong></p><ul><li><strong>æ‹¦æˆªHTTPè¯·æ±‚</strong></li></ul><p>å¦‚æœæ¶æ„è¯·æ±‚æœ‰ç‰¹å¾ï¼Œå¯¹ä»˜èµ·æ¥å¾ˆç®€å•ï¼šç›´æ¥æ‹¦æˆªå®ƒå°±è¡Œäº†ã€‚</p><p>HTTP è¯·æ±‚çš„ç‰¹å¾ä¸€èˆ¬æœ‰ä¸¤ç§ï¼šIP åœ°å€å’Œ User Agent å­—æ®µã€‚æ¯”å¦‚ï¼Œæ¶æ„è¯·æ±‚éƒ½æ˜¯ä»æŸä¸ª IP æ®µå‘å‡ºçš„ï¼Œé‚£ä¹ˆæŠŠè¿™ä¸ª IP æ®µå°æ‰å°±è¡Œäº†ã€‚æˆ–è€…ï¼Œå®ƒä»¬çš„ User Agent å­—æ®µæœ‰ç‰¹å¾ï¼ˆåŒ…å«æŸä¸ªç‰¹å®šçš„è¯è¯­ï¼‰ï¼Œé‚£å°±æŠŠå¸¦æœ‰è¿™ä¸ªè¯è¯­çš„è¯·æ±‚æ‹¦æˆªã€‚</p><ul><li><strong>å¸¦å®½æ‰©å®¹</strong></li></ul><p>HTTP æ‹¦æˆªæœ‰ä¸€ä¸ªå‰æï¼Œå°±æ˜¯è¯·æ±‚å¿…é¡»æœ‰ç‰¹å¾ã€‚ä½†æ˜¯ï¼ŒçœŸæ­£çš„ DDOS æ”»å‡»æ˜¯æ²¡æœ‰ç‰¹å¾çš„ï¼Œå®ƒçš„è¯·æ±‚çœ‹ä¸Šå»è·Ÿæ­£å¸¸è¯·æ±‚ä¸€æ ·ï¼Œè€Œä¸”æ¥è‡ªä¸åŒçš„ IP åœ°å€ï¼Œæ‰€ä»¥æ²¡æ³•æ‹¦æˆªã€‚</p><p>å¯¹äºç½‘ç«™æ¥è¯´ï¼Œå¦‚æœå¯ä»¥åœ¨çŸ­æ—¶é—´å†…æ€¥å‰§æ‰©å®¹ï¼Œæä¾›å‡ å€æˆ–å‡ åå€çš„å¸¦å®½ï¼Œå°±å¯ä»¥é¡¶ä½å¤§æµé‡çš„è¯·æ±‚ã€‚è¿™å°±æ˜¯ä¸ºä»€ä¹ˆäº‘æœåŠ¡å•†å¯ä»¥æä¾›é˜²æŠ¤äº§å“ï¼Œå› ä¸ºä»–ä»¬æœ‰å¤§é‡å†—ä½™å¸¦å®½ï¼Œå¯ä»¥ç”¨æ¥æ¶ˆåŒ– DDoS æ”»å‡»ã€‚å½“æœ‰å¤§é‡è¯·æ±‚æ—¶ï¼ŒDNS å°†è®¿é—®é‡å‡åŒ€åˆ†é…åˆ°è¿™å››å°é•œåƒæœåŠ¡å™¨ã€‚</p><ul><li><strong>CDN</strong></li></ul><p>CDN æŒ‡çš„æ˜¯ç½‘ç«™çš„é™æ€å†…å®¹åˆ†å‘åˆ°å¤šä¸ªæœåŠ¡å™¨ï¼Œç”¨æˆ·å°±è¿‘è®¿é—®ï¼Œæé«˜é€Ÿåº¦ã€‚å› æ­¤ï¼ŒCDN ä¹Ÿæ˜¯å¸¦å®½æ‰©å®¹çš„ä¸€ç§æ–¹æ³•ï¼Œå¯ä»¥ç”¨æ¥é˜²å¾¡ DDOS æ”»å‡»ã€‚</p><p>ç½‘ç«™å†…å®¹å­˜æ”¾åœ¨æºæœåŠ¡å™¨ï¼ŒCDN ä¸Šé¢æ˜¯å†…å®¹çš„ç¼“å­˜ã€‚ç”¨æˆ·åªå…è®¸è®¿é—® CDNï¼Œå¦‚æœå†…å®¹ä¸åœ¨ CDN ä¸Šï¼ŒCDN å†å‘æºæœåŠ¡å™¨å‘å‡ºè¯·æ±‚ã€‚è¿™æ ·çš„è¯ï¼Œåªè¦ CDN å¤Ÿå¤§ï¼Œå°±å¯ä»¥æŠµå¾¡å¾ˆå¤§çš„æ”»å‡»ã€‚ä¸è¿‡ï¼Œè¿™ç§æ–¹æ³•æœ‰ä¸€ä¸ªå‰æï¼Œç½‘ç«™çš„å¤§éƒ¨åˆ†å†…å®¹å¿…é¡»å¯ä»¥é™æ€ç¼“å­˜ã€‚å¯¹äºåŠ¨æ€å†…å®¹ä¸ºä¸»çš„ç½‘ç«™ï¼ˆæ¯”å¦‚è®ºå›ï¼‰ï¼Œå°±è¦æƒ³åˆ«çš„åŠæ³•ï¼Œå°½é‡å‡å°‘ç”¨æˆ·å¯¹åŠ¨æ€æ•°æ®çš„è¯·æ±‚ã€‚</p><p>ä¸Šä¸€èŠ‚æåˆ°çš„é•œåƒæœåŠ¡å™¨ï¼Œæœ¬è´¨å°±æ˜¯è‡ªå·±æ­å»ºä¸€ä¸ªå¾®å‹ CDNã€‚å„å¤§äº‘æœåŠ¡å•†æä¾›çš„<a href="https://baike.baidu.com/item/é«˜é˜²æœåŠ¡å™¨">é«˜é˜² IP</a>ï¼ŒèƒŒåä¹Ÿæ˜¯è¿™æ ·åšçš„ï¼šç½‘ç«™åŸŸåæŒ‡å‘é«˜é˜² IPï¼Œå®ƒæä¾›ä¸€ä¸ªç¼“å†²å±‚ï¼Œæ¸…æ´—æµé‡ï¼Œå¹¶å¯¹æºæœåŠ¡å™¨çš„å†…å®¹è¿›è¡Œç¼“å­˜ã€‚</p><p>è¿™é‡Œæœ‰ä¸€ä¸ªå…³é”®ç‚¹ï¼Œä½¿ç”¨ CDNï¼Œåƒä¸‡ä¸è¦æ³„éœ²æºæœåŠ¡å™¨çš„ IP åœ°å€ï¼Œå¦åˆ™æ”»å‡»è€…å¯ä»¥ç»•è¿‡ CDN ç›´æ¥æ”»å‡»æºæœåŠ¡å™¨ï¼Œå‰é¢çš„åŠªåŠ›éƒ½ç™½è´¹ã€‚</p><h2 id="å‚è€ƒèµ„æ–™-3"><a href="#å‚è€ƒèµ„æ–™-3" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h2><p><a href="http://www.ruanyifeng.com/blog/2018/06/ddos.html">é˜®ä¸€å³°.DDoSçš„é˜²èŒƒæ•™ç¨‹</a></p><p><a href="https://leetcode-cn.com/leetbook/read/networks-interview-highlights/ekb9m1/">Leetcode.è®¡ç®—æœºç½‘ç»œé¢è¯•-ç½‘ç»œå®‰å…¨</a></p><p><a href="https://www.zhihu.com/question/22259175/answer/378530276">çŸ¥é“åˆ›å®‡.ä»€ä¹ˆæ˜¯DDoSæ”»å‡»</a></p><p><a href="https://blog.csdn.net/bill_lee_sh_cn/article/details/6065704">ä¸€å¤´è€æ¯….SYN Floodæ”»å‡»åŠé˜²å¾¡æ–¹æ³•</a></p>]]></content>
    
    
    <categories>
      
      <category>è®¡ç®—æœºåŸºç¡€</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>é¢ç»</title>
    <link href="/2021/08/06/%E9%9D%A2%E7%BB%8F/"/>
    <url>/2021/08/06/%E9%9D%A2%E7%BB%8F/</url>
    
    <content type="html"><![CDATA[<h1 id="C-C-staticå…³é”®å­—ä½œç”¨"><a href="#C-C-staticå…³é”®å­—ä½œç”¨" class="headerlink" title="C/C++ staticå…³é”®å­—ä½œç”¨"></a>C/C++ staticå…³é”®å­—ä½œç”¨</h1><ol><li><p>éšè—ï¼šå½“åŒæ—¶ç¼–è¯‘å¤šä¸ªæ–‡ä»¶æ—¶ï¼Œæ‰€æœ‰æœªåŠ staticå‰ç¼€çš„å…¨å±€å˜é‡å’Œå‡½æ•°éƒ½å…·æœ‰å…¨å±€å¯è§æ€§ã€‚</p></li><li><p>å…¨å±€ç”Ÿå‘½å‘¨æœŸï¼šå­˜å‚¨åœ¨é™æ€æ•°æ®åŒºçš„å˜é‡ä¼šåœ¨ç¨‹åºåˆšå¼€å§‹è¿è¡Œæ—¶å°±å®Œæˆå”¯ä¸€çš„ä¸€æ¬¡åˆå§‹åŒ–ã€‚ å…±æœ‰ä¸¤ç§å˜é‡å­˜å‚¨åœ¨é™æ€å­˜å‚¨åŒºï¼šå…¨å±€å˜é‡å’Œstaticå˜é‡ï¼Œä¸å…¨å±€å˜é‡ç›¸æ¯”ï¼Œstaticå¯ä»¥æ§åˆ¶å˜é‡çš„å¯è§èŒƒå›´ã€‚</p></li><li><p>å˜é‡é»˜è®¤åˆå§‹åŒ–ä¸º0ï¼šåœ¨é™æ€æ•°æ®åŒºï¼Œå†…å­˜ä¸­æ‰€æœ‰çš„å­—èŠ‚é»˜è®¤å€¼éƒ½æ˜¯0x00ï¼Œæ‰€ä»¥å…¨å±€å˜é‡ä¹Ÿå…·å¤‡è¿™ä¸€å±æ€§ã€‚</p></li><li><p>C++ä¸­çš„ç±»æˆå‘˜å£°æ˜static</p><ul><li>staticä¿®é¥°çš„å˜é‡æˆ–å‡½æ•°æ˜¯å±äºç±»çš„ï¼Œæ‰€æœ‰å¯¹è±¡åªæœ‰ä¸€ä»½æ‹·è´ã€‚ å› æ­¤ï¼Œä¸èƒ½å°†é™æ€å‡½æ•°è®¾ä¸ºè™šå‡½æ•°ã€‚  </li><li>é™æ€æ•°æ®æˆå‘˜æ˜¯é™æ€å­˜å‚¨çš„ï¼Œæ‰€ä»¥å¿…é¡»å¯¹å®ƒè¿›è¡Œåˆå§‹åŒ–ã€‚ ï¼ˆç¨‹åºå‘˜æ‰‹åŠ¨åˆå§‹åŒ–ï¼Œå¦åˆ™ç¼–è¯‘æ—¶ä¸€èˆ¬ä¸ä¼šæŠ¥é”™ï¼Œä½†æ˜¯åœ¨Linkæ—¶ä¼šæŠ¥é”™è¯¯ï¼‰  </li></ul></li></ol><h1 id="vectoræ˜¯å¦‚ä½•æ‰©å®¹çš„"><a href="#vectoræ˜¯å¦‚ä½•æ‰©å®¹çš„" class="headerlink" title="vectoræ˜¯å¦‚ä½•æ‰©å®¹çš„"></a>vectoræ˜¯å¦‚ä½•æ‰©å®¹çš„</h1><p>å¾€vectorä¸­æ·»åŠ å…ƒç´ æ—¶ï¼Œå¦‚æœç©ºé—´ä¸å¤Ÿå°†ä¼šå¯¼è‡´æ‰©å®¹ã€‚vectoræœ‰ä¸¤ä¸ªå±æ€§ï¼šsizeå’Œcapacityã€‚sizeè¡¨ç¤ºå·²ç»ä½¿ç”¨çš„æ•°æ®å®¹é‡ï¼Œcapacityè¡¨ç¤ºæ•°ç»„çš„å®é™…å®¹é‡ï¼ŒåŒ…å«å·²ä½¿ç”¨çš„å’Œæœªä½¿ç”¨çš„ã€‚</p><p>vectoræ‰©å®¹è§„åˆ™ï¼š</p><ol><li>å½“æ•°ç»„å¤§å°ä¸å¤Ÿå®¹çº³æ–°å¢å…ƒç´ æ—¶ï¼Œå¼€è¾Ÿæ›´å¤§çš„å†…å­˜ç©ºé—´ï¼ŒæŠŠæ—§ç©ºé—´ä¸Šçš„æ•°æ®å¤åˆ¶è¿‡æ¥ï¼Œç„¶ååœ¨æ–°ç©ºé—´ä¸­ç»§ç»­å¢åŠ ã€‚</li><li>æ–°çš„æ›´å¤§çš„å†…å­˜ç©ºé—´ï¼Œä¸€èˆ¬æ˜¯å½“å‰ç©ºé—´çš„1.5å€æˆ–è€…2å€ï¼Œè¿™ä¸ª1.5æˆ–è€…2è¢«ç§°ä¸ºæ‰©å®¹å› å­ï¼Œä¸åŒç³»ç»Ÿå®ç°æ‰©å®¹å› å­ä¹Ÿä¸åŒã€‚</li></ol><h1 id="é‡è½½å’Œé‡å†™çš„åŒºåˆ«"><a href="#é‡è½½å’Œé‡å†™çš„åŒºåˆ«" class="headerlink" title="é‡è½½å’Œé‡å†™çš„åŒºåˆ«"></a>é‡è½½å’Œé‡å†™çš„åŒºåˆ«</h1><p>é‡è½½ï¼šä¸¤ä¸ªå‡½æ•°åç›¸åŒï¼Œä½†æ˜¯å‚æ•°åˆ—è¡¨ä¸åŒï¼ˆä¸ªæ•°ï¼Œç±»å‹ï¼‰ï¼Œè¿”å›å€¼ç±»å‹æ²¡æœ‰è¦æ±‚ï¼Œåœ¨ç»Ÿä¸€ä½œç”¨åŸŸä¸­ã€‚</p><p>è¦†ç›–ï¼šå­ç±»ç»§æ‰¿çˆ¶ç±»ï¼Œçˆ¶ç±»ä¸­çš„å‡½æ•°æ˜¯è™šå‡½æ•°ï¼Œåœ¨å­ç±»ä¸­é‡æ–°å®šä¹‰äº†è¿™ä¸ªè™šå‡½æ•°ï¼Œè¿™ç§æƒ…å†µæ˜¯é‡å†™ã€‚</p><p>é‡å†™ï¼š</p><p>ï¼ˆ1ï¼‰å¦‚æœæ´¾ç”Ÿç±»çš„å‡½æ•°ä¸åŸºç±»çš„å‡½æ•°åŒåï¼Œä½†æ˜¯å‚æ•°ä¸åŒã€‚æ­¤æ—¶ï¼Œä¸è®ºæœ‰æ— virtualå…³é”®å­—ï¼ŒåŸºç±»çš„å‡½æ•°å°†è¢«éšè—ï¼ˆæ³¨æ„åˆ«ä¸é‡è½½æ··æ·†ï¼‰ã€‚<br>ï¼ˆ2ï¼‰å¦‚æœæ´¾ç”Ÿç±»çš„å‡½æ•°ä¸åŸºç±»çš„å‡½æ•°åŒåï¼Œå¹¶ä¸”å‚æ•°ä¹Ÿç›¸åŒï¼Œä½†æ˜¯åŸºç±»å‡½æ•°æ²¡æœ‰virtualå…³é”®å­—ã€‚æ­¤æ—¶ï¼ŒåŸºç±»çš„å‡½æ•°è¢«éšè—ï¼ˆæ³¨æ„åˆ«ä¸è¦†ç›–æ··æ·†ï¼‰ã€‚</p><h1 id="2-5äº¿ä¸ªæ•°æ±‚ä¸é‡å¤æ•°"><a href="#2-5äº¿ä¸ªæ•°æ±‚ä¸é‡å¤æ•°" class="headerlink" title="2.5äº¿ä¸ªæ•°æ±‚ä¸é‡å¤æ•°"></a>2.5äº¿ä¸ªæ•°æ±‚ä¸é‡å¤æ•°</h1><p>æœ‰2.5äº¿ä¸ªæ•´æ•°(è¿™2.5äº¿ä¸ªæ•´æ•°å­˜å‚¨åœ¨ä¸€ä¸ªæ•°ç»„é‡Œé¢ï¼Œè‡³äºæ•°ç»„æ˜¯æ”¾åœ¨å¤–å­˜è¿˜æ˜¯å†…å­˜ï¼Œæ²¡æœ‰è¿›ä¸€æ­¥å…·ä½“è¯´æ˜)ï¼›<br>è¦æ±‚æ‰¾å‡ºè¿™2.5äº¿ä¸ªæ•°å­—é‡Œé¢ï¼Œ ä¸é‡å¤çš„æ•°å­—çš„ä¸ªæ•° ï¼› å¦å¤–ï¼Œå¯ç”¨çš„å†…å­˜é™å®šä¸º600Mï¼› </p><p>ç”¨ä¸€ä¸ªbitè¡¨ç¤ºä¸€ä¸ªæ•°æ˜¯å¦å­˜åœ¨ï¼Œ32bitä¸­æ— ç¬¦å·æ•´æ•°æœ‰4Gä¸ªï¼Œå…±éœ€4G bitsï¼Œæ¯ä¸ªå­—èŠ‚8 bitsï¼Œéœ€è¦4G/8 = 512Må­—èŠ‚ï¼›ç”³è¯·512Må†…å­˜ï¼Œä½œä¸ºä¸€ä¸ªæ•°æ˜¯å¦å­˜åœ¨çš„æ ‡è®°flagï¼Œå…¨æ¸…0ï¼›ç”³è¯·å¦å¤–ä¸€ç»„bitä½œä¸ºè®¡æ•°å™¨countï¼Œå…¨æ¸…0ï¼›</p><h1 id="volatileå…³é”®å­—"><a href="#volatileå…³é”®å­—" class="headerlink" title="volatileå…³é”®å­—"></a>volatileå…³é”®å­—</h1><p><code>volatile</code>ç›´è¯‘ä¸ºæ˜“å¤±æ€§çš„ï¼Œæ„åœ¨å£°æ˜æŸå˜é‡æœ‰å¯èƒ½è¢«ç¼–è¯‘å™¨æœªçŸ¥çš„å› ç´ æ›´æ”¹ï¼Œå¦‚ï¼šæ“ä½œç³»ç»Ÿã€ç¡¬ä»¶æˆ–è€…å…¶å®ƒçº¿ç¨‹ç­‰ã€‚é‡åˆ°è¿™ä¸ªå…³é”®å­—å£°æ˜çš„å˜é‡ï¼Œ<strong>ç¼–è¯‘å™¨å¯¹è®¿é—®è¯¥å˜é‡çš„ä»£ç å°±ä¸å†è¿›è¡Œä¼˜åŒ–</strong>ã€‚ä¾‹å¦‚ï¼š</p><div class="code-wrapper"><pre><code class="hljs c"><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">waitForSemaphore</span><span class="hljs-params">()</span></span><span class="hljs-function"></span>&#123;   <span class="hljs-keyword">volatile</span> <span class="hljs-keyword">uint16_t</span>* semPtr = WELL_KNOWN_SEM_ADDR;<span class="hljs-comment">/*well known address to my semaphore*/</span>   <span class="hljs-keyword">while</span> ((*semPtr) != IS_OK_FOR_ME_TO_PROCEED);&#125;</code></pre></div><p>å¦‚æœæœªè¿›è¡Œæ˜“å¤±æ€§å£°æ˜ï¼Œä¼˜åŒ–ç¼–è¯‘å™¨ä¼šæŠŠå˜é‡ä»å†…å­˜è£…å…¥CPUå¯„å­˜å™¨ä¸­ï¼Œ å³ä½¿å…¶ä»–çº¿ç¨‹å¯¹å†…å­˜ä¸­çš„å˜é‡è¿›è¡Œä¿®æ”¹ï¼Œå½“å‰çº¿ç¨‹åªä½¿ç”¨å¯„å­˜å™¨ä¸­çš„å€¼ï¼Œ<code>while</code>å¾ªç¯å°†æ˜¯ä¸€ä¸ªæ­»å¾ªç¯ï¼›åŠ ä¿®é¥°å­—ä¹‹åï¼Œç¼–è¯‘å™¨æ¯æ¬¡æ“ä½œè¯¥å˜é‡æ—¶ä¼šä»å†…å­˜ä¸­çœŸæ­£å–å‡ºã€‚</p><div class="code-wrapper"><pre><code class="hljs c"><span class="hljs-keyword">volatile</span> <span class="hljs-keyword">int</span> i=<span class="hljs-number">10</span>;<span class="hljs-keyword">int</span> a = i;<span class="hljs-keyword">int</span> b = i;</code></pre></div><p><code>volatile</code>æŒ‡å‡º<code>i</code>æ˜¯éšæ—¶å¯èƒ½å‘ç”Ÿå˜åŒ–çš„ï¼Œæ¯æ¬¡ä½¿ç”¨å®ƒçš„æ—¶å€™å¿…é¡»ä»<code>i</code>çš„åœ°å€ä¸­è¯»å–ï¼Œå› è€Œç¼–è¯‘å™¨ç”Ÿæˆçš„æ±‡ç¼–ä»£ç ä¼šé‡æ–°ä»<code>i</code>çš„åœ°å€è¯»å–æ•°æ®æ”¾åœ¨<code>b</code>ä¸­ã€‚è€Œä¼˜åŒ–åšæ³•æ˜¯ï¼Œç”±äºç¼–è¯‘å™¨å‘ç°ä¸¤æ¬¡è¯»æ•°æ®çš„ä»£ç ä¹‹é—´çš„ä»£ç æ²¡æœ‰å¯¹<code>i</code>è¿›è¡Œè¿‡æ“ä½œï¼Œå®ƒä¼šè‡ªåŠ¨æŠŠä¸Šæ¬¡è¯»çš„æ•°æ®æ”¾åœ¨ <code>b</code>ä¸­ã€‚è€Œä¸æ˜¯é‡æ–°ä»<code>i</code>é‡Œé¢è¯»ã€‚</p><p><strong>å‚è€ƒ</strong></p><p><a href="https://stackoverflow.com/a/72576/16657286">https://stackoverflow.com/a/72576/16657286</a></p><p><a href="https://zhuanlan.zhihu.com/p/62060524">https://zhuanlan.zhihu.com/p/62060524</a></p><h1 id="å¸¸é©»å†…å­˜å’Œå…±äº«å†…å­˜"><a href="#å¸¸é©»å†…å­˜å’Œå…±äº«å†…å­˜" class="headerlink" title="å¸¸é©»å†…å­˜å’Œå…±äº«å†…å­˜"></a>å¸¸é©»å†…å­˜å’Œå…±äº«å†…å­˜</h1><ul><li>å¸¸é©»å†…å­˜ï¼šè¿›ç¨‹é—´åˆ‡æ¢æ—¶ï¼Œæ“ä½œç³»ç»Ÿä¼šå°†æ•°æ®ä»å†…å­˜å¤åˆ¶åˆ°ç£ç›˜ä¸Šæ¥é‡Šæ”¾ä¸€éƒ¨åˆ†å†…å­˜ã€‚ç„¶è€Œï¼Œå½“ä¸€éƒ¨åˆ†å†…å­˜æŒ‡å®šä¸º<em>å¸¸é©»</em>æ—¶ï¼Œå®ƒä¸ä¼šä¸ç£ç›˜äº¤æ¢ã€‚ä½¿é¢‘ç¹è®¿é—®çš„æ•°æ®å¸¸é©»åœ¨å†…å­˜ä¸­å¯ä»¥å‡å°‘è®¿é—®è¯¥æ•°æ®æ‰€éœ€çš„ç£ç›˜ I/O æ“ä½œï¼Œå¦‚æ“ä½œç³»ç»Ÿçš„ä¸­å¿ƒéƒ¨åˆ†å’Œä¸€äº›ç‰¹æ®Šç¨‹åºï¼Œå¦‚æ—¥å†å’Œè®¡ç®—å™¨ã€‚</li><li>å…±äº«å†…å­˜æ˜¯è¿›ç¨‹é—´é€šä¿¡ä¸­æœ€ç®€å•çš„æ–¹å¼ä¹‹ä¸€ã€‚å…±äº«å†…å­˜å…è®¸ä¸¤ä¸ªæˆ–æ›´å¤šè¿›ç¨‹è®¿é—®åŒä¸€å—å†…å­˜ï¼Œå½“ä¸€ä¸ªè¿›ç¨‹æ”¹å˜äº†è¿™å—åœ°å€ä¸­çš„å†…å®¹çš„æ—¶å€™ï¼Œå…¶å®ƒè¿›ç¨‹éƒ½ä¼šå¯Ÿè§‰åˆ°è¿™ä¸ªæ›´æ”¹ã€‚</li></ul><h1 id="DNSåè®®"><a href="#DNSåè®®" class="headerlink" title="DNSåè®®"></a>DNSåè®®</h1><p>DNS ï¼ˆDomain Name Systemï¼‰çš„ä½œç”¨éå¸¸ç®€å•ï¼Œå°±æ˜¯æ ¹æ®åŸŸåæŸ¥å‡ºIPåœ°å€ã€‚</p><p>å®¢æˆ·ç«¯åœ¨ä¸Šç½‘çš„æ—¶å€™ï¼Œéœ€è¦è®¾ç½®ï¼šæœ¬æœºçš„IPåœ°å€ã€å­ç½‘æ©ç ã€ç½‘å…³çš„IPåœ°å€ã€DNSæœåŠ¡å™¨çš„IPåœ°å€ã€‚æˆ‘ä»¬å°±æ˜¯é€šè¿‡DNSæœåŠ¡å™¨æŸ¥å¾—åŸŸåå¯¹åº”çš„IPåœ°å€ã€‚DNSæœåŠ¡å™¨çš„IPåœ°å€ï¼Œæœ‰å¯èƒ½æ˜¯åŠ¨æ€çš„ï¼Œæ¯æ¬¡ä¸Šç½‘æ—¶ç”±ç½‘å…³åˆ†é…ï¼Œè¿™å«åšDHCPæœºåˆ¶ï¼›ä¹Ÿæœ‰å¯èƒ½æ˜¯äº‹å…ˆæŒ‡å®šçš„å›ºå®šåœ°å€ã€‚</p><p>DNSæœåŠ¡å™¨æ€ä¹ˆä¼šçŸ¥é“æ¯ä¸ªåŸŸåçš„IPåœ°å€å‘¢ï¼Ÿç­”æ¡ˆæ˜¯åˆ†çº§æŸ¥è¯¢ã€‚</p><p><strong>åŸŸåçš„å±‚çº§</strong></p><p>ä¸¾ä¾‹æ¥è¯´ï¼Œ<code>www.example.com</code>çœŸæ­£çš„åŸŸåæ˜¯<code>www.example.com.root</code>ï¼Œç®€å†™ä¸º<code>www.example.com.</code>ã€‚å› ä¸ºï¼Œæ ¹åŸŸå<code>.root</code>å¯¹äºæ‰€æœ‰åŸŸåéƒ½æ˜¯ä¸€æ ·çš„ï¼Œæ‰€ä»¥å¹³æ—¶æ˜¯çœç•¥çš„ã€‚</p><p>æ ¹åŸŸåçš„ä¸‹ä¸€çº§ï¼Œå«åšâ€é¡¶çº§åŸŸåâ€ï¼ˆtop-level domainï¼Œç¼©å†™ä¸ºTLDï¼‰ï¼Œæ¯”å¦‚<code>.com</code>ã€<code>.net</code>ï¼›å†ä¸‹ä¸€çº§å«åšâ€æ¬¡çº§åŸŸåâ€ï¼ˆsecond-level domainï¼Œç¼©å†™ä¸ºSLDï¼‰ï¼Œæ¯”å¦‚<code>www.example.com</code>é‡Œé¢çš„<code>.example</code>ï¼Œè¿™ä¸€çº§åŸŸåæ˜¯ç”¨æˆ·å¯ä»¥æ³¨å†Œçš„ï¼›å†ä¸‹ä¸€çº§æ˜¯ä¸»æœºåï¼ˆhostï¼‰ï¼Œæ¯”å¦‚<code>www.example.com</code>é‡Œé¢çš„<code>www</code>ï¼Œåˆç§°ä¸ºâ€ä¸‰çº§åŸŸåâ€ï¼Œè¿™æ˜¯ç”¨æˆ·åœ¨è‡ªå·±çš„åŸŸé‡Œé¢ä¸ºæœåŠ¡å™¨åˆ†é…çš„åç§°ï¼Œæ˜¯ç”¨æˆ·å¯ä»¥ä»»æ„åˆ†é…çš„ã€‚</p><p>æ€»ç»“ä¸€ä¸‹ï¼ŒåŸŸåçš„å±‚çº§ç»“æ„å¦‚ä¸‹ã€‚</p><div class="code-wrapper"><pre><code class="hljs no">ä¸»æœºå.æ¬¡çº§åŸŸå.é¡¶çº§åŸŸå.æ ¹åŸŸå# å³host.sld.tld.root</code></pre></div><p><strong>DNSè®°å½•</strong></p><p>åŸŸåä¸IPä¹‹é—´çš„å¯¹åº”å…³ç³»ï¼Œç§°ä¸ºâ€è®°å½•â€ã€‚æ ¹æ®ä½¿ç”¨åœºæ™¯ï¼Œâ€è®°å½•â€å¯ä»¥åˆ†æˆä¸åŒçš„ç±»å‹ã€‚</p><div class="code-wrapper"><pre><code class="hljs dns">ï¼ˆ<span class="hljs-number">1</span>ï¼‰ <span class="hljs-keyword">A</span>ï¼šåœ°å€è®°å½•ï¼ˆAddressï¼‰ï¼Œè¿”å›åŸŸåæŒ‡å‘çš„IPåœ°å€ã€‚ï¼ˆ<span class="hljs-number">2</span>ï¼‰ <span class="hljs-keyword">NS</span>ï¼šåŸŸåæœåŠ¡å™¨è®°å½•ï¼ˆName Serverï¼‰ï¼Œè¿”å›ä¿å­˜ä¸‹ä¸€çº§åŸŸåä¿¡æ¯çš„æœåŠ¡å™¨åœ°å€ã€‚è¯¥è®°å½•åªèƒ½è®¾ç½®ä¸ºåŸŸåï¼Œä¸èƒ½è®¾ç½®ä¸ºIPåœ°å€ã€‚ï¼ˆ<span class="hljs-number">3</span>ï¼‰<span class="hljs-keyword">CNAME</span>ï¼šè§„èŒƒåç§°è®°å½•ï¼ˆCanonical Nameï¼‰ï¼Œè¿”å›å¦ä¸€ä¸ªåŸŸåï¼Œå³å½“å‰æŸ¥è¯¢çš„åŸŸåæ˜¯å¦ä¸€ä¸ªåŸŸåçš„è·³è½¬ã€‚</code></pre></div><p><strong>åˆ†çº§æŸ¥è¯¢</strong></p><p>â€œåˆ†çº§æŸ¥è¯¢â€ï¼Œå°±æ˜¯ä»æ ¹åŸŸåå¼€å§‹ï¼Œä¾æ¬¡æŸ¥è¯¢æ¯ä¸€çº§åŸŸåçš„NSè®°å½•ï¼Œç›´åˆ°æŸ¥åˆ°æœ€ç»ˆçš„IPåœ°å€ã€‚æ¯ä¸€çº§åŸŸåéƒ½æœ‰è‡ªå·±çš„NSè®°å½•ï¼ŒNSè®°å½•æŒ‡å‘è¯¥çº§åŸŸåçš„åŸŸåæœåŠ¡å™¨ã€‚è¿™äº›æœåŠ¡å™¨çŸ¥é“ä¸‹ä¸€çº§åŸŸåçš„å„ç§è®°å½•ã€‚è¿‡ç¨‹å¤§è‡´å¦‚ä¸‹ã€‚</p><div class="code-wrapper"><pre><code class="hljs no">1. ä»&quot;æ ¹åŸŸåæœåŠ¡å™¨&quot;æŸ¥åˆ°&quot;é¡¶çº§åŸŸåæœåŠ¡å™¨&quot;çš„NSè®°å½•å’ŒAè®°å½•ï¼ˆIPåœ°å€ï¼‰2. ä»&quot;é¡¶çº§åŸŸåæœåŠ¡å™¨&quot;æŸ¥åˆ°&quot;æ¬¡çº§åŸŸåæœåŠ¡å™¨&quot;çš„NSè®°å½•å’ŒAè®°å½•ï¼ˆIPåœ°å€ï¼‰3. ä»&quot;æ¬¡çº§åŸŸåæœåŠ¡å™¨&quot;æŸ¥å‡º&quot;ä¸»æœºå&quot;çš„IPåœ°å€</code></pre></div><p>ä¸Šé¢ï¼Œâ€æ ¹åŸŸåæœåŠ¡å™¨â€çš„NSè®°å½•å’ŒIPåœ°å€ä¸€èˆ¬æ˜¯ä¸ä¼šå˜åŒ–çš„ï¼Œæ‰€ä»¥å†…ç½®åœ¨DNSæœåŠ¡å™¨é‡Œé¢ã€‚</p><p><strong>å‚è€ƒ</strong></p><p><a href="https://www.ruanyifeng.com/blog/2016/06/dns.html">https://www.ruanyifeng.com/blog/2016/06/dns.html</a></p><h1 id="è¿›ç¨‹çš„å†…å­˜åˆ†å¸ƒ"><a href="#è¿›ç¨‹çš„å†…å­˜åˆ†å¸ƒ" class="headerlink" title="è¿›ç¨‹çš„å†…å­˜åˆ†å¸ƒ"></a>è¿›ç¨‹çš„å†…å­˜åˆ†å¸ƒ</h1><p><img src="https://github.com/HerloConnell/BlogPicture/blob/CS-basics/é¢ç»1.png?raw=true" alt=""></p><p>ä»ä½åœ°å€åˆ°é«˜åœ°å€ï¼Œåˆ†åˆ«åŒ…æ‹¬ï¼š</p><ol><li>æ–‡æœ¬æ®µï¼Œä¹Ÿå«ä»£ç æ®µï¼Œæ˜¯å¯¹è±¡æ–‡ä»¶æˆ–å†…å­˜ä¸­ç¨‹åºçš„ä¸€éƒ¨åˆ†ï¼Œå…¶ä¸­åŒ…å«å¯æ‰§è¡ŒæŒ‡ä»¤ã€‚é€šå¸¸ä»£ç æ®µæ˜¯å…±äº«çš„ï¼Œå¯¹äºç»å¸¸æ‰§è¡Œçš„ç¨‹åºï¼Œåªæœ‰ä¸€ä¸ªå‰¯æœ¬éœ€è¦å­˜å‚¨åœ¨å†…å­˜ä¸­ï¼Œä»£ç æ®µæ˜¯åªè¯»çš„ï¼Œä»¥é˜²æ­¢ç¨‹åºä»¥å¤–ä¿®æ”¹æŒ‡ä»¤ã€‚</li><li>åˆå§‹åŒ–çš„æ•°æ®æ®µï¼Œæ˜¯ç¨‹åºçš„è™šæ‹Ÿåœ°å€ç©ºé—´çš„ä¸€éƒ¨åˆ†ï¼Œå®ƒåŒ…å«æœ‰ç¨‹åºå‘˜åˆå§‹åŒ–çš„å…¨å±€å˜é‡å’Œé™æ€å˜é‡ï¼Œå¯ä»¥è¿›ä¸€æ­¥åˆ’åˆ†ä¸ºåªè¯»åŒºåŸŸå’Œè¯»å†™åŒºåŸŸã€‚ä¾‹å¦‚ï¼ŒCä¸­çš„char=â€œhello worldâ€çš„å…¨å±€å­—ç¬¦ä¸²ï¼Œä»¥åŠmain(ä¾‹å¦‚å…¨å±€)ä¹‹å¤–çš„int debug=1è¿™æ ·çš„Cè¯­å¥ã€‚</li><li>æœªåˆå§‹åŒ–çš„æ•°æ®æ®µï¼Œé€šå¸¸ç§°ä¸ºbssæ®µï¼Œè¿™ä¸ªæ®µçš„æ•°æ®åœ¨ç¨‹åºå¼€å§‹ä¹‹å‰æœ‰å†…æ ¸åˆå§‹åŒ–ä¸º0ï¼ŒåŒ…å«æ‰€æœ‰åˆå§‹åŒ–ä¸º0å’Œæ²¡æœ‰æ˜¾ç¤ºåˆå§‹åŒ–çš„å…¨å±€å˜é‡å’Œé™æ€å˜é‡ï¼Œ</li><li>å †ï¼Œå †æ˜¯åŠ¨æ€å†…å­˜åˆ†é…é€šå¸¸å‘ç”Ÿçš„éƒ¨åˆ†ã€‚å †æ˜¯ç”±ç¨‹åºå‘˜è‡ªå·±åˆ†é…çš„ï¼ˆmalloc kmallocç­‰ï¼‰ã€‚å †åŒºåŸŸç”±æ‰€æœ‰å…±äº«åº“å’Œè¿›ç¨‹ä¸­åŠ¨æ€åŠ è½½çš„æ¨¡å—å…±äº«ã€‚</li><li>æ ˆï¼Œå­˜æ”¾ä¸´æ—¶å˜é‡ï¼Œä»¥åŠæ¯æ¬¡è°ƒç”¨å‡½æ•°æ—¶è°ƒç”¨æ ˆã€‚æ¯å½“è°ƒç”¨ä¸€ä¸ªå‡½æ•°æ—¶ï¼Œè¿”å›åˆ°çš„åœ°å€å’Œå…³äºè°ƒç”¨è€…ç¯å¢ƒçš„æŸäº›ä¿¡æ¯çš„åœ°å€ï¼Œæ¯”å¦‚ä¸€äº›æœºå™¨å¯„å­˜å™¨ï¼Œå°±ä¼šè¢«ä¿å­˜åœ¨æ ˆä¸­ã€‚ç„¶åï¼Œæ–°è°ƒç”¨çš„å‡½æ•°åœ¨æ ˆä¸Šåˆ†é…ç©ºé—´ï¼Œç”¨äºè‡ªåŠ¨å’Œä¸´æ—¶å˜é‡ã€‚</li></ol>]]></content>
    
    
    <categories>
      
      <category>è®¡ç®—æœºåŸºç¡€</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>Macä¸‹ä½¿ç”¨GitHub+Hexo+Fluid+Twikooæ­å»ºä¸ªäººåšå®¢</title>
    <link href="/2021/08/03/blog-init/"/>
    <url>/2021/08/03/blog-init/</url>
    
    <content type="html"><![CDATA[<h1 id="å®‰è£…ï¼šGitã€node-jsã€-hexo"><a href="#å®‰è£…ï¼šGitã€node-jsã€-hexo" class="headerlink" title="å®‰è£…ï¼šGitã€node.jsã€ hexo"></a>å®‰è£…ï¼šGitã€node.jsã€ hexo</h1><ol><li><p>å®‰è£…Homebrew</p></li><li><p>å®‰è£…node.js</p><div class="code-wrapper"><pre><code class="hljs crmsh">brew install <span class="hljs-keyword">node</span><span class="hljs-title"></span></code></pre></div></li><li><p>å®‰è£…git</p><ul><li><p>ä¸€ç§æ–¹æ³•æ˜¯å®‰è£…Xcode</p></li><li><p>å¦ä¸€ç§æ–¹æ³•æ˜¯</p><div class="code-wrapper"><pre><code class="hljs mipsasm"><span class="hljs-keyword">brew </span><span class="hljs-keyword">install </span>git</code></pre></div></li></ul></li><li><p>ä½¿ç”¨ npm å®‰è£… hexo</p><div class="code-wrapper"><pre><code class="hljs avrasm">npm install -g hexo-<span class="hljs-keyword">cli</span></code></pre></div></li></ol><h1 id="åˆå§‹åŒ–åšå®¢"><a href="#åˆå§‹åŒ–åšå®¢" class="headerlink" title="åˆå§‹åŒ–åšå®¢"></a>åˆå§‹åŒ–åšå®¢</h1><ol><li><p>åœ¨æŸä½ç½®æ–°å»ºblogsæ–‡ä»¶å¤¹ï¼Œå¦‚<code>ï½/Documents/blogs</code>ï¼Œå¹¶<code>cd</code>å…¥è¯¥æ–‡ä»¶å¤¹</p></li><li><p>åšå®¢åˆå§‹åŒ–ï¼Œè¿™ä¸€æ­¥ä¼šåœ¨<code>blogs</code>ä¸­ç”Ÿæˆä¸€äº›é…ç½®æ–‡ä»¶</p><div class="code-wrapper"><pre><code class="hljs csharp">hexo <span class="hljs-keyword">init</span></code></pre></div></li><li><p>è¿›è¡Œæœ¬åœ°é¢„è§ˆ</p><div class="code-wrapper"><pre><code class="hljs ebnf"><span class="hljs-attribute">hexo s</span></code></pre></div></li><li><p>åœ¨<code>http://localhost:4000</code>è¿›è¡Œé¢„è§ˆï¼Œçœ‹åˆ°HEXOçš„<code>hello world</code>ç•Œé¢å³ä¸ºæˆåŠŸ</p></li></ol><h1 id="æ·»åŠ SSH-Keyåˆ°github"><a href="#æ·»åŠ SSH-Keyåˆ°github" class="headerlink" title="æ·»åŠ SSH Keyåˆ°github"></a>æ·»åŠ SSH Keyåˆ°github</h1><ul><li><code>Enter file in which to save the key</code>æ—¶ç›´æ¥æŒ‰å›è½¦ï¼Œå³åœ¨é»˜è®¤ä½ç½®ç”Ÿæˆsshæ–‡ä»¶ï¼Œå³<code>/Users/xxx/.ssh/id_rsa.pub</code></li><li><code>Enter passphrase</code>æ—¶ç›´æ¥å›è½¦å³ä¸éœ€è¦å¯†ç ï¼Œå¦‚è®¾ç½®å¯†ç ï¼Œè¯¥å¯†ç ä¸ºpushæ—¶éœ€è¦çš„å¯†ç ï¼Œä¸githubè´¦æˆ·å¯†ç ç­‰æ— å…³</li></ul><div class="code-wrapper"><pre><code class="hljs gradle">% git config --global user.name <span class="hljs-string">&quot;githubè´¦æˆ·åï¼Œå¤§å°å†™æ•æ„Ÿ&quot;</span>                   % git config --global user.email <span class="hljs-string">&quot;githubè´¦æˆ·é‚®ç®±&quot;</span>% ssh-keygen -t rsa -C <span class="hljs-string">&quot;githubè´¦æˆ·é‚®ç®±&quot;</span>Generating <span class="hljs-keyword">public</span>/<span class="hljs-keyword">private</span> rsa key pair.Enter <span class="hljs-keyword">file</span> in which to save the key (<span class="hljs-regexp">/Users/</span>xxx<span class="hljs-regexp">/.ssh/i</span>d_rsa): Created directory <span class="hljs-string">&#x27;/Users/lihan/.ssh&#x27;</span>.Enter passphrase (empty <span class="hljs-keyword">for</span> no passphrase): Enter same passphrase again: Your identification has been saved in <span class="hljs-regexp">/Users/</span>xxx<span class="hljs-regexp">/.ssh/i</span>d_rsa.Your <span class="hljs-keyword">public</span> key has been saved in <span class="hljs-regexp">/Users/</span>xxx<span class="hljs-regexp">/.ssh/i</span>d_rsa.pub.</code></pre></div><p>ç”Ÿæˆæ–‡ä»¶ä¹‹åï¼Œå¤åˆ¶<code>id_rsa.pub</code>ä¸­çš„å†…å®¹ï¼Œè¿™å°±æ˜¯éœ€è¦çš„keyï¼›ç™»é™†github -&gt; setting -&gt; SSH and GPG keys -&gt; New SSH keyï¼Œå°†keyå¤åˆ¶ç²˜è´´ï¼ŒTitleå¯ä»¥å–åä¸ºè®¾å¤‡å</p><h1 id="æœ¬åœ°åšå®¢å…³è”åˆ°Githubä¸»é¡µ"><a href="#æœ¬åœ°åšå®¢å…³è”åˆ°Githubä¸»é¡µ" class="headerlink" title="æœ¬åœ°åšå®¢å…³è”åˆ°Githubä¸»é¡µ"></a>æœ¬åœ°åšå®¢å…³è”åˆ°Githubä¸»é¡µ</h1><ol><li><p>ç™»å½•Githubå¹¶ä¸”åˆ›å»ºä¸€ä¸ªåå­—ä¸º <code>username.github.io</code> çš„ä»“åº“ï¼Œå¦‚<code>HerloConnell.github.io</code>ï¼Œé€‰æ‹©<code>Public</code></p></li><li><p>ä¿®æ”¹<code>blogs/_config.yml</code>çš„<code>deploy</code>ï¼Œæ³¨æ„è¿™é‡Œä½¿ç”¨çš„æ˜¯åˆ†æ”¯master</p><p><strong>åœ¨8.13å·ä»¥ågitéœ€è¦ä½¿ç”¨ä»¤ç‰Œï¼Œrepoè®¾ç½®ç¨æœ‰æ”¹åŠ¨ï¼Œå…·ä½“è§é”™è¯¯2</strong></p><div class="code-wrapper"><pre><code class="hljs yaml"><span class="hljs-attr">deploy:</span>  <span class="hljs-attr">type:</span> <span class="hljs-string">git</span>  <span class="hljs-attr">repo:</span> <span class="hljs-string">https://github.com/HerloConnell/HerloConnell.github.io.git</span>  <span class="hljs-attr">branch:</span> <span class="hljs-string">master</span></code></pre></div></li><li><p>å°†åšå®¢pushåˆ°GitHub</p><div class="code-wrapper"><pre><code class="hljs ebnf"><span class="hljs-attribute">hexo g</span><span class="hljs-attribute">hexo d</span></code></pre></div></li><li><p>åœ¨è¯¥ä»“åº“çš„<code>settings</code>ä¸­é€‰æ‹©<code>GitHub Pages</code>,ç‚¹å‡»<code>heck it out here!</code>ï¼Œæ˜¾ç¤º</p><div class="code-wrapper"><pre><code class="hljs delphi">Your site <span class="hljs-keyword">is</span> <span class="hljs-keyword">published</span> at https:<span class="hljs-comment">//herloconnell.github.io/</span></code></pre></div><p>åœ¨<code>Source</code>å¤„é€‰æ‹©<code>Branch:master</code></p></li><li><p>å†æ¬¡æ‰§è¡Œä¸‹é¢çš„ä»£ç ï¼Œæ­¤æ—¶åº”è¯¥å¯ä»¥åœ¨<code>https://herloconnell.github.io/</code>çœ‹åˆ°Hexoç•Œé¢</p><div class="code-wrapper"><pre><code class="hljs ebnf"><span class="hljs-attribute">hexo g</span><span class="hljs-attribute">hexo d</span></code></pre></div></li></ol><h1 id="hexoå¸¸ç”¨å‘½ä»¤"><a href="#hexoå¸¸ç”¨å‘½ä»¤" class="headerlink" title="hexoå¸¸ç”¨å‘½ä»¤"></a>hexoå¸¸ç”¨å‘½ä»¤</h1><div class="code-wrapper"><pre><code class="hljs axapta">hexo n <span class="hljs-string">&quot;åšå®¢åç§°&quot;</span>  =&gt; hexo <span class="hljs-keyword">new</span> <span class="hljs-string">&quot;åšå®¢åç§°&quot;</span>   <span class="hljs-meta">#è¿™ä¸¤ä¸ªéƒ½æ˜¯åˆ›å»ºæ–°æ–‡ç« ï¼Œå‰è€…æ˜¯ç®€å†™æ¨¡å¼</span>hexo p  =&gt; hexo publishhexo g  =&gt; hexo generate  <span class="hljs-meta">#ç”Ÿæˆ</span>hexo s  =&gt; hexo <span class="hljs-keyword">server</span>  <span class="hljs-meta">#å¯åŠ¨æœåŠ¡é¢„è§ˆ</span>hexo d  =&gt; hexo deploy  <span class="hljs-meta">#éƒ¨ç½²  </span>hexo <span class="hljs-keyword">server</span>   <span class="hljs-meta">#Hexo ä¼šç›‘è§†æ–‡ä»¶å˜åŠ¨å¹¶è‡ªåŠ¨æ›´æ–°ï¼Œæ— é¡»é‡å¯æœåŠ¡å™¨ã€‚</span>hexo <span class="hljs-keyword">server</span> -s   <span class="hljs-meta">#é™æ€æ¨¡å¼</span>hexo <span class="hljs-keyword">server</span> -p <span class="hljs-number">5000</span>   <span class="hljs-meta">#æ›´æ”¹ç«¯å£</span>hexo <span class="hljs-keyword">server</span> -i <span class="hljs-number">192.168</span><span class="hljs-number">.1</span><span class="hljs-number">.1</span>   <span class="hljs-meta">#è‡ªå®šä¹‰IP</span>hexo clean   <span class="hljs-meta">#æ¸…é™¤ç¼“å­˜ï¼Œç½‘é¡µæ­£å¸¸æƒ…å†µä¸‹å¯ä»¥å¿½ç•¥æ­¤æ¡å‘½ä»¤</span>hexo g   <span class="hljs-meta">#ç”Ÿæˆé™æ€ç½‘é¡µ</span>hexo d   <span class="hljs-meta">#å¼€å§‹éƒ¨ç½²</span></code></pre></div><h1 id="Fluidä¸»é¢˜"><a href="#Fluidä¸»é¢˜" class="headerlink" title="Fluidä¸»é¢˜"></a>Fluidä¸»é¢˜</h1><p><a href="https://hexo.io/themes/">hexoä¸»é¢˜ç½‘ç«™</a>ï¼Œ<a href="https://github.com/fluid-dev/hexo-theme-fluid">Fluid</a></p><ol><li><p>åœ¨<code>/blogs/themes</code>ä¸­</p><div class="code-wrapper"><pre><code class="hljs bash">git <span class="hljs-built_in">clone</span> https://github.com/fluid-dev/hexo-theme-fluid.git</code></pre></div></li><li><p>å°†<code>hexo-theme-fluid</code>æ–‡ä»¶å¤¹æ›´åä¸º<code>fluid</code>ï¼Œå¹¶ä¿®æ”¹hexoçš„<code>_config.yml</code></p><div class="code-wrapper"><pre><code class="hljs yaml"><span class="hljs-attr">theme:</span> <span class="hljs-string">fluid</span></code></pre></div></li><li><p>å‚è€ƒ<code>Fluid</code>ä¸»é¢˜é…ç½®è¿›è¡Œé…ç½®ï¼Œå¦‚é…ç½®<code>Latex</code>æ”¯æŒç­‰ï¼ˆæ³¨ï¼š<code>Latex</code>éœ€è¦åœ¨æ–‡ç«  <a href="https://hexo.io/zh-cn/docs/front-matter">Front-matter</a>é‡ŒæŒ‡å®š <code>math: true</code> æ‰ä¼šåœ¨æ–‡ç« é¡µå¯åŠ¨å…¬å¼è½¬æ¢ï¼Œä»¥ä¾¿åœ¨é¡µé¢ä¸åŒ…å«å…¬å¼æ—¶æé«˜åŠ è½½é€Ÿåº¦ï¼‰</p></li></ol><h1 id="Twikoo-è¯„è®ºç³»ç»Ÿ"><a href="#Twikoo-è¯„è®ºç³»ç»Ÿ" class="headerlink" title="Twikoo è¯„è®ºç³»ç»Ÿ"></a>Twikoo è¯„è®ºç³»ç»Ÿ</h1><p><a href="https://twikoo.js.org/quick-start.html#äº‘å‡½æ•°éƒ¨ç½²">Twikooå®˜ç½‘ </a>ï¼Œ<a href="https://www.anzifan.com/post/icarus_to_candy_2/">å‚è€ƒäºè¯¥ç¯‡åšå®¢</a></p><ol><li><p>åœ¨è…¾è®¯äº‘ç”³è¯·äº‘ç¯å¢ƒ</p><blockquote><ol><li><a href="https://curl.qcloud.com/KnnJtUom">æ³¨å†Œäº‘å¼€å‘CloudBase</a></li><li>è¿›å…¥äº‘å¼€å‘æ§åˆ¶å°ï¼Œæ–°å»ºç¯å¢ƒï¼Œè¯·æŒ‰éœ€é…ç½®ç¯å¢ƒï¼š<ul><li>ç¯å¢ƒåç§°è‡ªç”±å¡«å†™</li><li>é€‰æ‹©è®¡è´¹æ–¹å¼<code>åŒ…å¹´åŒ…æœˆ</code>ï¼Œå¥—é¤ç‰ˆæœ¬<code>å…è´¹ç‰ˆ</code>ï¼Œè¶…å‡ºå…è´¹é¢åº¦ä¸ä¼šæ”¶è´¹</li></ul></li><li>è¿›å…¥<a href="https://console.cloud.tencent.com/tcb/env/login">ç¯å¢ƒ-ç™»å½•æˆæƒ</a>ï¼Œå¯ç”¨â€œåŒ¿åç™»å½•â€ï¼›</li><li>è¿›å…¥<a href="https://console.cloud.tencent.com/tcb/env/safety">ç¯å¢ƒ-å®‰å…¨é…ç½®</a>ï¼Œå°†ç½‘ç«™åŸŸå(å¦‚<code>herloconnell.github.io</code>)æ·»åŠ åˆ°â€œWEBå®‰å…¨åŸŸåâ€</li></ol></blockquote></li><li><p>é…ç½®äº‘å‡½æ•°</p><blockquote><ol><li>è¿›å…¥<a href="https://console.cloud.tencent.com/tcb/scf/index">ç¯å¢ƒ-äº‘å‡½æ•°</a>ï¼Œç‚¹å‡»â€œæ–°å»ºäº‘å‡½æ•°â€</li><li>å‡½æ•°åç§°è¯·å¡«å†™ï¼š<code>twikoo</code>ï¼Œåˆ›å»ºæ–¹å¼è¯·é€‰æ‹©ï¼š<code>ç©ºç™½å‡½æ•°</code>ï¼Œè¿è¡Œç¯å¢ƒè¯·é€‰æ‹©ï¼š<code>Nodejs 10.15</code>ï¼Œå‡½æ•°å†…å­˜è¯·é€‰æ‹©ï¼š<code>128MB</code>ï¼Œç‚¹å‡»â€œä¸‹ä¸€æ­¥â€</li><li>æ‰“å¼€ <a href="https://imaegoo.coding.net/public/twikoo/twikoo/git/files/dev/src/function/twikoo/index.js">index.js</a>ï¼Œå…¨é€‰ä»£ç ã€å¤åˆ¶ã€ç²˜è´´åˆ°â€œå‡½æ•°ä»£ç â€è¾“å…¥æ¡†ä¸­ï¼Œç‚¹å‡»â€œç¡®å®šâ€</li><li>åˆ›å»ºå®Œæˆåï¼Œç‚¹å‡»â€œtwikooâ€è¿›å…¥äº‘å‡½æ•°è¯¦æƒ…é¡µï¼Œè¿›å…¥â€œå‡½æ•°ä»£ç â€æ ‡ç­¾ï¼Œç‚¹å‡»â€œæ–‡ä»¶ - æ–°å»ºæ–‡ä»¶â€ï¼Œè¾“å…¥ <code>package.json</code>ï¼Œå›è½¦</li><li>æ‰“å¼€ <a href="https://imaegoo.coding.net/public/twikoo/twikoo/git/files/dev/src/function/twikoo/package.json">package.json</a>ï¼Œå…¨é€‰ä»£ç ã€å¤åˆ¶ã€ç²˜è´´åˆ°ä»£ç æ¡†ä¸­ï¼Œç‚¹å‡»â€œä¿å­˜å¹¶å®‰è£…ä¾èµ–â€</li></ol></blockquote></li><li><p>ä¿®æ”¹config.yml</p><div class="code-wrapper"><pre><code class="hljs yaml"><span class="hljs-attr">comments:</span><span class="hljs-attr">enable:</span> <span class="hljs-literal">true</span><span class="hljs-comment"># æŒ‡å®šçš„æ’ä»¶ï¼Œéœ€è¦åŒæ—¶è®¾ç½®å¯¹åº”æ’ä»¶çš„å¿…è¦å‚æ•°</span><span class="hljs-comment"># The specified plugin needs to set the necessary parameters at the same time</span><span class="hljs-comment"># Options: utterances | disqus | gitalk | valine | waline | changyan | livere | remark42 | twikoo | cusdis</span><span class="hljs-attr">type:</span> <span class="hljs-string">twikoo</span><span class="hljs-string">....</span><span class="hljs-attr">twikoo:</span>  <span class="hljs-attr">envId:</span> <span class="hljs-comment">#äº‘ç¯å¢ƒID</span>  <span class="hljs-attr">region:</span> <span class="hljs-comment"># ap-guangzhou æˆ– ap-shanghaiï¼Œæ ¹æ®äº‘ç¯å¢ƒç”³è¯·åœ°è€Œå®š</span>  <span class="hljs-attr">path:</span> <span class="hljs-comment"># window.location.pathname</span></code></pre></div></li><li><p>é…ç½®ã€ç®¡ç†ä½ çš„ Twikoo è¯„è®ºç³»ç»Ÿ</p><p>åˆ°è¿™ä¸€æ­¥<code>hexo clean</code>ï¼Œ<code>hexo g</code>ï¼Œ<code>hexo d</code>ä¹‹ååº”è¯¥å¯ä»¥çœ‹åˆ°è¯„è®ºç³»ç»Ÿã€‚</p><blockquote><ol><li>è¿›å…¥<a href="https://console.cloud.tencent.com/tcb/env/login">ç¯å¢ƒ-ç™»å½•æˆæƒ</a>ï¼Œç‚¹å‡»â€œè‡ªå®šä¹‰ç™»å½•â€å³è¾¹çš„â€œç§é’¥ä¸‹è½½â€ï¼Œä¸‹è½½ç§é’¥æ–‡ä»¶</li><li>ç”¨æ–‡æœ¬ç¼–è¾‘å™¨æ‰“å¼€ç§é’¥æ–‡ä»¶ï¼Œå¤åˆ¶å…¨éƒ¨å†…å®¹</li><li>ä½ åªéœ€è¦æ¥åˆ°æœ€ä¸‹é¢çš„è¯„è®ºåŒºï¼Œç‚¹å‡»å°é½¿è½® å³å¯é…ç½®æ›´å¤šè®¾ç½®ï¼Œå½“ç„¶åšä¸»æ˜¯éœ€è¦ç™»å½•çš„ï¼Œåˆæ¬¡è¿›å…¥éœ€è¦ç²˜è´´ç§é’¥æ–‡ä»¶å†…å®¹ï¼Œå¹¶è®¾ç½®ç®¡ç†å‘˜å¯†ç ã€‚</li></ol></blockquote></li></ol><h1 id="é”™è¯¯"><a href="#é”™è¯¯" class="headerlink" title="é”™è¯¯"></a>é”™è¯¯</h1><p><strong>é”™è¯¯ä¸€ï¼š443</strong></p><div class="code-wrapper"><pre><code class="hljs bash">fatal unable to access https://github.com LibreSSL SSL_connect SSL_ERROR_SYSCALL <span class="hljs-keyword">in</span> connection to github.com 443</code></pre></div><p>ç§‘å­¦ä¸Šç½‘çš„æ¢ä¸ªèŠ‚ç‚¹æˆ–è€…å¤šæäº¤å‡ æ¬¡å³å¯</p><p><strong>é”™è¯¯äºŒï¼š403</strong></p><div class="code-wrapper"><pre><code class="hljs bash">remote: Support <span class="hljs-keyword">for</span> password authentication was removed on August 13, 2021. Please use a personal access token instead.remote: Please see https://github.blog/2020-12-15-token-authentication-requirements-for-git-operations/ <span class="hljs-keyword">for</span> more information.fatal: unable to access <span class="hljs-string">&#x27;https://github.com/HerloConnell/HerloConnell.github.io.git/&#x27;</span>: The requested URL returned error: 403</code></pre></div><p>2021å¹´8æœˆ13å GitHub ä¸èƒ½å†ç”¨å¯†ç pull/push éœ€è¦ä½¿ç”¨ä»¤ç‰Œã€‚</p><ul><li><p>è¿›å…¥ Github â€”&gt; Settings â€”&gt; Developer settings â€”&gt; Personal access tokensè·å¾—ä¸€ä¸ªtokenï¼Œè¿™é‡Œä½œç”¨åŸŸæˆ‘ç‚¹çš„å…¨é€‰ã€‚</p></li><li><p>ä¿®æ”¹<code>config</code></p><div class="code-wrapper"><pre><code class="hljs yaml"><span class="hljs-attr">deploy:</span>  <span class="hljs-attr">type:</span> <span class="hljs-string">git</span>  <span class="hljs-attr">repo:</span> <span class="hljs-string">https://&lt;Token&gt;@github.com/HerloConnell/HerloConnell.github.io.git</span>  <span class="hljs-attr">branch:</span> <span class="hljs-string">master</span></code></pre></div></li></ul>]]></content>
    
    
    <categories>
      
      <category>æ‚ä¸ƒæ‚å…«</category>
      
    </categories>
    
    
  </entry>
  
  
  
  
</search>
